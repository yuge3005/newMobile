function requestStr(t){for(var e=location.search.split(/[?&]/),a=Object,n=0;n<e.length;n++){var i=e[n].split("=");2==i.length&&(a[i[0]]=i[1])}return a[t]}var __reflect=this&&this.__reflect||function(t,e,a){t.__class__=e,a?a.push(e):a=[e],t.__types__=t.__types__?a.concat(t.__types__):a},__extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);a.prototype=e.prototype,t.prototype=new a},GameUIItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.showFreeExtraPosition=function(){if(this.gratisUI||(this.gratisUI=this.getGratisUI()),!(this.gratisNumber<=0)){var t=BallManager.getBallLastPosition(this.gratisNumber-1);this.gratisUI.x=t.x,this.gratisUI.y=t.y,this.addChildAt(this.gratisUI,this.getChildIndex(this.extraUIObject)+(this.gratisUIIsOverExtraUI?1:0))}},e.prototype.getGratisUI=function(){return null},e}(egret.Sprite);__reflect(GameUIItem.prototype,"GameUIItem");var GenericModal=function(t){function e(a){void 0===a&&(a=null);var n=t.call(this)||this;return n.enableKeyboard=!1,n.inited=!1,n.assetName=egret.getDefinitionByName(egret.getQualifiedClassName(n)).classAssetName,null===n.assetName||""===n.assetName||e.assetLoaded[n.assetName]?n.init():a?(n.configUrl=a,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,n.analyse,n),RES.loadConfig("../data.res.json",a.replace("data.res.json","resource/"))):e.loadAsset(n.assetName,n),n}return __extends(e,t),Object.defineProperty(e,"classAssetName",{get:function(){return""},enumerable:!0,configurable:!0}),e.prototype.analyse=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.analyse,this),e.loadAsset(this.assetName,this)},e.prototype.init=function(){this.inited=!0,this.dispatchEvent(new egret.Event(e.GENERIC_MODAL_LOADED))},e.loadAsset=function(t,e){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.loaded,e),RES.loadGroup(t)},e.loaded=function(t){t.groupName==this.assetName&&(e.assetLoaded[this.assetName]=!0,this.init(),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.loaded,this))},e.prototype.onKeyUp=function(t){},e.GENERIC_MODAL_LOADED="modalLoaded",e.CLOSE_MODAL="closeModal",e.MODAL_COMMAND="modalCommand",e.assetLoaded=new Array,e}(egret.Sprite);__reflect(GenericModal.prototype,"GenericModal");var mouse=function(){function t(){}return t.setButtonMode=function(t){},t}();__reflect(mouse.prototype,"mouse");var TowerGrid=function(t){function e(){var e=t.call(this)||this;return e.numTxt=MDS.addBitmapTextAt(e,"Arial Black_fnt",0,.125*-CardGridColorAndSizeSettings.defaultNumberSize,"center",CardGridColorAndSizeSettings.defaultNumberSize,CardGridColorAndSizeSettings.numberColor,CardGridColorAndSizeSettings.gridSize.x,CardGridColorAndSizeSettings.gridSize.y),e._currentBgPic=e.defaultBgPic=Com.createBitmapByName(BingoMachine.getAssetStr(CardGridUISettings.defaultBgPicName)),e.onEffBgPic=Com.createBitmapByName(BingoMachine.getAssetStr(CardGridUISettings.onEffBgPicName)),e.blink1Pic=Com.createBitmapByName(BingoMachine.getAssetStr(CardGridUISettings.blink1PicName)),e.blink2Pic=Com.createBitmapByName(BingoMachine.getAssetStr(CardGridUISettings.blink2PicName)),e.linePic=Com.createBitmapByName(BingoMachine.getAssetStr(CardGridUISettings.linePicName)),e.gridView=new egret.Bitmap,e.addChild(e.gridView),e.gridLayer=new egret.DisplayObjectContainer,e}return __extends(e,t),Object.defineProperty(e.prototype,"currentBgPic",{set:function(t){this._currentBgPic=t,this.flushGrid()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChecked",{get:function(){return this._isChecked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blink",{get:function(){return this._blink},set:function(t){this._blink!=t&&(this._blink=t,t?(this.numTxt.textColor=CardGridColorAndSizeSettings.numberColorOnEffect,this.showBlink(!0)):this.currentBgPic=this.defaultBgPic)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridNumber",{get:function(){return this.num},set:function(t){this.num=t,this.numTxt.text=""+t,0==t&&CardGridUISettings.zeroUI&&(this.zeroUIBitmap||(this.zeroUIBitmap=Com.addBitmapAt(this,BingoMachine.getAssetStr(CardGridUISettings.zeroUI),0,0))),this.flushGrid()},enumerable:!0,configurable:!0}),e.prototype.flushGrid=function(){this.gridLayer.removeChildren(),this.gridLayer.addChild(this._currentBgPic),this.gridLayer.addChild(this.numTxt);var t=new egret.RenderTexture;t.drawToTexture(this.gridLayer,new egret.Rectangle(0,0,this.gridLayer.width,this.gridLayer.height)),this.gridView.texture=t},e.prototype.showEffect=function(t){this.blink&&(this.blink=!1),this._isChecked=t,t?(CardGridColorAndSizeSettings.colorNumberOnEffect&&(this.numTxt.textColor=CardGridColorAndSizeSettings.numberColorOnEffect),this.currentBgPic=this.onEffBgPic):(this.blink&&(this.blink=!1),CardGridColorAndSizeSettings.colorNumberOnEffect&&(this.numTxt.textColor=CardGridColorAndSizeSettings.numberColor),this.currentBgPic=this.defaultBgPic)},e.prototype.showRedEffect=function(){this.numTxt.textColor=CardGridColorAndSizeSettings.numberColor,this.currentBgPic=this.linePic},e.prototype.showBlink=function(t){t?this.currentBgPic=this.blink1Pic:this.currentBgPic=this.blink2Pic},e}(egret.Sprite);__reflect(TowerGrid.prototype,"TowerGrid");var SFSConnector=function(){function SFSConnector(){SFSConnector.connection=!1,SFSConnector.login=!1,SFSConnector._config||(SFSConnector._config={host:"52.2.30.161",port:8989,debug:!1,useSSL:!0}),this.connection()}return SFSConnector.prototype.connection=function(){eval("SFS2X")&&eval("SFS2X.SmartFox")&&(SFSConnector._sfs?console.error("SFSServer had been initilized!"):(SFSConnector._sfs=eval("new SFS2X.SmartFox(SFSConnector._config)"),SFSConnector._sfs.logger.level=eval("SFS2X.LogLevel.DEBUG"),SFSConnector._sfs.logger.enableConsoleOutput=!0,SFSConnector._sfs.logger.enableEventDispatching=!0,SFSConnector._sfs.logger.addEventListener(eval("SFS2X.LoggerEvent.DEBUG"),this.showSfsLogs,this),SFSConnector._sfs.logger.addEventListener(eval("SFS2X.LoggerEvent.INFO"),this.showSfsLogs,this),SFSConnector._sfs.logger.addEventListener(eval("SFS2X.LoggerEvent.WARNING"),this.showSfsLogs,this),SFSConnector._sfs.logger.addEventListener(eval("SFS2X.LoggerEvent.ERROR"),this.showSfsLogs,this),SFSConnector._sfs.addEventListener(eval("SFS2X.SFSEvent.CONNECTION"),this.onSfsConnection,this),SFSConnector._sfs.addEventListener(eval("SFS2X.SFSEvent.CONNECTION_LOST"),this.onSfsConnectionLost,this),SFSConnector._sfs.addEventListener(eval("SFS2X.SFSEvent.EXTENSION_RESPONSE"),this.onSfsExtensionResponse,this),SFSConnector._sfs.addEventListener(eval("SFS2X.SFSEvent.LOGIN"),this.onLogin,this),SFSConnector._sfs.addEventListener(eval("SFS2X.SFSEvent.LOGIN_ERROR"),this.onLoginError,this),SFSConnector._sfs.addEventListener(eval("SFS2X.SFSEvent.ROOM_JOIN"),this.onJoinRoom,this),SFSConnector._sfs.addEventListener(eval("SFS2X.SFSEvent.ROOM_JOIN_ERROR"),this.onJoinRoomError,this),SFSConnector._sfs.connect()))},SFSConnector.prototype.showSfsLogs=function(t){console.log(t.message||"")},SFSConnector.prototype.onSfsConnection=function(t){t.success&&(console.log("connected to SFS Server 2X "+SFSConnector._sfs.version),SFSConnector.connection=!0)},SFSConnector.prototype.onSfsConnectionLost=function(event){console.log("SFS Server connection lost!"),console.log(event),alert("connection lost!"),SFSConnector._sfs.removeEventListener(eval("SFS2X.SFSEvent.CONNECTION"),this.onSfsConnection),SFSConnector._sfs.removeEventListener(eval("SFS2X.SFSEvent.CONNECTION_LOST"),this.onSfsConnectionLost),SFSConnector._sfs.removeEventListener(eval("SFS2X.SFSEvent.EXTENSION_RESPONSE"),this.onSfsExtensionResponse),SFSConnector._sfs.removeEventListener(eval("SFS2X.SFSEvent.LOGIN"),this.onLogin),SFSConnector._sfs.removeEventListener(eval("SFS2X.SFSEvent.LOGIN_ERROR"),this.onLoginError),SFSConnector._sfs.removeEventListener(eval("SFS2X.SFSEvent.ROOM_JOIN"),this.onJoinRoom),SFSConnector._sfs.removeEventListener(eval("SFS2X.SFSEvent.ROOM_JOIN_ERROR"),this.onJoinRoomError),SFSConnector._sfs.logger.removeEventListener(eval("SFS2X.LoggerEvent.DEBUG"),this.showSfsLogs),SFSConnector._sfs.logger.removeEventListener(eval("SFS2X.LoggerEvent.INFO"),this.showSfsLogs),SFSConnector._sfs.logger.removeEventListener(eval("SFS2X.LoggerEvent.WARNING"),this.showSfsLogs),SFSConnector._sfs.logger.removeEventListener(eval("SFS2X.LoggerEvent.ERROR"),this.showSfsLogs),SFSConnector.connection=!1,SFSConnector._sfs=null},SFSConnector.prototype.onLogin=function(event){console.log("login success!"),SFSConnector.gettingRoom&&(SFSConnector._sfs.send(eval("new SFS2X.JoinRoomRequest('"+SFSConnector.gettingRoom+"')")),SFSConnector.gettingRoom=null)},SFSConnector.prototype.onLoginError=function(t){console.error("login failed! "+t.errorMessage)},SFSConnector.prototype.onJoinRoom=function(t){console.log("join room <"+t.room+"> success!"),SFSConnector.joinRoomCallback&&(SFSConnector.joinRoomCallback(),SFSConnector.joinRoomCallback=null)},SFSConnector.prototype.onJoinRoomError=function(t){console.error("join room failed! "+t.errorMessage)},SFSConnector.prototype.onSfsExtensionResponse=function(event){if(trace("onSfsExtensionResponse"),trace(event.cmd),trace(event.params.getDump()),"respostainiciar"==event.cmd&&SFSConnector.gameInitCallback){var data=event.params,gameData={};gameData.credito=data.getDouble("creditos"),gameData.acumulado=data.getDouble("acumulado"),gameData.jackpot_min_bet=data.getInt("jackpot_min_bet"),gameData.cartela=data.getInt("cartela"),gameData.numerosCartelas=data.getByteArray("numeros"),gameData.pendente=data.getBool("pendente"),gameData.aposta=data.getInt("aposta"),gameData.btcreditar=data.getBool("btcreditar"),gameData.btextra=data.getBool("btextra"),gameData.btpainelpendente=data.getBool("btpainelpendente"),gameData.letras=data.getUtfString("letras"),gameData.bonusBalls=data.getUtfString("bonusBalls"),gameData.bonusRounds=data.getUtfString("bonusRounds"),gameData.luckmultis=data.getUtfString("luckmultis"),gameData.puzzleCurrent=data.getInt("puzzle_spin_amount"),gameData.puzzleTotal=data.getInt("puzzle_spin_target");var buffWheel=data.getIntArray("buffWheel");if(buffWheel){gameData.buffWheel=buffWheel,gameData.goKartRewards=data.getSFSArray("go_kart_rewards");var buffs=data.getSFSArray("buffs");gameData.buffs=[];for(var i=0;i<buffs.size();i++)gameData.buffs[i]={},gameData.buffs[i].buffValue=buffs.get(i).getInt("buffValue"),gameData.buffs[i].buff_pos=buffs.get(i).getInt("buff_pos"),gameData.buffs[i].buffID=buffs.get(i).getInt("buffID"),gameData.buffs[i].buffMaxValue=buffs.get(i).getInt("buff_max_value"),gameData.buffs[i].buffBet=buffs.get(i).getInt("buffBet");gameData.gokartSecondCurrencyRewards=data.getSFSArray("go_kart_hard_currency_rewards")}var bellIndexs=data.getIntArray("bell_indexs");if(bellIndexs){gameData.bellIndexs=bellIndexs;var lemonBuffs=data.getSFSArray("lemon_games_buffs");gameData.lemonBuffs=[];for(var i=0;i<lemonBuffs.size();i++)gameData.lemonBuffs[i]={},gameData.lemonBuffs[i].buffID=lemonBuffs.get(i).getInt("buffID"),gameData.lemonBuffs[i].buffBet=lemonBuffs.get(i).getInt("buffBet")}gameData.secondCurrency=data.getLong("hard_currency");var betConfig=data.getSFSArray("betConfig");betConfig&&(gameData.betConfig=this.getBetConfig(betConfig)),gameData.freeSpin=data.getInt("free_spin"),SFSConnector.gameInitCallback(gameData)}if("login"==event.cmd&&SFSConnector.gameInitCallback){var data=event.params,resposta=data.getUtfString("resposta"),gameData={};gameData.credito=parseInt(resposta.match(/\$.+(?=CA)/)[0].replace("$",""));var subResponse=resposta.substr(resposta.search("CT")),codCartela=parseInt(subResponse.substr(2,4));gameData.cartela=codCartela,gameData.acumulado=resposta.match(/AC.+(?=CT)/)[0].replace("AC",""),gameData.jackpot_min_bet=data.getInt("jackpot_min_bet"),gameData.puzzleCurrent=data.getInt("puzzle_spin_amount"),gameData.puzzleTotal=data.getInt("puzzle_spin_target");var save=resposta.match(/P\d*/g);save&&save.length&&(gameData.save=parseInt(save[save.length-1].replace("P",""))),gameData.secondCurrency=data.getLong("hard_currency");var betConfig=data.getSFSArray("betConfig");betConfig&&(gameData.betConfig=this.getBetConfig(betConfig)),gameData.freeSpin=data.getInt("free_spin"),SFSConnector.gameInitCallback(gameData);var params=eval("new SFS2X.SFSObject()");SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'respostalogin', params )"))}else if("respostasolicitanumeros"==event.cmd&&SFSConnector.changeNumberCallback){var data=event.params,gameData={};gameData.cartela=data.getInt("cartela"),gameData.numerosCartelas=data.getByteArray("numeros"),gameData.mark_column=data.getIntArray("mark_column_nums_buff"),gameData.mark_on_card=data.getIntArray("mark_num_per_card_buff"),gameData.rewardNumIndex=data.getInt("rewardNumIndex"),gameData.bellIndexs=data.getIntArray("bell_indexs"),SFSConnector.changeNumberCallback(gameData)}else if("jogada"==event.cmd&&SFSConnector.playCallback){var data=event.params,gameData={};gameData.credito=data.getDouble("creditos"),gameData.ganho=data.getDouble("ganho"),gameData.btextra=data.getBool("btextra"),gameData.bolas=data.getByteArray("bolas"),gameData.valorextra=data.getInt("valorextra"),gameData.ebPrice=data.getLong("ebPrice"),gameData.xp=data.getDouble("xp"),gameData.gratis=data.getByte("gratis"),gameData.eb_colors=data.getIntArray("eb_colors_buff"),gameData.free_eb=data.getIntArray("free_eb_buff"),gameData.free_eb||(gameData.free_eb=data.getIntArray("freeEbs")),gameData.cut_ball_position=data.getInt("random_select_ball_position_buff"),gameData.secondCurrency=data.getLong("hard_currency"),gameData.winSecondCurrency=data.getLong("total_win_hard_currency"),gameData.buffRewardSecondCurrency=data.getLong("buff_reward_hard_currency"),gameData.wonAllBells=data.getBool("won_all_bells"),gameData.wonAllBells&&(gameData.buffID=data.getInt("buffID"),gameData.bombIndexs=data.getIntArray("bomb_indexs")),gameData.bonusGame=data.getBool("bonusGame"),gameData.isMegaBall=data.getBool("isMegaBall"),gameData.ebPosition=data.getInt("ebPosition");var prizeBalls=data.getSFSArray("multi_prize_balls");if(prizeBalls){gameData.prizeBalls=[];for(var i=0;i<prizeBalls.size();i++)gameData.prizeBalls[i]={},gameData.prizeBalls[i].index=prizeBalls.get(i).getInt("ball_index"),gameData.prizeBalls[i].multi=prizeBalls.get(i).getInt("multi")}SFSConnector.playCallback(gameData,data)}else if("round"==event.cmd&&SFSConnector.playCallback){var data=event.params,gameData={},tempData=data.getUtfString("balls"),balls=[];try{for(var ballString=tempData.match(/R\d+(?=G)/)[0].replace("R",""),i=0;i<ballString.length;i+=2)balls.push(parseInt(ballString[i]+ballString[i+1]))}catch(e){trace("data error")}try{gameData.ganho=parseInt(tempData.match(/G\d+/)[0].replace("G","")),gameData.credito=parseInt(tempData.match(/\$.+(?=CA)/)[0].replace("$",""))}catch(e){trace("data error")}gameData.btextra=tempData.indexOf("E")>0,gameData.btextra&&(gameData.valorextra=parseInt(tempData.substr(tempData.indexOf("E")+1))),gameData.bolas=balls,gameData.xp=data.getDouble("xp"),gameData.secondCurrency=data.getLong("hard_currency"),SFSConnector.playCallback(gameData)}else if("jogadafinalizada"==event.cmd&&SFSConnector.roundOverCallback){var data=event.params,gameData={};gameData.ganho=data.getDouble("ganho"),gameData.credito=data.getDouble("creditos"),gameData.luckMulti=data.getInt("luckMulti"),gameData.letra=data.getByte("letra"),gameData.bonusRound=data.getByte("bonusRound"),gameData.missionValue=data.getLong("mission_value"),gameData.missionTarget=data.getLong("mission_target"),gameData.missionId=data.getLong("mission_id"),gameData.secondCurrency=data.getLong("hard_currency"),gameData.winSecondCurrency=data.getLong("total_win_hard_currency"),gameData.jackpot_min_bet=data.getInt("jackpot_min_bet"),gameData.puzzleCurrent=data.getInt("puzzle_spin_amount"),gameData.puzzleTotal=data.getInt("puzzle_spin_target"),gameData.freeSpin=data.getInt("free_spin"),SFSConnector.roundOverCallback(gameData)}else if("libera"==event.cmd&&SFSConnector.roundOverCallback){var data=event.params,gameData={},tempData=data.getUtfString("resposta");try{gameData.ganho="unexpress",gameData.credito=parseInt(tempData.match(/\$.+(?=CA)/)[0].replace("$",""))}catch(e){trace("data error")}gameData.missionValue=data.getLong("mission_value"),gameData.missionTarget=data.getLong("mission_target"),gameData.missionId=data.getLong("mission_id"),gameData.secondCurrency=data.getLong("hard_currency"),gameData.jackpot_min_bet=data.getInt("jackpot_min_bet"),gameData.puzzleCurrent=data.getInt("puzzle_spin_amount"),gameData.puzzleTotal=data.getInt("puzzle_spin_target"),gameData.freeSpin=data.getInt("free_spin"),SFSConnector.roundOverCallback(gameData)}else if("jogadafinalizada"==event.cmd&&SFSConnector.cancelExtraCallback){var data=event.params,gameData={};gameData.ganho=data.getDouble("ganho"),gameData.credito=data.getDouble("creditos"),gameData.extrasnaocompradas=data.getByteArray("extrasnaocompradas"),gameData.luckMulti=data.getInt("luckMulti"),gameData.letra=data.getByte("letra"),gameData.bonusRound=data.getByte("bonusRound"),gameData.missionValue=data.getLong("mission_value"),gameData.missionTarget=data.getLong("mission_target"),gameData.missionId=data.getLong("mission_id"),gameData.secondCurrency=data.getLong("hard_currency"),gameData.winSecondCurrency=data.getLong("total_win_hard_currency"),gameData.jackpot_min_bet=data.getInt("jackpot_min_bet"),gameData.puzzleCurrent=data.getInt("puzzle_spin_amount"),gameData.puzzleTotal=data.getInt("puzzle_spin_target"),gameData.freeSpin=data.getInt("free_spin"),SFSConnector.cancelExtraCallback(gameData)}else if("libera"==event.cmd&&SFSConnector.cancelExtraCallback){var data=event.params,gameData={},tempData=data.getUtfString("resposta");try{gameData.credito=parseInt(tempData.match(/\$.+(?=CA)/)[0].replace("$",""))}catch(e){trace("data error")}gameData.extrasnaocompradas=data.getByteArray("notBoughtEBIndex"),gameData.missionValue=data.getLong("mission_value"),gameData.missionTarget=data.getLong("mission_target"),gameData.missionId=data.getLong("mission_id"),gameData.secondCurrency=data.getLong("hard_currency"),gameData.jackpot_min_bet=data.getInt("jackpot_min_bet"),gameData.puzzleCurrent=data.getInt("puzzle_spin_amount"),gameData.puzzleTotal=data.getInt("puzzle_spin_target"),gameData.freeSpin=data.getInt("free_spin"),SFSConnector.cancelExtraCallback(gameData)}else if("jogada"==event.cmd&&SFSConnector.extraCallback){var data=event.params,gameData={};gameData.credito=data.getDouble("creditos"),gameData.ganho=data.getDouble("ganho"),gameData.btextra=data.getBool("btextra"),gameData.extra=data.getByte("extra"),gameData.valorextra=data.getInt("valorextra"),gameData.ebPrice=data.getLong("ebPrice"),gameData.xp=data.getDouble("xp"),gameData.bonusBall=data.getByte("bonusBall"),gameData.eb_colors=data.getIntArray("eb_colors_buff"),gameData.isMegaBall=data.getBool("isMegaBall"),gameData.secondCurrency=data.getLong("hard_currency"),gameData.winSecondCurrency=data.getLong("total_win_hard_currency"),gameData.buffRewardSecondCurrency=data.getLong("buff_reward_hard_currency"),gameData.bonusGame=data.getBool("bonusGame"),gameData.wonAllBells=data.getBool("won_all_bells"),gameData.wonAllBells&&(gameData.buffID=data.getInt("buffID"),gameData.bombIndexs=data.getIntArray("bomb_indexs")),gameData.ebPosition=data.getInt("ebPosition"),SFSConnector.extraCallback(gameData)}else if("extra"==event.cmd&&SFSConnector.extraCallback){var data=event.params,gameData={},tempData=data.getUtfString("ball");try{gameData.ganho=parseInt(tempData.match(/G\d+/)[0].replace("G","")),gameData.credito=parseInt(tempData.match(/\$.+(?=CA)/)[0].replace("$","")),gameData.extra=parseInt(tempData.match(/X\d+/)[0].replace("X",""));var save=tempData.match(/P\d+[EF]/g);save&&save.length&&(gameData.save=parseInt(save[0].replace("P","").replace("E","").replace("F","")))}catch(e){}gameData.btextra=tempData.indexOf("E")>0,gameData.btextra&&(gameData.valorextra=parseInt(tempData.substr(tempData.indexOf("E")+1))),gameData.xp=data.getDouble("xp"),gameData.secondCurrency=data.getLong("hard_currency"),gameData.isMegaBall=data.getBool("isMegaBall"),gameData.isMegaBall&&(gameData.valorextra=data.getLong("ebPrice")),SFSConnector.extraCallback(gameData)}else{if("atualizaacumulado"==event.cmd&&SFSConnector.jackpotCallbak){var data=event.params,gameData={};return gameData.acumulado=data.getDouble("acumulado"),void SFSConnector.jackpotCallbak(gameData)}if("jackpotWin"==event.cmd&&SFSConnector.jackpotWinCallbak){var data=event.params,gameData={};return gameData.id=data.getUtfString("user_id"),gameData.jackpot=data.getLong("jackpotWin"),void SFSConnector.jackpotWinCallbak(gameData)}if("bonusGame"==event.cmd&&SFSConnector.bonusGameSpinCallback){var data=event.params,gameData={};return gameData.over=data.getBool("over"),gameData.prize=data.getDouble("prize"),gameData.prizeIconIdx=data.getUtfStringArray("prizeIconIdx"),gameData.iconIdx=data.getUtfStringArray("iconIdx"),void SFSConnector.bonusGameSpinCallback(gameData)}if("buffHandler"==event.cmd&&SFSConnector.buffHandlerCallback){var data=event.params,gameData={};return gameData.buffValue=data.getInt("buffValue"),gameData.buff_dices=data.getIntArray("buff_dices"),gameData.add_buff_state=data.getBool("add_buff_state"),gameData.buff_pos=data.getInt("buff_pos"),gameData.buffMaxValue=data.getInt("buff_max_value"),gameData.mark_column=data.getIntArray("mark_column_nums_buff"),gameData.mark_on_card=data.getIntArray("mark_num_per_card_buff"),gameData.rewardNumIndex=data.getInt("rewardNumIndex"),gameData.roll_again_price=data.getInt("roll_again_price"),gameData.double_buff_rounds_price=data.getInt("double_buff_rounds_price"),gameData.secondCurrency=data.getLong("hard_currency"),gameData.xp=data.getDouble("xp"),void SFSConnector.buffHandlerCallback(gameData)}if("select_num_handler"==event.cmd&&SFSConnector.selectNumberCallback){var data=event.params,gameData={};return gameData.credito=data.getDouble("creditos"),gameData.ganho=data.getDouble("ganho"),gameData.btextra=data.getBool("tembolaextra"),gameData.bolas=data.getByteArray("bolas"),gameData.valorextra=data.getInt("valorextra"),gameData.ebPrice=data.getLong("ebPrice"),gameData.xp=data.getDouble("xp"),void SFSConnector.selectNumberCallback(gameData)}if("goKartHandler"===event.cmd&&SFSConnector.goKartHandlerCallback){var data=event.params,gameData={};gameData.isGetTurbo=data.getBool("isGetTurbo"),gameData.select_gokart_state=data.getBool("select_gokart_state"),gameData.buffReward=data.getLong("buffReward"),gameData.buff_pos=data.getInt("buff_pos"),gameData.buffValue=data.getInt("buffValue"),gameData.secondCurrency=data.getLong("hard_currency"),gameData.buffRewardSecondCurrency=data.getLong("buff_reward_hard_currency"),SFSConnector.goKartHandlerCallback(gameData)}else if("lemon_game_handler"===event.cmd&&SFSConnector.lemonGameCallback){var data=event.params,gameData={};gameData.lemonCard=data.get("lemon_games_card"),gameData.lemonCard&&(gameData.lemonCard={type:gameData.lemonCard.getInt("type"),value:gameData.lemonCard.getInt("value")}),gameData.lemonBuffsReward=data.getLong("lemon_games_buffs_reward"),gameData.lemonPizzaMaterials=data.getIntArray("lemon_games_pizza_materials");var lemonBoxs=data.getSFSArray("lemon_games_boxes");if(lemonBoxs){gameData.lemonBoxs=[];for(var i=0;i<lemonBoxs.size();i++)gameData.lemonBoxs[i]={},gameData.lemonBoxs[i].type=lemonBoxs.get(i).getInt("type"),gameData.lemonBoxs[i].value=lemonBoxs.get(i).getInt("value")}SFSConnector.lemonGameCallback(gameData)}else if("erro"===event.cmd){var info=event.params.get("mensagem");if(console.log("----   SFSConnector -> onSfsExtensionResponse[erro]:"),console.log(info),"Saldo insuficiente"==info&&(SFSConnector.playCallback||SFSConnector.extraCallback)){var callbackFun=SFSConnector.playCallback;callbackFun||(callbackFun=SFSConnector.extraCallback),callbackFun(null)}}else 0==event.cmd.indexOf("trm.")&&SFSConnector.tounamentCallback&&SFSConnector.tounamentCallback(event.cmd,event.params)}},SFSConnector.send=function(cmd,params){eval("SFS2X")?SFSConnector.connection?SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest(cmd, params)")):console.error("SFS Server connection failed!"):console.log("Object SFS2X is not defined!")},SFSConnector.prototype.getBetConfig=function(t){for(var e=[],a=0;a<t.size();a++)e[a]={},e[a].bet=t.get(a).getInt("bet"),e[a].jackpotRate=t.get(a).getDouble("jackpotRate");return e},SFSConnector.loginTo=function(zona,room,joinRoomCallback){void 0===room&&(room=null),this.gettingRoom=room,this._sfs.send(eval("new SFS2X.LoginRequest('"+PlayerConfig.player("user.id")+"', '', null, '"+zona+"')")),this.joinRoomCallback=joinRoomCallback},SFSConnector.sendMessage=function(key,value){var params=eval("new SFS2X.SFSObject()");for(var ob in value)"version"==ob?params.putInt(ob,value[ob]):params.putUtfString(ob,value[ob]);trace("send:ExtensionRequest,"+key),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( key, params )"))},SFSConnector.sendPlay=function(key,bet,cards,cardGroupNumber,betIndex){var params=eval("new SFS2X.SFSObject()");params.putInt("aposta",bet),params.putByte("qtd",cards),params.putInt("cartela",cardGroupNumber),params.putInt("bet_index",betIndex),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( key, params )"))},SFSConnector.sendPlayWithCardId=function(key,bet,cards,cardGroupNumber,betIndex,cardId){var params=eval("new SFS2X.SFSObject()");params.putInt("aposta",bet),params.putByte("qtd",cards),params.putInt("cartela",cardGroupNumber),params.putInt("bet_index",betIndex),params.putInt("cardID",cardId),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( key, params )"))},SFSConnector.sendPlayWithNumbers=function(key,bet,cards,cardGroupNumber,betIndex,cardNumbers){var params=eval("new SFS2X.SFSObject()");params.putInt("aposta",bet),params.putByte("qtd",cards),params.putInt("cartela",cardGroupNumber),params.putInt("bet_index",betIndex),params.putByteArray("selected_card_nums",cardNumbers),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( key, params )"))},SFSConnector.sedRound=function(key,bet,cards,cardGroupNumber,betIndex){var params=eval("new SFS2X.SFSObject()");params.putInt("aposta",bet),params.putByte("qtdCartelasAbertas",cards),params.putInt("numCartela",cardGroupNumber),params.putInt("bet_index",betIndex),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( key, params )"))},SFSConnector.roundOver=function(){var params=eval("new SFS2X.SFSObject()");params.putBool("stauto",!1),params.putBool("finalizar",!0),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'executado', params )"))},SFSConnector.libera=function(){var params=eval("new SFS2X.SFSObject()");trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'finaliza', params )"))},SFSConnector.cancelExtra=function(extraString){var params=eval("new SFS2X.SFSObject()");trace(params.getDump()),extraString?SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'finaliza', params )")):SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'creditar', params )"))},SFSConnector.extra=function(extraString,saving){var params=eval("new SFS2X.SFSObject()");trace(params.getDump()),extraString?saving?SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'poupanca', params )")):SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'extra', params )")):SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'solicitajogada', params )"))},SFSConnector.bonusGameSpin=function(bet){var params=eval("new SFS2X.SFSObject()");params.putInt("bet",bet),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'bonusGame', params )"))},SFSConnector.buffHandler=function(action,bet){var params=eval("new SFS2X.SFSObject()");params.putUtfString("action",action),params.putInt("currentBet",bet),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'buffHandler', params )"))},SFSConnector.selectNumber=function(num){var params=eval("new SFS2X.SFSObject()");params.putInt("selectedBallNum",num),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'select_num_handler', params )"))},SFSConnector.goKartHandler=function(action,rewardType){var params=eval("new SFS2X.SFSObject()");params.putUtfString("action",action),-1!==rewardType&&params.putInt("rewardType",rewardType),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest('goKartHandler', params)"))},SFSConnector.lemonGame=function(action,bet,type,boxIndex){var params=eval("new SFS2X.SFSObject()");params.putUtfString("action",action),params.putInt("currentBet",bet),params.putInt("clubs_type",type),params.putInt("box_index",boxIndex),trace(params.getDump()),SFSConnector._sfs.send(eval("new SFS2X.ExtensionRequest( 'lemon_game_handler', params )"))},SFSConnector}();__reflect(SFSConnector.prototype,"SFSConnector");var GameCard=function(_super){function GameCard(t){var e=_super.call(this)||this;return e.cardId=t,e.cacheAsBitmap=!0,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdd,e),e}return __extends(GameCard,_super),Object.defineProperty(GameCard.prototype,"bet",{set:function(t){this.betText&&this.betText.setText(MuLang.getText("bet")+": "+Utils.formatCoinsNumber(t))},enumerable:!0,configurable:!0}),GameCard.prototype.onAdd=function(t){this.bg||(this.bg=Com.addBitmapAt(this,BingoMachine.getAssetStr(GameCardUISettings.bgString),0,0)),this.fitEffectLayer=new egret.DisplayObjectContainer,this.addChild(this.fitEffectLayer),this.getBgColor(),GameCardUISettings.cardTextRect&&(this.cardText=this.buildCardTitleText(GameCardUISettings.cardTextRect,GameCardUISettings.cardTextRect.height),this.cardText.setText(MuLang.getText("card")+": "+(this.cardId+1))),GameCardUISettings.betTextRect&&(this.betText=this.buildCardTitleText(GameCardUISettings.betTextRect,GameCardUISettings.betTextRect.height),this.betText.setText(MuLang.getText("bet")+": ")),GameCard.clickChangeNumber&&(this.touchChildren=!1,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cardNumber,this))},GameCard.prototype.buildCardTitleText=function(t,e){var a=Com.addLabelAt(this,t.x,t.y,t.width,t.height,e,!1,!0);return a.textColor=GameCardUISettings.texColor,a.textAlign="left",a.scaleX=.9,GameCardUISettings.showTitleShadow&&(a.filters=[GameCardUISettings.showTitleShadow]),a},GameCard.prototype.cardNumber=function(t){GameCard.changeingCard||BingoMachine.inRound||BingoMachine.sendCommand(GameCommands.changeNumber)},GameCard.getCardData=function(t){GameCardUISettings.dataSetting(t),CardGridUISettings.getSettingStrings(t);var e=t.colors;CardGridColorAndSizeSettings.colorSetting(e),GameCardUISettings.colorSetting(e);var a=t.size;CardGridColorAndSizeSettings.sizeSetting(a),GameCardUISettings.sizeSetting(a)},GameCard.prototype.getBgColor=function(){GameCardUISettings.titleColors&&GraphicTool.drawRect(this,new egret.Rectangle(0,0,this.bg.width,this.bg.height),GameCardUISettings.cardTitleColor,!0,1)},GameCard.prototype.getNumbers=function(t){this.numbers=t;var e;if(!this.grids)for(this.grids=[],e=0;e<t.length;e++)this.grids[e]=this.createGrid(e);for(e=0;e<this.grids.length;e++)this.grids[e].gridNumber=t[e]},GameCard.prototype.createGrid=function(gridIndex){var grid=eval("new CardManager.gridType()");return grid.x=GameCardUISettings.gridInitPosition.x+gridIndex%GameCardUISettings.gridNumbers.x*CardGridColorAndSizeSettings.gridSpace.x,grid.y=GameCardUISettings.gridInitPosition.y+Math.floor(gridIndex/GameCardUISettings.gridNumbers.x)*CardGridColorAndSizeSettings.gridSpace.y,GameCardUISettings.gridOnTop?this.addChild(grid):this.addChildAt(grid,0),grid},GameCard.prototype.checkNumber=function(t){var e=this.numbers.indexOf(t);return e>=0&&this.grids[e].showEffect(!0),e},GameCard.prototype.clearStatus=function(){this.clearFitEffect();for(var t=0;t<this.grids.length;t++)this.grids[t].showEffect(!1);
this.redEffectArray&&(this.redEffectArray=null)},GameCard.prototype.getCheckString=function(){for(var t="",e=0;e<this.grids.length;e++)t+=this.grids[e].isChecked?"1":"0";return t},GameCard.prototype.blinkAt=function(t){if(this.grids[t].isChecked)throw new Error("not posible blink grid");this.grids[t].blink=!0},GameCard.prototype.stopBlink=function(){for(var t=0;t<this.grids.length;t++)this.grids[t].blink&&(this.grids[t].blink=!1)},GameCard.prototype.blink=function(t){if(this.grids&&this.grids.length)for(var e=Boolean(t),a=0;a<this.grids.length;a++)this.grids[a].blink&&this.grids[a].showBlink(e)},GameCard.prototype.getNumberAt=function(t){return this.grids[t].gridNumber},GameCard.prototype.clearFitEffect=function(){if(this.fitEffectLayer&&(this.fitEffectLayer.removeChildren(),this.addChild(this.fitEffectLayer)),GameCardUISettings.useRedEffect&&this.redEffectArray){for(var t=0;t<this.redEffectArray.length;t++)this.redEffectArray[t]&&this.grids[t].showEffect(!0);this.redEffectArray=null}},GameCard.prototype.setGridsToRed=function(t){this.redEffectArray||(this.redEffectArray=[]);for(var e=0;e<t.length;e++)"1"==t[e]&&(this.grids[e].showRedEffect(),this.redEffectArray[e]=!0)},GameCard.prototype.showfitEffect=function(t,e){if(GameCardUISettings.useRedEffect)if(e.length)for(var a=0;a<e.length;a++)e[a]&&this.setGridsToRed(PayTableManager.payTablesDictionary[t].rules[a]);else this.setGridsToRed(PayTableManager.payTablesDictionary[t].rule);if(GameCard.fitEffectNameList)try{var n=void 0;if(e.length)for(var a=0;a<e.length;a++)e[a]&&(n=Com.addBitmapAt(this.fitEffectLayer,BingoMachine.getAssetStr(GameCard.fitEffectNameList[t][a]),0,0));else n=Com.addBitmapAt(this.fitEffectLayer,BingoMachine.getAssetStr(GameCard.fitEffectNameList[t]),0,0)}catch(i){trace("showfitEffect ignore:"+t)}},GameCard.clickChangeNumber=!0,GameCard}(GameUIItem);__reflect(GameCard.prototype,"GameCard");var TounamentLayer=function(t){function e(e){var a=t.call(this)||this;return a.buildInnerBar(),a.buildOutBar(),a.updateDuration(e.duration,e.totalDuration),a.updatePrize(e.prize),a.addEventListener(egret.Event.ADDED_TO_STAGE,a.onAdd,a),a.updateUserList(e.userList,e.winners),a}return __extends(e,t),Object.defineProperty(e.prototype,"potCount",{get:function(){return this._potCount},set:function(t){this._potCount=Math.floor(t),this.potTx.setText("$"+this._potCount)},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdd,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.timer.start()},e.prototype.onRemove=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.timer.stop(),this.timer=null},e.prototype.updata=function(t){this.updateDuration(t.duration,t.totalDuration),this.updatePrize(t.prize),this.updateUserList(t.userList,t.winners)},e.prototype.buildInnerBar=function(){this.innerBar=new egret.DisplayObjectContainer,Com.addObjectAt(this,this.innerBar,0,0);var t=Com.addBitmapAt(this.innerBar,"tounament_json.ranking_bg",0,0);t.width=235,t.height=385,Com.addBitmapAtMiddle(this.innerBar,"tounament_json.ranking_"+MuLang.language,117,36);var e=Com.addTextAt(this.innerBar,10,80,215,30,30);e.text=MuLang.getText("play_enter");var a=Com.addBitmapAt(this.innerBar,"tounament_json.bar_bg",10,117);a.scale9Grid=new egret.Rectangle(10,10,182,24),a.width=212;var n=Com.addBitmapAt(this.innerBar,"tounament_json.bar_bg",10,175);n.scale9Grid=new egret.Rectangle(10,10,182,24),n.width=212,n.height=100;var i=Com.addTextAt(this.innerBar,10,185,215,28,28);i.text=MuLang.getText("prize_pot"),this.pressBar=Com.addBitmapAt(this.innerBar,"tounament_json.progress_bar",12,121),this.pressBar.scale9Grid=new egret.Rectangle(4,4,186,28),Com.addBitmapAt(this.innerBar,"tounament_json.deviding_line",15,287),this.champoin=new TounamentChampoin,Com.addObjectAt(this.innerBar,this.champoin,0,308),this.innerBar.cacheAsBitmap=!0,this.potTx=Com.addLabelAt(this,12,225,208,48,48,!1,!0),this.potCount=0,this.timeTx=Com.addTextAt(this,10,125,212,36,36,!0),this.timeTx.stroke=2,this.timeTx.bold=!0,this.timeTx.verticalAlign="middle"},e.prototype.buildOutBar=function(){this.outBar=new egret.DisplayObjectContainer,Com.addObjectAt(this,this.outBar,0,297);var t=Com.addBitmapAt(this.outBar,"tounament_json.mechanism_pending_bg",0,0);t.width=235,t.height=530;var e=Com.addBitmapAtMiddle(this.outBar,"tounament_json.avatar",117,264),a=PlayerConfig.player("facebook_id");a&&FacebookBitmap.downloadBitmapDataByFacebookID(a,100,100,MDS.onUserHeadLoaded.bind(this,e,166),this);var n=Com.addTextAt(this.outBar,5,0,215,150,28,!0,!0);n.textColor=16776960,n.stroke=2,n.strokeColor=0,n.verticalAlign="middle",n.text=MuLang.getText("play_to_enter");var i=Com.addTextAt(this.outBar,0,405,235,30,28,!1,!0);i.text=MuLang.getText("win_to_enter"),this.outBar.cacheAsBitmap=!0},e.prototype.updateDuration=function(t,e){this.duration=t,this.totalDuration=e,this.pressBar.width=t/this.totalDuration*208,this.updataDurationUI(t),this.timer&&(this.timer.reset(),this.timer.start())},e.prototype.onTimer=function(t){this.updataDurationUI(this.duration-t.target.currentCount)},e.prototype.updataDurationUI=function(t){this.timeTx.text=Utils.secondToHour(t)},e.prototype.updatePrize=function(t){TweenerTool.tweenTo(this,{potCount:t},500)},e.prototype.updateUserList=function(t,e){this.userIndexOf(t,PlayerConfig.player("user.id"))<0||(TweenerTool.tweenTo(this.outBar,{x:-235},500),this.showingWinners=!this.showingWinners,this.hideUserUI(),this.showUserUI(t,e))},e.prototype.hideUserUI=function(){if(this.usersUI)for(var t=0;t<this.usersUI.length;t++)TweenerTool.tweenTo(this.usersUI[t],{scaleY:0},500,500*t,MDS.removeSelf.bind(this,this.usersUI[t]))},e.prototype.showUserUI=function(t,e){if(this.champoin.clearUI(),this.showingWinners)e.length>3&&(e.length=3),this.showingWinnersUI(e);else{var a=this.getUserListOrder(t);this.showingWinnersUI(a),1!=a[0].rank&&this.champoin.show(e[0])}},e.prototype.showingWinnersUI=function(t){this.usersUI=[];for(var e=0;e<Math.min(t.length,3);e++)this.usersUI[e]=new TounamentUserItem(t[e],t[e].rank,t[e].uid==PlayerConfig.player("user.id")),this.usersUI[e].scaleY=0,this.usersUI[e].x=0,this.addChild(this.usersUI[e]),this.usersUI[e].y=460+142*e,TweenerTool.tweenTo(this.usersUI[e],{scaleY:1},500,500*e+500)},e.prototype.getUserListOrder=function(t){for(var e,a=0/0,n=0;n<t.length;n++)t[n].uid==PlayerConfig.player("user.id")&&(a=n);var i=[];return i.push(t[a]),e=0,a>0&&(i.unshift(t[a-1]),e+=1),t.length>a+1&&i.push(t[a+1]),i.length<3&&a>1&&(i.unshift(t[a-2]),e+=1),i.length<3&&t.length>a+2&&i.push(t[a+2]),i},e.prototype.userIndexOf=function(t,e){if(t&&t.length)for(var a=0;a<t.length;a++)if(t[a].uid==e)return a;return-1},e}(egret.DisplayObjectContainer);__reflect(TounamentLayer.prototype,"TounamentLayer");var BingoMachine=function(_super){function BingoMachine(t,e,a){var n=_super.call(this)||this;return n.languageObjectName="forAll_tx",n.connectReady=!1,n.assetReady=!1,n.betListReady=!1,n.lockWinTip=!1,n.connetKeys={zona:"Zona"+a,sala:"Sala"+a},n.tokenObject={},n.tokenObject.value={tipo:"jogar",version:PlayerConfig.serverVertion},BingoMachine.currentGameId=a,localStorage.getItem("gotoGame"+a)?localStorage.removeItem("gotoGame"+a):document.location.href="../lobby",n.gameConfigFile=t,n.ballArea=new BallManager,n.assetName=egret.getDefinitionByName(egret.getQualifiedClassName(n)).classAssetName,BingoMachine.currentGame=n,n.soundManager=new GameSoundManager,RES.getResByUrl(e,n.analyse,n),n.loginToServer(),n}return __extends(BingoMachine,_super),Object.defineProperty(BingoMachine.prototype,"gameCoins",{get:function(){return this._gameCoins},set:function(t){this._gameCoins=t,this.creditText&&this.creditText.setText(Utils.formatCoinsNumber(t))},enumerable:!0,configurable:!0}),BingoMachine.prototype.assetStr=function(t){return this.assetName+"_json."+t},BingoMachine.getAssetStr=function(t){return this.currentGame.assetStr(t)},BingoMachine.prototype.onConfigLoadComplete=function(){var t=RES.getRes(this.gameConfigFile.replace(".","_"));BingoBackGroundSetting.getBackgroundData(t.backgroundColor,t.backgroundItems),this.ballArea.getBallSettings(t.balls,t.ballSize,t.ballTextSize),this.extraUIName=t.extraUIName,PayTableManager.getPayTableData(t.payTables),CardManager.getCardData(t.card),CardManager.startBlinkTimer(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),GameCard.fitEffectNameList=t.payTablesFitEffect,PaytableFilter.filterObject=t.payTablesFilter,PaytableFilter.soundObject=t.payTablesSound,MuLang.txt=this.getLanguageObject()},BingoMachine.prototype.getLanguageObject=function(){var t=RES.getRes("forAll_tx");if("forAll_tx"!=this.languageObjectName){var e=RES.getRes(this.languageObjectName);for(var a in e)t[a]=e[a]}return t},BingoMachine.prototype.getSoundName=function(t){if(PaytableFilter.soundObject){var e=PaytableFilter.soundObject[t];if(e)return e.replace(".","_")}return""},BingoMachine.prototype.onRemove=function(t){CardManager.stopBlinkTimer(),IBingoServer.jackpotCallbak=null,IBingoServer.jackpotWinCallbak=null,this.ballArea.onRemove(),this.removedFromStage()},BingoMachine.prototype.analyse=function(t){this.loadAsset(this.assetName)},BingoMachine.prototype.loadAsset=function(t){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.loaded,this);try{var e=RES.config.config.groups;e[t]=e[t].concat(e.allGameAssets)}catch(a){egret.error(a)}RES.loadGroup(t,0,this.preLoader)},BingoMachine.prototype.loaded=function(t){t.groupName==this.assetName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.loaded,this),this.assetReady=!0,this.testReady())},BingoMachine.prototype.init=function(){this.dispatchEvent(new egret.Event(BingoMachine.GENERIC_MODAL_LOADED)),this.preLoader=null,this.scaleX=BingoBackGroundSetting.gameSize.x/BingoBackGroundSetting.gameMask.width,this.scaleY=BingoBackGroundSetting.gameSize.y/BingoBackGroundSetting.gameMask.height,this.mask=BingoBackGroundSetting.gameMask,MDS.mcFactory=BingoBackGroundSetting.initBackground(this),this.addChild(this.ballArea),this.addPayTables(),this.sendInitDataRequest(),this.cardArea=new egret.DisplayObjectContainer,this.addChild(this.cardArea),CardGridUISettings.initGridAssets(),this.extraUIName&&(this.extraUIObject=this.getChildByName(this.assetStr(this.extraUIName)),this.extraUIObject&&(this.extraUIObject.visible=!1)),this.addEventListener("bingo",this.winBingo,this),this.addEventListener("betChanged",this.onBetChanged,this),this.tellTounamentCurrentBet()},BingoMachine.prototype.addPayTables=function(){this.payTableArea=eval("new PayTableManager.layerType()"),this.addChild(this.payTableArea),this.payTableArea.addPaytableUI()},BingoMachine.prototype.loginToServer=function(){IBingoServer.connected?(IBingoServer.loginTo(this.connetKeys.zona,this.connetKeys.sala,this.onJoinRoomCallback.bind(this)),GameData.getBetList(this.betListCallback.bind(this),this.connetKeys.zona.replace(/\D/g,""))):setTimeout(this.loginToServer.bind(this),200)},BingoMachine.prototype.onJoinRoomCallback=function(){this.connectReady=!0,this.testReady()},BingoMachine.prototype.betListCallback=function(t){this.betListReady=!0,this.testReady()},BingoMachine.prototype.testReady=function(){this.connectReady&&this.assetReady&&this.betListReady&&(this.onConfigLoadComplete(),this.init())},BingoMachine.prototype.sendInitDataRequest=function(){IBingoServer.gameInitCallback=this.onServerData.bind(this),IBingoServer.sendMessage(this.tokenObject.key,this.tokenObject.value)},BingoMachine.prototype.onServerData=function(t){IBingoServer.gameInitCallback=null,this.setCardDatasWithNumeros(t.numerosCartelas,t.cartela),this.showJackpot(t.acumulado,t.jackpot_min_bet,t.betConfig),IBingoServer.jackpotCallbak=this.jackpotArea.setJackpotNumber.bind(this.jackpotArea),IBingoServer.jackpotWinCallbak=this.jackpotArea.jackpotWinCallback.bind(this.jackpotArea),this.initToolbar(),this.initBetbar(t.jackpot_min_bet),this.updateCredit(t),this.resetGameToolBarStatus(),this.dispatchEvent(new egret.Event("connected_to_server")),this.setLetras(t.letras),this.needListenToolbarStatus&&this.listenToGameToolbarStatus(),this.freeSpin=t.freeSpin,this.freeSpin>0&&BingoMachine.sendCommand(GameCommands.minBet),this.loadOtherGroup()},BingoMachine.prototype.loadOtherGroup=function(){if(RES.loadGroup("generic"),RES.loadGroup("gameSettings"),this.megaName&&!localStorage.getItem(this.megaName))try{RES.loadGroup("megaForFirst_"+MuLang.language)}catch(t){}},BingoMachine.prototype.initToolbar=function(){this.gameToolBar=new BingoGameToolbar,Com.addObjectAt(this,this.gameToolBar,0,BingoGameToolbar.toolBarY),this.gameToolBar.showTip(""),this.gameToolBar.addEventListener(XpBar.LEVEL_UP_BONUS,this.onLevelUpBonus,this),this.topbar=new Topbar,this.addChild(this.topbar),this.topbar.scaleX=this.gameToolBar.scaleX=BingoBackGroundSetting.gameMask.width/2e3,this.topbar.scaleY=this.gameToolBar.scaleY=BingoBackGroundSetting.gameMask.height/1125},BingoMachine.prototype.initBetbar=function(t){this.betBar=new Betbar(t),Com.addObjectAt(this,this.betBar,0,BingoGameToolbar.toolBarY-5),this.betBar.setBet(GameData.currentBet)},BingoMachine.prototype.listenToGameToolbarStatus=function(){if(this.gameToolBar.addEventListener("winChange",this.winChange,this),this.gameToolBar.addEventListener("tipStatus",this.tipStatus,this),this.tipStatusTextPosition){var t=this.tipStatusTextPosition;this.tipStatusText=MDS.addGameText(this,t.x,t.y,t.height,this.tipStatusTextColor,"bet",!1,t.width),this.tipStatusText.textAlign="center",this.tipStatusText.text=MuLang.getText("press play")}},BingoMachine.prototype.tipStatus=function(t,e){var a=this;switch(void 0===e&&(e=!1),t.status){case GameCommands.play:this.tipStatusText.text=MuLang.getText("good luck");break;case GameCommands.extra:var n=MuLang.getText("extra ball");n+=e?"\r\n":": ",n+=t.extraPrice?Utils.formatCoinsNumber(t.extraPrice):MuLang.getText("free"),this.tipStatusText.setText(n),this.lockWinTip=!0,setTimeout(function(){a.lockWinTip=!1},10);break;default:this.tipStatusText.text=MuLang.getText("press play")}},BingoMachine.prototype.winChange=function(t,e){void 0===e&&(e=!1),t.winCoins&&!this.lockWinTip&&(this.tipStatusText.text=MuLang.getText("win")+(e?"\r\n":": ")+t.winCoins)},BingoMachine.prototype.setCardDatasWithNumeros=function(t,e){for(var a=CardManager.cards,n=t.length/a.length,i=0;i<a.length;i++)a[i].x=GameCardUISettings.cardPositions[i].x,a[i].y=GameCardUISettings.cardPositions[i].y,this.cardArea.addChild(a[i]),a[i].getNumbers(t.slice(i*n,(i+1)*n));this.changeCardsBg(),CardManager.groupNumber=e},BingoMachine.prototype.resetGameToolBarStatus=function(){this.gameToolBar.setBet(GameData.currentBet,CardManager.enabledCards,GameData.currentBet==GameData.maxBet),this.betText.setText(Utils.formatCoinsNumber(CardManager.setCardBet(GameData.currentBet)))},BingoMachine.runningBall=function(t){this.currentGame.showLastBall(t)},BingoMachine.betweenBallRunning=function(){return this.currentGame.lightCheck()},BingoMachine.runningAnimation=function(t,e,a){this.currentGame.runningWinAnimation(t,e,a)},BingoMachine.endBallRunning=function(){this.currentGame.ballRunforStop=!1;var t=this.currentGame.getResultListToCheck();t||(this.currentGame.btExtra?(this.currentGame.hasExtraBallFit(),this.currentGame.gameToolBar.unlockAllButtons(),this.currentGame.gameToolBar.showExtra(!0,this.currentGame.valorextra),this.currentGame.gameToolBar.showWinResult(this.currentGame.ganho),(this.currentGame.gameToolBar.autoPlaying||this.currentGame.gameToolBar.buyAllExtra)&&setTimeout(this.sendCommand.bind(this),500,GameCommands.extra),this.currentGame.showExtraUI()):(this.currentGame.sendRoundOverRequest(),this.currentGame.gameToolBar.showExtra(!1),this.currentGame.gameToolBar.lockAllButtons()))},BingoMachine.prototype.sendRoundOverRequest=function(){IBingoServer.roundOverCallback=this.onRoundOver.bind(this),IBingoServer.roundOver()},BingoMachine.prototype.lightCheck=function(){for(var t=CardManager.getCheckingStrings(),e=PayTableManager.payTablesDictionary,a=[],n=!1,i=0;i<t.length;i++){a[i]={};for(var o in e){var r=e[o].lightCheck(t[i]);r.length>0&&(n=!0,a[i][o]=r)}}return n?a:[]},BingoMachine.prototype.getResultListToCheck=function(t){void 0===t&&(t=!1),this.inLightCheck=t;for(var e=CardManager.getCheckingStrings(),a=PayTableManager.payTablesDictionary,n=[],i=0;i<e.length;i++){n[i]={};for(var o in a){var r=a[o].check(e[i]);n[i][o]=r}}return this.paytableResultFilter(n),this.afterCheck(n),!1},BingoMachine.prototype.paytableResultFilter=function(t){},BingoMachine.prototype.showExtraUI=function(t){void 0===t&&(t=!0),this.extraUIObject&&(this.extraUIObject.visible=t)},BingoMachine.prototype.clearRunningBallUI=function(){this.runningBallUI&&this.runningBallContainer.contains(this.runningBallUI)&&this.runningBallContainer.removeChild(this.runningBallUI)},BingoMachine.prototype.setLetras=function(t){},BingoMachine.prototype.playSound=function(t,e,a){void 0===e&&(e=1),void 0===a&&(a=null),this.soundManager.play(t,e,a)},BingoMachine.prototype.stopSound=function(t){this.soundManager.stop(t)},BingoMachine.prototype.stopAllSound=function(){this.soundManager.stopAll()},BingoMachine.prototype.removedFromStage=function(){this.soundManager.stopAll()},BingoMachine.prototype.tileBg=function(){var t=this.getChildAt(0);return t?(t.fillMode=egret.BitmapFillMode.REPEAT,t.width=BingoBackGroundSetting.gameMask.width,t.height=BingoBackGroundSetting.gameMask.height,!0):!1},BingoMachine.sendCommand=function(t){if(trace("ToolBarCommand:"+t),t==GameCommands.help)this.currentGame.dispatchEvent(new egret.Event("showHelp"));else if(t==GameCommands.changeNumber){if(this.currentGame.changeNumberSound(),CardManager.clearCardsStatus(),this.currentGame instanceof V1Game)return void this.currentGame.setCardDatasWithNumeros(this.currentGame.getCardsGroup(CardManager.groupNumber),CardManager.groupNumber<100?CardManager.groupNumber+1:1);this.currentGame.gameToolBar.lockAllButtons(),IBingoServer.changeNumberCallback=this.currentGame.onChangeNumber.bind(this.currentGame),GameCard.changeingCard=!0,IBingoServer.changeNumber()}else if(t==GameCommands.play){if(Number(this.currentGame.gameCoins)<GameData.currentBet*CardManager.enabledCards)return this.currentGame.gameToolBar.autoPlaying&&(this.currentGame.gameToolBar.autoPlaying=!1,this.currentGame.gameToolBar.unlockAllButtonsAfterOOC(),this.currentGame.resetGameToolBarStatus()),void this.currentGame.dispatchEvent(new egret.Event("out_of_coins_game_id"));this.currentGame.startPlay(),this.currentGame.gameToolBar.lockAllButtons(),this.currentGame.sendPlayRequest(),CardManager.clearCardsStatus(),PayTableManager.clearPaytablesStatus(),this.currentGame.gameToolBar.showTip(t),this.currentGame.ballArea.clearBalls(),this.currentGame.showExtraUI(!1),this.currentGame.dispatchEvent(new egret.Event("onGamePlay"))}else if(t==GameCommands.stop)this.currentGame.ballRunforStop=!0,this.currentGame.gameToolBar.enabledStopButton(),this.currentGame.ballArea.stopBallRunning();else if(t==GameCommands.collect)this.currentGame.collectExtraBall(),this.currentGame.sendCancelExtraReuqest(),this.currentGame.gameToolBar.lockAllButtons(),this.currentGame.gameToolBar.showTip(""),this.currentGame.clearRunningBallUI();else if(t==GameCommands.extra){var e=this.currentGame.checkOOCWhenExtra();if(e)return;this.currentGame.gameToolBar.lockAllButtons(),this.currentGame.sendExtraRequest(),this.currentGame.getExtraBallFit()}else if(t==GameCommands.saving)this.currentGame.gameToolBar.lockAllButtons(),this.currentGame.sendExtraRequest(!0),this.currentGame.getExtraBallFit();else if(t==GameCommands.showMini)this.currentGame.showMiniGame();else if(t==GameCommands.startAuto)this.currentGame.gameToolBar.autoPlaying=!0;else if(t==GameCommands.stopAuto)this.currentGame.gameToolBar.autoPlaying=!1,clearTimeout(this.currentGame.autoPlayTimeoutId);else if(t==GameCommands.buyAll)this.currentGame.gameToolBar.buyAllExtra=!0;else{if(t==GameCommands.decreseBet)GameData.betDown(),this.currentGame.betChanged(-1);else if(t==GameCommands.increaseBet)GameData.betUp(),this.currentGame.betChanged(1);else if(t==GameCommands.maxBet)GameData.setBetToMax(),this.currentGame.betChanged(0);else{if(t!=GameCommands.minBet)throw new Error("hehe");GameData.setBetToMin(),this.currentGame.betChanged(0)}this.currentGame.resetGameToolBarStatus(),this.currentGame.changeCardsBg(),this.currentGame.jackpotArea.tryJackpotMinBet(),this.currentGame.tellTounamentCurrentBet()}},BingoMachine.prototype.betChanged=function(t){this.dispatchEvent(new egret.Event("betChanged",!1,!1,{type:t})),this.jackpotArea.changebet(),this.gameToolBar.updateFreeSpinCount(GameData.currentBet==GameData.minBet&&this.freeSpin),this.betBar.setBet(GameData.currentBet)},BingoMachine.prototype.checkOOCWhenExtra=function(){var t;return t=this.isMegaBall?Number(this.dinero)<this.valorextra:Number(this.gameCoins)<this.valorextra,t&&(this.gameToolBar.autoPlaying&&(this.gameToolBar.autoPlaying=!1,this.gameToolBar.unlockAllButtonsAfterOOCExtra()),this.gameToolBar.buyAllExtra&&(this.gameToolBar.buyAllExtra=!1),this.isMegaBall?this.dispatchEvent(new egret.Event("out_of_dinero")):this.dispatchEvent(new egret.Event("out_of_coins_game_id"))),t},BingoMachine.prototype.tellTounamentCurrentBet=function(){var t={};t.currentBet=GameData.currentBet,t.betProgress=(GameData.currentBetIndex+1)/GameData.bets.length,this.dispatchEvent(new egret.Event("BET_CHANGED",!1,!1,t))},BingoMachine.prototype.changeCardsBg=function(){CardManager.changeCardsBgColor()},BingoMachine.prototype.onChangeNumber=function(t){IBingoServer.changeNumberCallback=null,GameCard.changeingCard=!1,this.setCardDatasWithNumeros(t.numerosCartelas,t.cartela),this.gameToolBar.unlockAllButtons(),this.changeCardsBg()},BingoMachine.prototype.onPlay=function(t,e){return void 0===e&&(e=null),IBingoServer.playCallback=null,this.firstHaveExtraBall=!0,this.lastLightResult=[],this.isMegaBall=!1,t?(this.updateCredit(t),this.gameToolBar.showStop(!0),this.gameToolBar.showWinResult(0),this.currentBallIndex=0,this.btExtra=t.btextra,this.ganho=t.ganho,t.ebPrice?this.valorextra=t.ebPrice:this.valorextra=t.valorextra,this.gratisNumber=t.gratis>0?t.gratis+t.bolas.length:0,void(t.bolas&&t.bolas.length&&this.ballArea.runBalls(t.bolas))):(this.stopAutoPlay(),void this.dispatchEvent(new egret.Event("out_of_coins_game_id")))},BingoMachine.prototype.updateCredit=function(t){this.gameCoins=Math.round(t.credito),isNaN(t.secondCurrency)||(this.dinero=t.secondCurrency),this.gameToolBar&&(this.gameToolBar.updateCoinsAndDinero(this.gameCoins,this.dinero),isNaN(t.xp)||this.gameToolBar.updateXp(t.xp))},BingoMachine.prototype.onRoundOver=function(t){IBingoServer.roundOverCallback=null,this.roundOver(),this.gameToolBar.showStop(!1),this.gameToolBar.unlockAllButtons(),"unexpress"!=t.ganho?this.gameToolBar.showWinResult(t.ganho):this.gameToolBar.showWinResult(this.ganho),this.updateCredit(t),null!=t.freeSpin&&this.checkFreeSpin(t.freeSpin),this.checkAuto(),this.updateNewDatas(t)},BingoMachine.prototype.checkAuto=function(){this.gameToolBar.autoPlaying||this.resetGameToolBarStatus(),this.gameToolBar.buyAllExtra&&(this.gameToolBar.buyAllExtra=!1),this.gameToolBar.autoPlaying&&(this.gameToolBar.lockAllButtons(),this.autoPlayTimeoutId=setTimeout(this.aotoNextRound.bind(this),1e3))},BingoMachine.prototype.checkFreeSpin=function(t){this.freeSpin=t,GameData.minBet==GameData.currentBet&&this.freeSpin>0&&(this.gameToolBar.autoPlaying&&(this.gameToolBar.autoPlaying=!1),this.gameToolBar.updateFreeSpinCount(this.freeSpin))},BingoMachine.prototype.aotoNextRound=function(){this.waitingForEffect?this.autoPlayTimeoutId=setTimeout(this.aotoNextRound.bind(this),500):this.gameToolBar.autoPlaying=!0},BingoMachine.prototype.waitForEffect=function(t){this.waitingForEffect=!1,t&&t()},BingoMachine.prototype.onCancelExtra=function(t){IBingoServer.cancelExtraCallback=null,this.gameToolBar.unlockAllButtons(),this.gameToolBar.showExtra(!1),this.roundOver(),this.updateCredit(t),null!=t.freeSpin&&this.checkFreeSpin(t.freeSpin),this.resetGameToolBarStatus(),this.showMissExtraBall(t.extrasnaocompradas),this.updateNewDatas(t)},BingoMachine.prototype.onExtra=function(t){if(IBingoServer.extraCallback=null,t.btextra=t.btextra||t.isMegaBall,this.isMegaBall=t.isMegaBall,!t){var e=this.gameToolBar.autoPlaying;return this.stopAutoPlay(),this.dispatchEvent(new egret.Event("out_of_coins_game_id")),void(e&&this.gameToolBar.showCollectButtonAfterOOC())}this.updateCredit(t),this.btExtra=t.btextra,this.ganho=t.ganho,t.ebPrice?this.valorextra=t.ebPrice:this.valorextra=t.valorextra,t.extra&&this.ballArea.runExtra(t.extra),CardManager.stopAllBlink()},BingoMachine.prototype.showMissExtraBall=function(t){this.ballArea.runMissExtra(t)},BingoMachine.prototype.sendPlayRequest=function(){IBingoServer.playCallback=this.onPlay.bind(this),IBingoServer.play(GameData.currentBet,CardManager.enabledCards,CardManager.groupNumber,GameData.currentBetIndex),BingoMachine.inRound=!0},BingoMachine.prototype.sendExtraRequest=function(t){void 0===t&&(t=!1),IBingoServer.extraCallback=this.onExtra.bind(this),IBingoServer.extra()},BingoMachine.prototype.sendCancelExtraReuqest=function(){IBingoServer.cancelExtraCallback=this.onCancelExtra.bind(this),IBingoServer.cancelExtra()},BingoMachine.prototype.showLastBallAt=function(t,e,a,n){void 0===n&&(n=1),this.runningBallUI&&this.runningBallContainer.contains(this.runningBallUI)&&this.runningBallContainer.removeChild(this.runningBallUI),this.runningBallUI=this.ballArea.getABigBall(t),this.runningBallUI.scaleX=this.runningBallUI.scaleY=n,Com.addObjectAt(this.runningBallContainer,this.runningBallUI,e,a)},BingoMachine.prototype.afterCheck=function(t){var e,a=[],n=[],i={};CardManager.clearCardsEffect(),PayTableManager.clearPaytablesStatus();for(var o=0;o<t.length;o++){a[o]=[],n[o]=[];for(var r in PayTableManager.payTablesDictionary){var s=t[o][r];if((s.fit||s.fits)&&a[o].push({paytalbe:r,fit:s.fit,fits:s.fits}),s.unfitIndex>=0)n[o].push(s.unfitIndex),i[r]||(i[r]=[]),i[r].push(s.unfitIndex);else if(s.unfitIndexs)for(var l in s.unfitIndexs)n[o].push(s.unfitIndexs[l]),i[r]||(i[r]=[]),i[r].push(s.unfitIndexs[l])}}if(PaytableFilter.filterObject)for(var o=0;o<a.length;o++)PaytableFilter.paytableConfixFilter(a[o],!0);for(var o=0;o<a.length;o++)for(var c=0;c<a[o].length;c++){var h=a[o][c],u=h.paytalbe;PayTableManager.payTablesDictionary[u].ui.showFit(),"bingo"==a[o][c]&&(e=!0),CardManager.showPaytableResult(o,u,h.fit,h.fits)}this.ballArea.needLightCheck&&CardManager.stopAllBlink(),CardManager.letCardBlink(n);for(var d in i)PayTableManager.payTablesDictionary[d].showBlinkAt(i[d]);this.needSmallWinTimesOnCard&&this.showSmallWinTimes(t)},BingoMachine.prototype.winBingo=function(){if(this.stopAutoPlay(),this.jackpotArea.jackpotBonus){var t=new egret.Event("JACKPOT_WIN");t.data={bonus:this.jackpotArea.jackpotNumber},this.dispatchEvent(t),this.jackpotArea.jackpotBonus=!1,this.jackpotArea.jackpotNumber=0}else this.dispatchEvent(new egret.Event("winbingo",!1,!1,{coins:this.ganho}))},BingoMachine.prototype.showSmallWinTimes=function(t){for(var e=0;e<t.length;e++){var a={};for(var n in PayTableManager.payTablesDictionary){var i=t[e][n];if(i.unfitIndex>=0)a[i.unfitIndex]||(a[i.unfitIndex]=[]),a[i.unfitIndex].push(n);else if(i.unfitIndexs)for(var o in i.unfitIndexs)a[i.unfitIndexs[o]]||(a[i.unfitIndexs[o]]=[]),a[i.unfitIndexs[o]].push(n)}this.showSmallWinResult(e,a)}},BingoMachine.prototype.showSmallWinResult=function(t,e){for(var a in e){for(var n=0,i=0;i<e[a].length;i++){var o=PayTableManager.payTablesDictionary[e[a][i]].ui.tx.text;n+=parseFloat(o.replace(/\D/,""))}CardManager.setSmallWinTime(t,parseInt(a),n)}},BingoMachine.prototype.quickPlay=function(){this.gameToolBar.quickPlay()},BingoMachine.prototype.stopQuickPlay=function(){},BingoMachine.prototype.collectCredit=function(){this.gameToolBar.collect()},BingoMachine.prototype.runningWinAnimation=function(t,e,a){for(var n="",i=0,o=0;o<e.length;o++)for(var r in e[o])(!this.lastLightResult[o]||!this.lastLightResult[o][r]||this.lastLightResult[o][r].length<e[o][r].length)&&i<PayTableManager.payTablesDictionary[r].multiple&&(i=PayTableManager.payTablesDictionary[r].multiple,n=PayTableManager.payTablesDictionary[r].payTableName,n==PayTableManager.bingoPaytableName&&this.dispatchEvent(new egret.Event("bingo")));this.lastLightResult=e,""!==n?a?(this.getPaytablesFit(n),t()):(this.getResultListToCheck(!0),this.getPaytablesFit(n,t)):t()},BingoMachine.prototype.getPaytablesFit=function(t,e){void 0===e&&(e=null);var a=this.getSoundName(t);""!==a?(this.waitingForEffect=!0,SoundManager.soundEfOn?this.playSound(a,1,this.waitForEffect.bind(this,e)):setTimeout(this.waitForEffect.bind(this,e),1500)):e&&e()},BingoMachine.prototype.onBetChanged=function(t){},BingoMachine.prototype.hasExtraBallFit=function(){},BingoMachine.prototype.getExtraBallFit=function(){},BingoMachine.prototype.collectExtraBall=function(){},BingoMachine.prototype.changeNumberSound=function(){},BingoMachine.prototype.roundOver=function(){BingoMachine.inRound=!1},BingoMachine.prototype.startPlay=function(){this.stopAllSound(),CardManager.stopAllBlink(),this.superExtraBg&&this.superExtraBg.visible&&(this.superExtraBg.visible=!1),this.gameToolBar.megeExtraOnTop(!1),this.ganhoCounter&&this.ganhoCounter.clearGanhoData()},BingoMachine.prototype.showLastBall=function(t){this.currentBallIndex++,this.ballCountText&&(this.ballCountText.text=""+this.currentBallIndex)},BingoMachine.prototype.paytableRuleFilter=function(t){},BingoMachine.prototype.showMiniGame=function(){},BingoMachine.prototype.showWinAnimationAt=function(t,e){},BingoMachine.prototype.dropCoinsAt=function(t,e,a){void 0===a&&(a=1),Com.addObjectAt(this,new DropCoins(a),t-100,e-100)},BingoMachine.prototype.showNoBetAndCredit=function(){this.creditText=new TextLabel,this.betText=new TextLabel},BingoMachine.prototype.showJackpot=function(t,e,a){},BingoMachine.prototype.refreshGameCoins=function(t){this.gameCoins=Math.round(t)},BingoMachine.prototype.refreshGameDinero=function(t){this.dinero=t},Object.defineProperty(BingoMachine,"jackpotMin",{get:function(){return this.currentGame&&this.currentGame.jackpotArea?this.currentGame.jackpotArea.jackpotMinBet:0},enumerable:!0,configurable:!0}),BingoMachine.prototype.buildSuperEbArea=function(t,e,a){this.superExtraBg=Com.addBitmapAt(this,this.assetStr(t),e,a),this.superExtraBg.visible=!1,this.setChildIndex(this.superExtraBg,this.getChildIndex(this.ballArea))},BingoMachine.prototype.tryFirstMega=function(t){if(this.megaName&&!localStorage.getItem(this.megaName)){localStorage.setItem(this.megaName,"true"),this.stopAutoPlay();var e=new egret.Event("megaFirst");e.data=t,this.dispatchEvent(e)}},BingoMachine.prototype.stopAutoPlay=function(){this.gameToolBar.autoPlaying?this.gameToolBar.autoPlaying=!1:this.gameToolBar.buyAllExtra&&(this.gameToolBar.buyAllExtra=!1)},BingoMachine.prototype.onLevelUpBonus=function(t){var e=t.data;isNaN(e)||(this.gameCoins+=e,this.gameToolBar.updateCoinsAndDinero(this.gameCoins,this.dinero))},BingoMachine.prototype.updateNewDatas=function(t){this.gameToolBar.updateMissionData(t.missionValue,t.missionTarget,t.missionId)},BingoMachine.missionPopup=function(){this.currentGame.dispatchEvent(new egret.Event("missionPopup"))},BingoMachine.GENERIC_MODAL_LOADED="gameLoaded",BingoMachine.inRound=!1,BingoMachine}(GameUIItem);__reflect(BingoMachine.prototype,"BingoMachine");var GenericPo=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e)||this}return __extends(e,t),e.prototype.init=function(){""!==this.bgAssetName?(this.bg=Com.addBitmapAt(this,this.bgAssetName,0,0),this.anchorOffsetX=this.bg.width>>1,this.anchorOffsetY=this.bg.height>>1):(this.width=document.documentElement.clientWidth,this.height=document.documentElement.clientHeight,this.anchorOffsetX=this.width>>1,this.anchorOffsetY=this.height>>1),this.closeButtonOffset||(this.closeButtonOffset=new egret.Point(0,0)),this.closeButtonAssetName&&(this.closeButton=Com.addDownButtonAt(this,this.closeButtonAssetName,this.closeButtonAssetName,this.bg.width+this.closeButtonOffset.x,this.closeButtonOffset.y,this.onClose,!0)),t.prototype.init.call(this)
},e.prototype.onClose=function(t){this.dispatchEvent(new egret.Event(GenericModal.CLOSE_MODAL))},e.prototype.updateDealOverplusText=function(t){},e.prototype.poOverplusOver=function(){},e.prototype.onKeyUp=function(t){},e.prototype.onMouseWheel=function(t){},e}(GenericModal);__reflect(GenericPo.prototype,"GenericPo");var PaytableLayer=function(t){function e(){var e=t.call(this)||this;return e.cacheAsBitmap=!0,e}return __extends(e,t),e.prototype.addPaytableUI=function(){PayTableManager.getPayTableUI();var t=PayTableManager.payTablesDictionary;for(var e in t){var a=t[e].position;t[e].UI.x=a.x-this.x,t[e].UI.y=a.y-this.y,this.addChild(t[e].UI)}},e.prototype.clearPaytableFgs=function(){},e.prototype.buildFgs=function(){},e.prototype.buildTitleText=function(){},e.prototype.payTableFit=function(t){},e}(egret.DisplayObjectContainer);__reflect(PaytableLayer.prototype,"PaytableLayer");var PaytableUI=function(t){function e(e){var a=t.call(this)||this;return a.useBg=e,a.addEventListener(egret.Event.REMOVED_FROM_STAGE,a.onRemove,a),a}return __extends(e,t),Object.defineProperty(e.prototype,"_tx",{get:function(){var t=this.tx.text.replace(/\D/g,"");return isNaN(Number(t))?1:Number(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blink",{set:function(t){if(this._blink=t,this.currentEffect=0,t){if(this.addEventListener(egret.Event.ENTER_FRAME,this.onFrame,this),this.useBg)for(var e=0;e<this.blinkGridsIndexs.length;e++)this.addChild(this.grids[this.blinkGridsIndexs[e]])}else this.useBg?(this.removeChildren(),this.addChild(this.bg),this.tx&&(this.addChild(this.tx),this.tx.filters=[])):this.tx.filters=[],this.removeEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)},enumerable:!0,configurable:!0}),e.prototype.onRemove=function(t){this.removeEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)},Object.defineProperty(e.prototype,"winEffects",{set:function(t){this._winEffects=t},enumerable:!0,configurable:!0}),e.prototype.onFrame=function(t){if(this.currentEffect++,this.useBg){for(var a=0;a<this.blinkGridsIndexs.length;a++)this.grids[this.blinkGridsIndexs[a]].filters=[this._winEffects[(this.currentEffect>>4)%this._winEffects.length]];this.tx&&this.blinkGridsIndexs.length&&(this.tx.filters=[this._winEffects[(this.currentEffect>>4)%this._winEffects.length]])}else e.needBlink&&(this.tx.filters=[this._winEffects[(this.currentEffect>>4)%this._winEffects.length]])},e.prototype.setText=function(t,a,n){void 0===a&&(a=0),t&&(this.textColor=a,this.tx=new egret.TextField,this.tx.textColor=a,this.tx.size=n,this.tx.bold=e.textBold,this.tx.text=t,this.useBg||this.addChild(this.tx))},e.prototype.setBackground=function(t){this.useBg&&(this.bgName=t)},e.prototype.showFit=function(){this.blink=!1,this.useBg?this.focus():this.blink=!0,this.dispatchEvent(new egret.Event("paytableFitEvent"))},e.prototype.clearStatus=function(){this.blink=!1,this.bg&&this.graphics.clear()},e.prototype.setGrids=function(t){t&&(this.gridRuleString=t)},e.prototype.initUI=function(){if(this.useBg){this.bg=Com.createBitmapByName(BingoMachine.getAssetStr(this.bgName)),this.addChild(this.bg);var t=this.gridRuleString.split("*"),e=parseInt(t[0]),a=parseInt(t[1]),n=e*a,i=Math.ceil(this.bg.width/e),o=Math.ceil(this.bg.height/a);this.grids=[];for(var r=0;n>r;r++)this.grids[r]=new egret.Shape,this.grids[r].x=r%e*i,this.grids[r].y=Math.floor(r/e)*o,GraphicTool.drawRect(this.grids[r],new egret.Rectangle(0,0,i-1,o-1));this.tx&&(this.tx.width=this.bg.width,this.tx.y=this.bg.height+3,this.tx.textAlign="center",this.addChild(this.tx))}},e.prototype.focus=function(){this.useBg&&GraphicTool.drawRect(this,new egret.Rectangle(-2,-2,this.bg.width+4,this.bg.height+4),e.focusColor,!0,0,0,2,e.focusColor)},e.prototype.showBlinkAt=function(t){this.useBg&&(this.blinkGridsIndexs=t,this.blink=!0)},e.textBold=!1,e.focusColor=16777096,e.needBlink=!0,e}(egret.Sprite);__reflect(PaytableUI.prototype,"PaytableUI");var SettingSlider=function(t){function e(){var e=t.call(this)||this;e.sliderRange=850;var a=Com.addBitmapAt(e,"gameSettings_json.scroll_bar",0,0);return a.height=e.sliderRange,e.slider=Com.addBitmapAtMiddle(e,"gameSettings_json.scroll_bar_handle",10,0),e.slider.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onSliderStartDrag,e),e.slider.touchEnabled=!0,e}return __extends(e,t),e.prototype.setSliderPosition=function(t,e){0>e&&(e=0),e>t&&(e=t),this.slider.y=e/t*this.sliderRange},e.prototype.onSliderStartDrag=function(t){this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onSliderStopDrag,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onSliderStopDrag,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.dispatchEvent(new egret.Event("startDrag")),this.dragStarStageY=t.stageY,this.dragStarSliderY=this.slider.y,this.dragSliderPosition(t.stageY)},e.prototype.onSliderStopDrag=function(t){this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onSliderStopDrag,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onSliderStopDrag,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMove,this),this.dispatchEvent(new egret.Event("stopDrag"))},e.prototype.dragSliderPosition=function(t){t-=this.dragStarStageY,t/=this.parent.scaleY,t+=this.dragStarSliderY;var e=t;0>e&&(e=0),e>this.sliderRange&&(e=this.sliderRange),this.slider.y=e},Object.defineProperty(e.prototype,"scrollTop",{get:function(){return this.slider.y/this.sliderRange},enumerable:!0,configurable:!0}),e.prototype.onMove=function(t){this.dragSliderPosition(t.stageY)},e}(egret.DisplayObjectContainer);__reflect(SettingSlider.prototype,"SettingSlider");var V1Game=function(t){function e(e,a,n){var i=t.call(this,e,a,n)||this;return i.tokenObject.key="login",i.tokenObject.value.token="112411241124696911692424116969",i}return __extends(e,t),e.prototype.getCardsGroup=function(t){this.Cartoes||this.createCardGroups();for(var e=this.Cartoes.slice(4*t-3,4*t+1),a=[],n=0;n<e.length;n++)a=a.concat(this.changeCardNumberOrder(e[n]));return a},e.prototype.changeCardNumberOrder=function(t){var e=[];t=t.concat();for(var a=0;a<t.length;a++){var n=a%GameCardUISettings.gridNumbers.y,i=Math.floor(a/GameCardUISettings.gridNumbers.y);e[5*n+i]=t[a]}return e},e.prototype.onServerData=function(e){e.numerosCartelas=this.getCardsGroup(e.cartela),t.prototype.onServerData.call(this,e)},e.prototype.sendRoundOverRequest=function(){IBingoServer.roundOverCallback=this.onRoundOver.bind(this),IBingoServer.libera()},e.prototype.sendPlayRequest=function(){IBingoServer.playCallback=this.onPlay.bind(this),IBingoServer.round(GameData.currentBet,CardManager.enabledCards,CardManager.groupNumber,GameData.currentBetIndex),BingoMachine.inRound=!0},e.prototype.sendExtraRequest=function(t){void 0===t&&(t=!1),IBingoServer.extraCallback=this.onExtra.bind(this),IBingoServer.extra(!0,t)},e.prototype.sendCancelExtraReuqest=function(){IBingoServer.cancelExtraCallback=this.onCancelExtra.bind(this),IBingoServer.cancelExtra(!0)},e.prototype.createCardGroups=function(){this.Cartoes=RES.getRes("v1gameDefault_json")},e.prototype.onPlay=function(e){if(e&&e.bolas&&e.bolas.length){for(var a=e.bolas,n=0;n<a.length;n++)a[n]=this.changeNumberFromServer(a[n]);this.de_duplication&&this.de_duplication(a)}else e=null;t.prototype.onPlay.call(this,e)},e.prototype.changeNumberFromServer=function(t){var e=Math.floor((t-1)/15),a=(t-1)%15;return CardManager.cards[e].getNumberAt(a)},e.prototype.onExtra=function(e){e&&null!=e.extra?(this.de_duplication&&(e.extra=e.extra%100),e.extra=this.changeNumberFromServer(e.extra)):e=null,t.prototype.onExtra.call(this,e)},e.prototype.showMissExtraBall=function(e){if(e){for(var a=0;a<e.length;a++)e[a]=this.changeNumberFromServer(e[a]);t.prototype.showMissExtraBall.call(this,e)}},e}(BingoMachine);__reflect(V1Game.prototype,"V1Game");var V2Game=function(t){function e(e,a,n){var i=t.call(this,e,a,n)||this;return i.tokenObject.key="iniciar",i.tokenObject.value.token="undefined",i}return __extends(e,t),e.prototype.extraUIShowNumber=function(){this.extraUIObject.visible=!0,this.runningBallContainer=new egret.DisplayObjectContainer,this.runningBallContainer.x=this.extraUIObject.x,this.runningBallContainer.y=this.extraUIObject.y,this.addChildAt(this.runningBallContainer,this.getChildIndex(this.extraUIObject)),Com.addObjectAt(this.runningBallContainer,this.extraUIObject,0,0),this.extraUIObject=this.runningBallContainer},e.prototype.getNumberOnCard=function(t,e){var a=GameCardUISettings.numberAtCard(t,e);CardManager.getBall(a)},e.prototype.getBuffInfoIndex=function(t){for(var e=0;e<t.length;e++)if(t[e].buffBet==GameData.currentBet)return e;return-1},e}(BingoMachine);__reflect(V2Game.prototype,"V2Game");var BallManager=function(t){function e(){var e=t.call(this)||this;return e.moveingBallLayer=new egret.DisplayObjectContainer,e.staticBallLayer=new egret.DisplayObjectContainer,e.addChild(e.staticBallLayer),e.addChild(e.moveingBallLayer),e.staticBallLayer.cacheAsBitmap=!0,e}return __extends(e,t),e.prototype.getBallSettings=function(t,a,n){for(var i=[],o=0;o<t.length;o++){i[o]={};for(var r in t[o])i[o][r]=t[o][r]}e.balls=i,BingoBall.ballUIs=[],this.ballSize=a,this.ballTextSize=n},e.prototype.clearBalls=function(){for(var t=0;t<this.moveingBallLayer.numChildren;t++){var e=this.moveingBallLayer.getChildAt(t);e.removeEventListener(BingoBall.BALL_MOVE_END,this.onBallMoveEnd,this)}this.moveingBallLayer.removeChildren(),this.staticBallLayer.removeChildren()},e.prototype.onRemove=function(){clearTimeout(this.nextDelayId)},e.prototype.runBalls=function(t){this.clearBalls(),this.lightResult=null,this.ballIndexs=t,this.extraBalls=[],this.ballOrder=0,this.beginRun()},e.prototype.runCutBalls=function(t){this.ballIndexs=this.ballIndexs.concat(t),this.beginRun()},e.prototype.runExtra=function(t){this.ballIndexs.push(t),this.beginRun()},e.prototype.runMissExtra=function(t){if(t){for(;t.length;)this.ballIndexs.push(t.shift());for(;this.ballIndexs.length;)this.runMissExtraBall()}},e.prototype.beginRun=function(){if(!this.ballIndexs.length)return void BingoMachine.endBallRunning();this.runNextBall();var t,e,a=0==this.ballIndexs.length;(this.needLightCheck||a)&&(t=BingoMachine.betweenBallRunning()),t&&(e=this.recordlightResult(t)),e?BingoMachine.runningAnimation(this.delayRunNextBall.bind(this),t,a):this.delayRunNextBall()},e.prototype.stopBallRunning=function(){for(;this.ballIndexs.length>1;)this.runNextBall()},e.prototype.runNextBall=function(){for(var t=this.ballIndexs.shift(),a=e.balls[this.ballOrder++],n=a.path,i=[],o=0;o<n.length;o++)i[o]=new egret.Point(n[o].x,n[o].y);var r=this.buildBallWithIndex(t);this.moveingBallLayer.addChild(r),r.addEventListener(BingoBall.BALL_MOVE_END,this.onBallMoveEnd,this),r.startRun(i),CardManager.getBall(t),BingoMachine.runningBall(t)},e.prototype.onBallMoveEnd=function(t){var e=t.target;this.staticBallLayer.addChild(e)},e.prototype.runMissExtraBall=function(){var t=this.ballIndexs.shift(),a=e.balls[this.ballOrder++],n=a.path,i=n[n.length-1],o=new egret.Point(i.x,i.y),r=this.buildBallWithIndex(t);Com.addObjectAt(this.staticBallLayer,r,o.x,o.y);var s=new egret.Shape,l=this.ballSize/r.scaleX;s.graphics.lineStyle(Math.floor(.07*l),16711680);var c=.25*(2-Math.SQRT2)*l;s.graphics.moveTo(c,c),s.graphics.lineTo(r.width-c,r.height-c),s.graphics.moveTo(r.width-c,c),s.graphics.lineTo(c,r.height-c),r.filters=[MatrixTool.colorMatrixLighter(.5)],r.addChild(s)},e.prototype.delayRunNextBall=function(){this.nextDelayId=setTimeout(this.beginRun.bind(this),e.normalBallInterval)},e.prototype.recordlightResult=function(t){if(!this.lightResult||0==this.lightResult.length)return this.lightResult=t,!0;for(var e=0;e<t.length;e++)for(var a in t[e])if(!this.lightResult[e][a]||t[e][a].length!=this.lightResult[e][a].length)return this.lightResult=t,!0;return!1},e.prototype.setBallBg=function(t,e){Com.addBitmapAt(t,BingoMachine.getAssetStr(e),0,0)},e.prototype.buildBallWithIndex=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0);var a=t-1;return BingoBall.ballUIs[a]||(BingoBall.ballUIs[a]=this.buildBallUIWithIndex(a,t)),new BingoBall(a,e?this.ballSize:0)},e.prototype.buildBallUIWithIndex=function(t,a){void 0===a&&(a=0);var n=e.balls[t],i=new egret.Sprite;this.setBallBg(i,n.ui);var o=new egret.TextField;return o.width=i.width,o.size=this.ballTextSize,o.bold=!0,o.textAlign="center",o.textColor=Number(n.color),o.text=""+(a?a:t+1),o.y=i.height-o.textHeight>>1,e.textBold&&(o.fontFamily="Arial Black"),n.offsetX&&(o.x=n.offsetX),e.ballOffsetY&&(o.y+=e.ballOffsetY),i.addChild(o),i},e.prototype.getABall=function(t){return this.buildBallWithIndex(t)},e.prototype.getABigBall=function(t){return this.buildBallWithIndex(t,!1)},e.getBallLastPosition=function(t){var e=this.balls[t],a=e.path,n=a[a.length-1];return new egret.Point(n.x,n.y)},e.normalBallInterval=100,e.ballOffsetY=0,e}(egret.DisplayObjectContainer);__reflect(BallManager.prototype,"BallManager");var BingoBall=function(t){function e(a,n){void 0===n&&(n=0);var i=t.call(this)||this;i.ballSize=n;var o=new egret.RenderTexture,r=e.ballUIs[a];o.drawToTexture(r,new egret.Rectangle(0,0,r.width,r.height),n?n/r.height:1);var s=new egret.Bitmap(o);return i.addChild(s),i}return __extends(e,t),e.prototype.startRun=function(t){if(BallManager.rotateBall){var e=this.ballSize>>1;this.anchorOffsetX=e,this.anchorOffsetY=e,this.x=t[0].x+e,this.y=t[0].y+e}else this.x=t[0].x,this.y=t[0].y;this.pts=t,this.moveToNextPoint()},e.prototype.moveToNextPoint=function(){var t=this.pts.shift();if(!this.pts.length)return void this.dispatchEvent(new egret.Event(e.BALL_MOVE_END));var a=this.pts[0],n=egret.Point.distance(t,a),i=egret.Tween.get(this);if(BallManager.rotateBall){var o=this.ballSize>>1;i.to({x:a.x+o,y:a.y+o,rotation:this.rotation+360},.5*n)}else i.to({x:a.x,y:a.y},.5*n);i.call(this.moveToNextPoint,this)},e.BALL_MOVE_END="ballMoveEnd",e}(egret.Sprite);__reflect(BingoBall.prototype,"BingoBall");var BankProductItem=function(t){function e(){var e=t.call(this)||this;return e.touchChildren=!1,e.touchEnabled=!0,e}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(BankProductItem.prototype,"BankProductItem");var CollectHourlyBonusBar=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.timerStaus=function(t,e){},e}(egret.DisplayObjectContainer);__reflect(CollectHourlyBonusBar.prototype,"CollectHourlyBonusBar");var BingoBackGroundSetting=function(){function t(){}return t.getBackgroundData=function(t,e){this.bgColor=t,this.bgItems=e},t.initBackground=function(t){this.drawBackgroundOn(t);var e=this.getAnimationFactory(t);return this.buildBGItemsByArray(t,e),e},t.getAnimationFactory=function(t){var e=egret.getDefinitionByName(egret.getQualifiedClassName(t)).animationAssetName,a=RES.getRes(e+"_json"),n=RES.getRes(e+"_png");return new egret.MovieClipDataFactory(a,n)},t.drawBackgroundOn=function(e){GraphicTool.drawRect(e,new egret.Rectangle(0,0,t.gameMask.width,t.gameMask.height),this.bgColor)},t.buildBGItemsByArray=function(t,e){for(var a=new Array,n=this.bgItems,i=0;i<n.length;i++){var o=void 0;RES.getRes(BingoMachine.getAssetStr(n[i].name))?(o=Com.addBitmapAt(t,BingoMachine.getAssetStr(n[i].name),n[i].x,n[i].y),o.name=BingoMachine.getAssetStr(n[i].name)):(o=Com.addMovieClipAt(t,e,n[i].name,n[i].x,n[i].y),o.name=BingoMachine.getAssetStr(n[i].name)),t.addChild(o),a.push(o)}return a},t.gameMask=new egret.Rectangle(0,0,2e3,1125),t.gameSize=new egret.Point(960,540),t}();__reflect(BingoBackGroundSetting.prototype,"BingoBackGroundSetting");var GameCommands=function(){function t(){}return t.help="help",t.decreseBet="decreseBet",t.increaseBet="increaseBet",t.changeNumber="changeNumber",t.maxBet="maxBet",t.minBet="minBet",t.collect="collect",t.play="play",t.stop="stop",t.startAuto="startAuto",t.extra="extra",t.stopAuto="stopAuto",t.saving="saving",t.showMini="showMini",t.buyAll="buyAll",t}();__reflect(GameCommands.prototype,"GameCommands");var GameData=function(){function t(){}return Object.defineProperty(t,"minBet",{get:function(){return this.bets[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"maxBet",{get:function(){return this.bets[this.bets.length-1]},enumerable:!0,configurable:!0}),t.betUp=function(){this._currentBetIndex++},t.betDown=function(){this._currentBetIndex--},Object.defineProperty(t,"currentBet",{get:function(){return this._currentBetIndex<=-1?this._currentBetIndex=this.bets.length-1:this._currentBetIndex>=this.bets.length&&(this._currentBetIndex=0),this.bets[this._currentBetIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"currentBetIndex",{get:function(){return this._currentBetIndex},enumerable:!0,configurable:!0}),t.setBetToMax=function(){this._currentBetIndex=this.bets.length-1},t.setBetToMin=function(){this._currentBetIndex=0},t.getBetList=function(e,a){this.waiter=e;var n={current_bet:t.currentBet,machineId:parseInt(a)};(new DataServer).getDataFromUrl(PlayerConfig.config("http")+"://"+PlayerConfig.config("host")+"/cmd.php?action=get_machine_settings",this.getMachineSettingSuccess.bind(this),this,!0,n)},t.getMachineSettingSuccess=function(t){var e=JSON.parse(t);if(e.bet_steps instanceof Array){var a=e.bet_steps;this.bets=[];for(var n=0;n<a.length;n++)this.bets[n]=parseInt(a[n]);this._currentBetIndex=this.bets.indexOf(e.default_bet),this.waiter(!0)}},t.bets=[10,25,50,100,250,500,1e3,2500,5e3,1e4,25e3,5e4,1e5,25e4,5e5,1e6,25e5,5e6,1e7],t._currentBetIndex=-1,t}();__reflect(GameData.prototype,"GameData");var MuLang=function(){function MuLang(){}return MuLang.getText=function(t,e){if(void 0===e&&(e=0),!MuLang.txt)return null;var a=MuLang.txt[t];if(!a)return t;var n=a[MuLang.language];if(!n)return t;switch(e){default:return n;case 1:return n.toUpperCase();case 2:return n.toLowerCase();case 3:return n.substring(0,1).toUpperCase()+n.substring(1,n.length).toLowerCase()}},Object.defineProperty(MuLang,"language",{get:function(){if(localStorage&&["pt","en","es"].indexOf(localStorage.language)>=0)return localStorage.language;var resLan=PlayerConfig.player("settings.lang")||eval("getPlayer().settings.lang");return["pt","en","es"].indexOf(resLan)>=0?resLan:"pt"},set:function(t){localStorage.setItem("language",t)},enumerable:!0,configurable:!0}),Object.defineProperty(MuLang,"languageName",{get:function(){return this.lanuageNames[this.language]},enumerable:!0,configurable:!0}),MuLang.txt={},MuLang.CASE_NORMAL=0,MuLang.CASE_UPPER=1,MuLang.CASE_LOWER=2,MuLang.CASE_TYPE_CAPITALIZE=3,MuLang.lanuageNames={en:"english",es:"spanish",pt:"portuguese"},MuLang}();__reflect(MuLang.prototype,"MuLang");var MDS=function(){function t(){}return t.addGameText=function(t,e,a,n,i,o,r,s,l,c){void 0===r&&(r=!1),void 0===s&&(s=200),void 0===l&&(l=""),void 0===c&&(c=.8);var h=Com.addLabelAt(t,e,a+BrowserInfo.textUp,s,n,n,r,!0);return h.textColor=i,h.textAlign="left",h.setText(MuLang.getText(o)+l),h.scaleX=c,h},t.addGameTextCenterShadow=function(t,e,a,n,i,o,r,s,l,c){void 0===r&&(r=!1),void 0===s&&(s=200),void 0===l&&(l=!0),void 0===c&&(c=!0);var h=this.addGameText(t,e,a,n,i,o,r,s);return l&&(h.textAlign="center"),c&&(h.filters=[new egret.DropShadowFilter(3,45,0,1,1,1,1,3)]),h},t.addBitmapTextAt=function(t,e,a,n,i,o,r,s,l){void 0===i&&(i="left"),void 0===r&&(r=0);var c=new BmpText;c.font=RES.getRes(e),c.textAlign=i,c.verticalAlign="middle",c.text=" ";var h=o/c.textHeight;return c.width=1/h*s,c.height=1/h*l,c.scaleX=c.scaleY=h,c.filters=[MatrixTool.colorMatrixPure(r)],Com.addObjectAt(t,c,a,n),c},t.removeSelf=function(t){t.parent&&t.parent.removeChild(t)},t.onUserHeadLoaded=function(t,e,a){var n=a.currentTarget,i=n.data,o=new egret.Texture;o.bitmapData=i,t.scaleX=t.scaleY=1,t.texture=o,t.width=t.height=e},t}();__reflect(MDS.prototype,"MDS");var CardArrowLayer=function(t){function e(e,a,n,i,o){void 0===o&&(o=1);var r=t.call(this)||this;r.arrowMcs=[];for(var s=GameCardUISettings.cardPositions,l=0;l<s.length;l++){r.arrowMcs[l]=[];for(var c=0;3>c;c++){var h=r.buildArrowByPoint(e,a,s[l],c,n,i,o);h.stop(),h.visible=!1,r.arrowMcs[l][c]=h}}return r}return __extends(e,t),e.prototype.buildArrowByPoint=function(t,e,a,n,i,o,r){var s=Com.addMovieClipAt(this,t,e,a.x+i.x,a.y+o*n+i.y);return 1!=r&&(s.scaleX=r),s},e.prototype.arrowBlink=function(t){this.clearArrow();for(var e=0;4>e;e++)if(t[e].line&&t[e].line.unfitIndexs)for(var a in t[e].line.unfitIndexs){var n=this.arrowMcs[e][a];n.visible=!0,n.gotoAndPlay(1)}},e.prototype.clearArrow=function(){for(var t=0;4>t;t++)for(var e=0;3>e;e++){var a=this.arrowMcs[t][e];a.visible=!1,a.stop()}},e}(egret.DisplayObjectContainer);__reflect(CardArrowLayer.prototype,"CardArrowLayer");var CardManager=function(){function CardManager(){}return CardManager.getCardData=function(data){this.cards=new Array,GameCard.getCardData(data);for(var i=0;i<GameCardUISettings.cardPositions.length;i++)this.cards[i]=eval("new CardManager.cardType( i )")},Object.defineProperty(CardManager,"enabledCards",{get:function(){return this.cards.length},enumerable:!0,configurable:!0}),CardManager.setCardBet=function(t){for(var e=0;e<this.cards.length;e++)this.cards[e].bet=t;return t*this.enabledCards},CardManager.getBall=function(t){for(var e=0;e<this.cards.length;e++)this.cards[e].checkNumber(t)},CardManager.clearCardsStatus=function(){for(var t=0;t<this.cards.length;t++)this.cards[t].clearStatus()},CardManager.getCheckingStrings=function(){for(var t=[],e=0;e<this.cards.length;e++)t.push(this.cards[e].getCheckString());return t},CardManager.letCardBlink=function(t){for(var e=0;e<t.length;e++)for(var a=0;a<t[e].length;a++)this.cards[e].blinkAt(t[e][a])},CardManager.stopAllBlink=function(){for(var t=0;t<this.cards.length;t++)this.cards[t].stopBlink()},CardManager.changeCardsBgColor=function(){if(GameCardUISettings.titleColors){GameCardUISettings.changeBgColor();for(var t=0;t<this.cards.length;t++)this.cards[t].getBgColor()}},CardManager.showPaytableResult=function(t,e,a,n){a&&(n=[]),this.cards[t].showfitEffect(e,n)},CardManager.startBlinkTimer=function(){this.blinkTimer=new egret.Timer(500,0),this.blinkTimer.addEventListener(egret.TimerEvent.TIMER,this.onBlinkTimer,this),this.blinkTimer.start()},CardManager.onBlinkTimer=function(t){for(var e=0;e<this.cards.length;e++)this.cards[e].blink(1&t.target.currentCount)},CardManager.stopBlinkTimer=function(){this.blinkTimer.reset(),this.blinkTimer.stop()},CardManager.clearCardsEffect=function(){for(var t=0;t<this.cards.length;t++)this.cards[t].clearFitEffect()},CardManager.setSmallWinTime=function(t,e,a){this.cards[t]instanceof ExtraBlinkCard?this.cards[t].setSmallWinTimeAt(e,a):console.error("current card is not extra blink card, cannot setSmallWinTimeAt")},CardManager.cardType=GameCard,CardManager.gridType=TowerGrid,CardManager}();__reflect(CardManager.prototype,"CardManager");var ExtraBlinkCard=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.getNumbers=function(e){t.prototype.getNumbers.call(this,e);for(var a=0;a<this.grids.length;a++)this.grids[a].extraBlinkNumber=e[a]},e.prototype.showWinCount=function(t){t>0&&this.betText.setText(MuLang.getText("win")+": "+(t?Utils.formatCoinsNumber(t):""))},e.prototype.setSmallWinTimeAt=function(t,e){this.grids[t]instanceof ExtraBlinkGrid?this.grids[t].setSmallTime(e):console.error("current grid is not extra blink grid, cannot setSmallTime")},e}(GameCard);__reflect(ExtraBlinkCard.prototype,"ExtraBlinkCard");var ExtraBlinkGrid=function(t){function e(){var e=t.call(this)||this;return e.buildExtraBlinkSp(),e.buildSmallWinText(),e}return __extends(e,t),Object.defineProperty(e.prototype,"blink",{get:function(){return this._blink},set:function(t){this._blink!=t&&(this._blink=t,t?(this.numTxt.textColor=CardGridColorAndSizeSettings.numberColorOnEffect,this.showBlink(!0)):(this.currentBgPic=this.defaultBgPic,this.extraBinkSp.visible=!1,this.numTxt.textColor=CardGridColorAndSizeSettings.numberColor))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extraBlinkNumber",{set:function(t){this.extraBlinkNumTxt.setText(""+t)},enumerable:!0,configurable:!0}),e.prototype.buildExtraBlinkSp=function(){this.extraBinkSp=new egret.DisplayObjectContainer,Com.addObjectAt(this,this.extraBinkSp,0,0),Com.addObjectAt(this.extraBinkSp,this.getBlinkBg(),0,0),this.extraBinkSp.visible=!1},e.prototype.buildSmallWinText=function(){},e.prototype.getBlinkBg=function(){return null},e.prototype.setSmallTime=function(t){return t?void(this.smallWinTimesText.text="x"+t):void(this.blink=!1)},e.prototype.showBlink=function(a){e.extraBink?(this.currentBgPic=this.defaultBgPic,this.extraBinkSp.visible=a):(t.prototype.showBlink.call(this,a),this.extraBinkSp.visible=!1),this.numTxt.textColor=CardGridColorAndSizeSettings.numberColor},e}(TowerGrid);__reflect(ExtraBlinkGrid.prototype,"ExtraBlinkGrid");var ForkGrid=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.showEffect=function(e){t.prototype.showEffect.call(this,e),e?(this.forkUI||(this.forkUI=Com.createBitmapByName(BingoMachine.getAssetStr(CardGridUISettings.usefork))),Com.addObjectAt(this,this.forkUI,CardGridColorAndSizeSettings.gridSize.x-this.forkUI.width>>1,CardGridColorAndSizeSettings.gridSize.y-this.forkUI.height>>1)):this.removeFork()},e.prototype.removeFork=function(){this.forkUI&&this.contains(this.forkUI)&&this.removeChild(this.forkUI)},e}(TowerGrid);__reflect(ForkGrid.prototype,"ForkGrid");var BingoGameMain=function(_super){function BingoGameMain(){var t=_super.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(BingoGameMain,_super),BingoGameMain.prototype.onAddToStage=function(t){},BingoGameMain.prototype.runGame=function(){},BingoGameMain.prototype.createGameScene=function(){this.buildGame(),this.addGameLoaderAndEvents(),IBingoServer.serverInit()},BingoGameMain.prototype.buildGame=function(){},BingoGameMain.prototype.addGameLoaderAndEvents=function(){var t=new LoadingUI;this.currentGame.preLoader=t,this.currentGame.addEventListener(BingoMachine.GENERIC_MODAL_LOADED,this.addGame,this),this.currentGame.addEventListener("showGameSettings",this.showGameSettings,this),this.currentGame.addEventListener("missionPopup",this.showMission,this),this.currentGame.addEventListener("showBank",this.showCoinBank,this),this.currentGame.addEventListener("out_of_coins_game_id",this.showCoinBank,this),this.currentGame.addEventListener("out_of_dinero",this.showChipBank,this)},BingoGameMain.prototype.addGame=function(){var stageW=this.stage.stageWidth,stageH=this.stage.stageHeight,isMobile=stageH>stageW;try{isMobile=eval("isMobile()")}catch(e){}this.isMobile=isMobile,this.addChild(this.currentGame),document.addEventListener("keydown",this.keyDown.bind(this));var loadingBar=document.getElementById("loading_bar");loadingBar&&loadingBar.parentNode.removeChild(loadingBar)},BingoGameMain.prototype.keyDown=function(t){this.currentGame&&(32===t.keyCode?(t.preventDefault(),this.currentGame.quickPlay()):67===t.keyCode&&(t.preventDefault(),this.currentGame.collectCredit()))},BingoGameMain.prototype.showGameSettings=function(t){this.showShadow(),this.currentPo=new GameSettingPopup,this.currentPo.inited?this.addPhonePo():this.currentPo.addEventListener(GenericModal.GENERIC_MODAL_LOADED,this.addPhonePo,this)},BingoGameMain.prototype.showMission=function(t){this.showShadow(),this.currentPo=new MissionPopup,this.currentPo.inited?this.addPhonePo():this.currentPo.addEventListener(GenericModal.GENERIC_MODAL_LOADED,this.addPhonePo,this)},BingoGameMain.prototype.showShadow=function(){this.shadow||(this.shadow=new egret.Shape,GraphicTool.drawRect(this.shadow,new egret.Rectangle(0,0,BingoBackGroundSetting.gameSize.x,BingoBackGroundSetting.gameSize.y),0,!1,.5),this.shadow.touchEnabled=!0),this.addChild(this.shadow),this.modalPreloader||(this.modalPreloader=Com.addBitmapAt(this,"modalGeneric_json.loader",BingoBackGroundSetting.gameSize.x>>1,BingoBackGroundSetting.gameSize.y>>1),this.modalPreloader.anchorOffsetX=this.modalPreloader.width>>1,this.modalPreloader.anchorOffsetY=this.modalPreloader.height>>1),this.addChild(this.modalPreloader),this.modalPreloader.addEventListener(egret.Event.ENTER_FRAME,this.onLoadingAnimation,this,!1)},BingoGameMain.prototype.onLoadingAnimation=function(t){t.currentTarget.rotation+=5},BingoGameMain.prototype.addPo=function(t){void 0===t&&(t=null),this.addPoFromTo(.2,1)},BingoGameMain.prototype.addPhonePo=function(t){void 0===t&&(t=null),this.addPoFromTo(.1,.48)},BingoGameMain.prototype.addPoFromTo=function(t,e){this.currentPo.x=BingoBackGroundSetting.gameSize.x>>1,this.currentPo.y=BingoBackGroundSetting.gameSize.y>>1,this.currentPo.scaleX=t,this.currentPo.scaleY=t,this.currentPo.addEventListener(GenericModal.CLOSE_MODAL,this.closeCurrentPo,this),this.addChild(this.currentPo);var a=egret.Tween.get(this.currentPo);a.to({scaleX:e,scaleY:e},300),this.modalPreloader.removeEventListener(egret.Event.ENTER_FRAME,this.onLoadingAnimation,this,!1),this.removeChild(this.modalPreloader)},BingoGameMain.prototype.closeCurrentPo=function(){if(this.currentPo){var t=egret.Tween.get(this.currentPo);t.to({scaleX:.1,scaleY:.1},300),t.call(function(){this.removeChild(this.currentPo),this.removeChild(this.shadow)},this),t.wait(100),t.call(function(){this.currentPo=null},this)}},BingoGameMain.prototype.showBank=function(t){void 0===t&&(t=null),this.showShadow();for(var e,a,n,i=PlayerConfig.player("external_contents").list,o=0;o<i.length;o++){if("bank"==i[o].type){var r=i[o].art[0].file.file_id_html5;e=r.replace(/.*\/(.*)\//,"$1"),a=r+"load.js",n=r+"data.res.json",GlobelSettings.bank=i[o].products}"chipbank"==i[o].type&&(GlobelSettings.chipBank=i[o].products)}this.loadDynamicClass(e,n,a)},BingoGameMain.prototype.loadDynamicClass=function(className,assetConfigUrl,classUrl){var cls=egret.getDefinitionByName(className);if(cls)return void this.showPoWithClassName(className,assetConfigUrl);var s=document.createElement("script");s.async=!1,s.src=classUrl,trace("I am loading "+classUrl),LoyaltyVo.init(PlayerConfig.player("loyalty")),s.addEventListener("load",function(){s.parentNode.removeChild(s),s.removeEventListener("load",eval("arguments.callee"),!1),egret.getDefinitionByName(className).needZoomOut=null==egret.getDefinitionByName(className).needZoomOut?!0:!1,this.showPoWithClassName(className,assetConfigUrl)}.bind(this),!1),document.head.appendChild(s)},BingoGameMain.prototype.showPoWithClassName=function(t,e){var a=egret.getDefinitionByName(t);this.showPoWithClass(a,e)},BingoGameMain.prototype.showPoWithClass=function(myClass,assetConfigUrl){this.currentPo=eval("new myClass(assetConfigUrl)"),this.currentPo.needZoomOut=eval("myClass").needZoomOut,this.currentPo.inited?this.addPhonePo():this.currentPo.addEventListener(GenericModal.GENERIC_MODAL_LOADED,this.addPhonePo,this)},BingoGameMain.prototype.showChipBank=function(t){void 0===t&&(t=null),GlobelSettings.bankOpenType=1,this.showBank(t)},BingoGameMain.prototype.showCoinBank=function(t){void 0===t&&(t=null),GlobelSettings.bankOpenType=0,this.showBank(t)},BingoGameMain}(egret.DisplayObjectContainer);__reflect(BingoGameMain.prototype,"BingoGameMain");var BrowserInfo=function(){function t(){}return t.getBrowserInfo=function(){var t={},e=navigator.userAgent.toLowerCase(),a=/(msie|firefox|chrome|opera|version).*?([\d.]+)/,n=e.match(a);try{t.browser=n[1].replace(/version/,"'safari"),t.ver=n[2]}catch(i){trace("no browser info")}return t},Object.defineProperty(t,"textUp",{get:function(){if(!this.textNeedUpHasTested){var t=this.getBrowserInfo();if(this.textNeedUpInThisBrowser=0,"chrome"==t.browser){var e=t.ver.split(".");e[0]&&parseInt(e[0])>=71&&e[2]&&parseInt(e[2])>=3550&&(this.textNeedUpInThisBrowser=2)}this.textNeedUpHasTested=!0}return this.textNeedUpInThisBrowser},enumerable:!0,configurable:!0}),t}();__reflect(BrowserInfo.prototype,"BrowserInfo");var CardGridColorAndSizeSettings=function(){function t(){}return t.colorSetting=function(t){this.numberColor=t.numberColor,this.numberColorOnEffect=t.numberColorOnEffect,this.colorNumberOnEffect=t.colorNumberOnEffect
},t.sizeSetting=function(t){this.gridSize=new egret.Point(t.numberSizeX,t.numberSizeY),this.gridSpace=new egret.Point(this.gridSize.x+t.vertGap,this.gridSize.y+t.horzGap)},t}();__reflect(CardGridColorAndSizeSettings.prototype,"CardGridColorAndSizeSettings");var CardGridUISettings=function(){function t(){}return t.getSettingStrings=function(t){this.blink1PicName=t.blink1,this.blink2PicName=t.blink2,this.defaultBgPicName=t.defaultBg,this.onEffBgPicName=t.onEffBg,this.linePicName=t.line,this.usefork=t.usefork},t.initGridAssets=function(){this.defaultBgPicTexture=Com.createBitmapByName(BingoMachine.getAssetStr(this.defaultBgPicName)),this.onEffBgPicTexture=Com.createBitmapByName(BingoMachine.getAssetStr(this.onEffBgPicName)),this.blink1PicTexture=Com.createBitmapByName(BingoMachine.getAssetStr(this.blink1PicName)),this.blink2PicTexture=Com.createBitmapByName(BingoMachine.getAssetStr(this.blink2PicName)),this.linePicTexture=Com.createBitmapByName(BingoMachine.getAssetStr(this.linePicName))},t}();__reflect(CardGridUISettings.prototype,"CardGridUISettings");var GameCardUISettings=function(){function t(){}return t.dataSetting=function(t){this.titleColors=t.titleColors,this.bgString=t.cardBg,this.cardPositions=[];for(var e=0;e<t.cardPositions.length;e++){var a=t.cardPositions;this.cardPositions[e]=new egret.Point(a[e].x,a[e].y)}},t.colorSetting=function(t){this.texColor=t.textColor},t.sizeSetting=function(t){this.gridNumbers=new egret.Point(t.vertSize,t.horzSize),this.gridInitPosition=new egret.Point(t.numberInitialPositionX,t.numberInitialPositionY);var e=new egret.Rectangle(t.cardTextPositionX,t.cardTextPositionY,t.cardTextSizeX,t.cardTextSizeY);e.width>1&&(this.cardTextRect=e);var a=new egret.Rectangle(t.betTextPositionX,t.betTextPositionY,t.betTextSizeX,t.betTextSizeY);a.width>1&&(this.betTextRect=a)},Object.defineProperty(t,"cardTitleColor",{get:function(){return this.titleColors[this.currentBgColorIndex]},enumerable:!0,configurable:!0}),t.changeBgColor=function(){this.currentBgColorIndex++,this.currentBgColorIndex>=this.titleColors.length&&(this.currentBgColorIndex=0)},t.getIndexOnCard=function(t){var e=this.gridNumbers.x*this.gridNumbers.y,a=Math.floor(t/e),n=t%e,i=new egret.Point(a,n);return i},t.positionOnCard=function(t,e){var a=new egret.Point;return a.x=this.cardPositions[t].x+this.gridInitPosition.x+e%this.gridNumbers.x*CardGridColorAndSizeSettings.gridSpace.x,a.y=this.cardPositions[t].y+this.gridInitPosition.y+Math.floor(e/this.gridNumbers.x)*CardGridColorAndSizeSettings.gridSpace.y,a},t.setTargetToPositionOnCard=function(t,e,a){var n=this.positionOnCard(e,a);t.x=n.x,t.y=n.y},t.numberAtCard=function(t,e){return CardManager.cards[t].getNumberAt(e)},t.currentBgColorIndex=0,t.gridOnTop=!0,t}();__reflect(GameCardUISettings.prototype,"GameCardUISettings");var ConFirmBar=function(t){function e(e){var a=t.call(this)||this;GraphicTool.drawRect(a,new egret.Rectangle(-e.x>>1,-e.y>>1,e.x+100,e.y),0,!1,0),a.touchEnabled=!0;var n=Com.addBitmapAt(a,"gameSettings_json.bg_popup",-610,-320);n.scale9Grid=new egret.Rectangle(60,60,911,706),n.width=1110,n.height=535;var i=Com.addLabelAt(a,-510,-245,910,72,72,!1,!0);i.text=MuLang.getText("change_language");var o=Com.addLabelAt(a,-510,-120,910,100,48);o.setText(MuLang.getText("change_language_tip"));var r=Com.addDownButtonAt(a,"gameSettings_json.OK","gameSettings_json.OK",-485,50,a.closeThisBar.bind(a),!0),s=Com.addTextAt(a,0,0,20,55,55);s.fontFamily="Righteous",s.text=MuLang.getText("cancel"),r.setButtonText(s);var l=Com.addDownButtonAt(a,"gameSettings_json.OK","gameSettings_json.OK",5,50,a.confirmChange.bind(a),!0),c=Com.addTextAt(a,0,0,20,55,55);return c.fontFamily="Righteous",c.text=MuLang.getText("confirm"),l.setButtonText(c),a}return __extends(e,t),e.prototype.closeThisBar=function(){this.parent&&this.parent.removeChild(this)},e.prototype.confirmChange=function(t){LanguageBar.confirmChange()},e}(egret.Sprite);__reflect(ConFirmBar.prototype,"ConFirmBar");var GameSettingItem=function(t){function e(a,n,i,o){var r=t.call(this)||this,s=Com.addBitmapAt(r,"gameSettings_json.tab_bg",0,0);s.width=1040,s.height=140,Com.addBitmapAtMiddle(r,"gameSettings_json."+a,90,70+o);var l=MDS.addGameText(r,180,35,54,16777215,n,!0,600,"",1);return l.height=75,e.settingTextFormat(l),r.addChild(i),r.cacheAsBitmap=!0,r}return __extends(e,t),e.settingTextFormat=function(t){t.fontFamily="Righteous",t.stroke=2,t.strokeColor=197451,t.filters=[new egret.DropShadowFilter(5,45,0,.5,4,4,2,1)]},e}(egret.DisplayObjectContainer);__reflect(GameSettingItem.prototype,"GameSettingItem");var GameSettingPopup=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"classAssetName",{get:function(){return"gameSettings"},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.bgAssetName="gameSettings_json.bg",this.closeButtonAssetName="gameSettings_json.X_btn",t.prototype.init.call(this),this.bg.width=1240,this.bg.height=990,this.anchorOffsetX=this.bg.width>>1,this.anchorOffsetY=this.bg.height>>1,this.closeButton.x=this.bg.width,this.addScrollArea(new egret.Rectangle(62,41,1040,910)),this.addItems(),this.addTitleAndVertion(),this.addLanguageBar(),this.scrollSlider=new SettingSlider,Com.addObjectAt(this,this.scrollSlider,1150,70),this.scrollSlider.addEventListener("startDrag",this.onStartDrag,this),this.scrollSlider.addEventListener("stopDrag",this.onStopDrag,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)},e.prototype.onRemove=function(t){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onFrame,this)},e.prototype.addScrollArea=function(t){this.scrollArea=new egret.ScrollView,this.scrollArea.width=t.width,this.scrollArea.height=t.height,Com.addObjectAt(this,this.scrollArea,t.x,t.y),this.scrollBar=new egret.DisplayObjectContainer,this.scrollArea.setContent(this.scrollBar)},e.prototype.addItem=function(t,e,a,n,i){void 0===i&&(i=0);var o=new GameSettingItem(e,a,n,i);o.y=150*t,this.scrollBar.addChild(o)},e.prototype.addButtonText=function(t,e){void 0===e&&(e=null);var a=Com.addLabelAt(t,10,0,t.width-20,t.height,48);GameSettingItem.settingTextFormat(a),e&&a.setText(MuLang.getText(e,MuLang.CASE_UPPER))},e.prototype.addLoginButtonText=function(t,e){void 0===e&&(e=null);var a=Com.addLabelAt(t,90,0,t.width-100,t.height,48);GameSettingItem.settingTextFormat(a),a.textAlign="left",e&&a.setText(MuLang.getText(e,MuLang.CASE_UPPER))},e.prototype.addItems=function(){var t=Com.addDownButtonAt(this,"gameSettings_json.support_btn","gameSettings_json.support_btn",700,18,this.logout.bind(this),!0);this.addButtonText(t,"logout");var e=this.getPlayerType(),a=0;this.addItem(a++,"avatar",MuLang.getText(e,MuLang.CASE_UPPER)+":   "+PlayerConfig.player("user_id"==e?"user.id":e),t),"facebook_id"==e&&this.getFacebookAvatar();var n=Com.addDownButtonAt(this,"gameSettings_json.support_btn","gameSettings_json.support_btn",700,18,this.showLangugeBar.bind(this),!0);if(Com.addBitmapAtMiddle(n,"gameSettings_json.flag_"+MuLang.language,n.width>>1,n.height>>1),Com.addBitmapAtMiddle(n,"gameSettings_json.btn_arrow",n.width-45,n.height>>1),this.addItem(a++,"language_icon","language",n,5),PlayerConfig.properties.indexOf("network=facebook")<0){var i=new egret.DisplayObjectContainer,o=Com.addDownButtonAt(i,"gameSettings_json.gl_bt_settings","gameSettings_json.gl_bt_settings",380,18,this.gotoLoginPage.bind(this),!0),r=Com.addDownButtonAt(i,"gameSettings_json.fb_bt_settings","gameSettings_json.fb_bt_settings",700,18,this.gotoLoginPage.bind(this),!0);this.addLoginButtonText(o,"login"),this.addLoginButtonText(r,"login"),this.addItem(a++,"icon_connect","link",i)}var s=Com.addDownButtonAt(this,"gameSettings_json.support_btn","gameSettings_json.support_btn",700,18,this.suport.bind(this),!0);this.addButtonText(s,"contact"),this.addItem(a++,"support_icon","support",s,5);var l=Com.addDownButtonAt(this,"gameSettings_json.support_btn","gameSettings_json.support_btn",700,18,this.rateStar.bind(this),!0);this.addButtonText(l,"rate_us"),this.addItem(a++,"rate_icon","rate_us",l,5),this.soundEffectBtn=new SettingsCheckbox(this.soundEffectChange.bind(this)),this.soundEffectBtn.RadioOn=SoundManager.soundEfOn,this.addItem(a++,"sound_fx_icon","sound_effect_on",this.soundEffectBtn,5),this.musicBtn=new SettingsCheckbox(this.musicChange.bind(this)),this.musicBtn.RadioOn=SoundManager.soundOn,this.addItem(a++,"music_icon","music_on",this.musicBtn,5),this.visualEffectBtn=new SettingsCheckbox(this.visualEffectChange.bind(this)),this.visualEffectBtn.RadioOn=GameSettings.visualEffectOn,this.addItem(a++,"visual_fx_icon","effect_on",this.visualEffectBtn,5),this.notificationBtn=new SettingsCheckbox(this.notificationChange.bind(this)),this.notificationBtn.RadioOn=GameSettings.notificationOn,this.addItem(a++,"icon_notification",MuLang.getText("notification"),this.notificationBtn,5)},e.prototype.getFacebookAvatar=function(){var t=this.scrollBar.getChildAt(0),e=t.getChildAt(1);FacebookBitmap.downloadBitmapDataByFacebookID(PlayerConfig.player("facebook.id"),100,100,MDS.onUserHeadLoaded.bind(this,e,100),this)},e.prototype.getPlayerType=function(){return PlayerConfig.player("facebook_id")?"facebook_id":PlayerConfig.player("custom_id")?"custom_id":PlayerConfig.player("google_id")?"google_id":PlayerConfig.player("guest_id")?"guest_id":"user_id"},e.prototype.addTitleAndVertion=function(){var t=Com.addLabelAt(this,0,-40,this.bg.width,65,50);GameSettingItem.settingTextFormat(t),t.setText(MuLang.getText("settings",MuLang.CASE_UPPER));var e=MDS.addGameText(this,100,975,40,16777215,"",!0,525,"",1);e.height=50,GameSettingItem.settingTextFormat(e),e.setText(MuLang.getText("settings",MuLang.CASE_UPPER)+":     "+GameSettings.vertion);var a=MDS.addGameText(this,720,975,40,16777215,"",!0,650,"",1);a.height=50,GameSettingItem.settingTextFormat(a),a.setText(MuLang.getText("user_id",MuLang.CASE_UPPER)+":     "+PlayerConfig.player("user.id"))},e.prototype.addLanguageBar=function(){this.languageBar=new LanguageBar,this.languageBar.visible=!1,this.languageBar.addEventListener("showConfirm",this.showConfirm,this),Com.addObjectAt(this.scrollBar,this.languageBar,708,280)},e.prototype.logout=function(){localStorage.removeItem("player"),localStorage.removeItem("user_account_info"),window.location.href="/"},e.prototype.showLangugeBar=function(){this.languageBar.visible=!this.languageBar.visible},e.prototype.gotoLoginPage=function(){this.logout()},e.prototype.suport=function(){Com.addObjectAt(this,new SupportBar(new egret.Point(this.bg.width,this.bg.height)),this.bg.width>>1,this.bg.height>>1)},e.prototype.rateStar=function(){Com.addObjectAt(this,new RateBar(new egret.Point(this.bg.width,this.bg.height)),this.bg.width>>1,this.bg.height>>1)},e.prototype.soundEffectChange=function(){this.soundEffectBtn.RadioOn=SoundManager.soundEfOn=!SoundManager.soundEfOn},e.prototype.musicChange=function(){this.musicBtn.RadioOn=SoundManager.soundOn=!SoundManager.soundOn},e.prototype.visualEffectChange=function(){this.visualEffectBtn.RadioOn=GameSettings.visualEffectOn=!GameSettings.visualEffectOn},e.prototype.notificationChange=function(){this.notificationBtn.RadioOn=GameSettings.notificationOn=!GameSettings.notificationOn},e.prototype.onFrame=function(t){this.sliderDraging?this.scrollArea.scrollTop=this.scrollSlider.scrollTop*this.scrollArea.getMaxScrollTop():this.scrollSlider.setSliderPosition(this.scrollArea.getMaxScrollTop(),this.scrollArea.scrollTop)},e.prototype.onStartDrag=function(t){this.sliderDraging=!0},e.prototype.onStopDrag=function(t){this.sliderDraging=!1},e.prototype.showConfirm=function(){Com.addObjectAt(this,new ConFirmBar(new egret.Point(this.bg.width,this.bg.height)),this.bg.width>>1,this.bg.height>>1)},e}(GenericPo);__reflect(GameSettingPopup.prototype,"GameSettingPopup");var GameSettings=function(){function t(){}return Object.defineProperty(t,"visualEffectOn",{get:function(){return"false"==egret.localStorage.getItem("visualEffect")?!1:!0},set:function(t){this.visualEffectOn!=t&&egret.localStorage.setItem("visualEffect",t?"":"false")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"notificationOn",{get:function(){return"false"==egret.localStorage.getItem("notification")?!1:!0},set:function(t){this.notificationOn!=t&&egret.localStorage.setItem("notification",t?"":"false")},enumerable:!0,configurable:!0}),t.vertion="2.6.2",t}();__reflect(GameSettings.prototype,"GameSettings");var trace=function(t){egret.log(t)},LanguageBar=function(t){function e(){var a=t.call(this)||this;GraphicTool.drawRect(a,new egret.Rectangle(0,0,308,268),9864451,!1,1,50,2,16776565),a.touchEnabled=!0,a.touchChildren=!1,a.addEventListener(egret.TouchEvent.TOUCH_BEGIN,a.onTouch,a),a.addEventListener(egret.TouchEvent.TOUCH_CANCEL,a.onTouch,a),a.addEventListener(egret.TouchEvent.TOUCH_END,a.onTouch,a),a.addEventListener(egret.TouchEvent.TOUCH_MOVE,a.onTouch,a),a.addEventListener(egret.TouchEvent.TOUCH_TAP,a.onTap,a),a.rects=[],a.languageArr=["pt","en","es"];for(var n=0;3>n;n++)a.rects[n]=new egret.Rectangle(10,8+90*n,285,70),GraphicTool.drawRect(a,a.rects[n],9864451,!1,1,20,2,16776565),Com.addBitmapAtMiddle(a,"gameSettings_json.flag_"+a.languageArr[n],.5*a.rects[n].width+a.rects[n].x,.5*a.rects[n].height+a.rects[n].y);return e.instance=a,a}return __extends(e,t),e.prototype.onTouch=function(t){t.stopImmediatePropagation()},e.prototype.onTap=function(t){for(var a=new egret.Point(t.localX,t.localY),n=0;3>n;n++)if(this.rects[n].containsPoint(a)){this.visible=!1,MuLang.language!=this.languageArr[n]&&(e.changeIndex=n,this.showConfirm());break}},e.prototype.showConfirm=function(){this.dispatchEvent(new egret.Event("showConfirm"))},e.confirmChange=function(){MuLang.language=this.instance.languageArr[this.changeIndex],window.location.reload()},e}(egret.Sprite);__reflect(LanguageBar.prototype,"LanguageBar");var RateBar=function(t){function e(e){var a=t.call(this)||this;GraphicTool.drawRect(a,new egret.Rectangle(-e.x>>1,-e.y>>1,e.x+100,e.y),0,!1,0),a.touchEnabled=!0,a.langResource="rate_us_json",a.bg=Com.addBitmapAtMiddle(a,a.langResource+".M",0,0);var n=MDS.addGameText(a,-370,-260,48,2236962,"rate_us_now",!1,740,"",1);n.textAlign="center",n.text=n.text.toUpperCase();var i=MDS.addGameText(a,-370,-180,35,5592405,"how_to_rate",!1,740,"",1);i.textAlign="center",Com.addBitmapAt(a,a.langResource+".doctor",100,-130),a.stars=[],a.goldStars=[];for(var o=0;5>o;o++)a.stars[o]=Com.addDownButtonAt(a,a.langResource+".Star_b",a.langResource+".Star_b",-290+115*o,-120,a.rate.bind(a),!0),a.stars[o].name=""+o,a.goldStars[o]=Com.addBitmapAt(a,a.langResource+".Star",-290+115*o,-120),a.goldStars[o].visible=!1;return a.closeBtn=Com.addDownButtonAt(a,a.langResource+".roomCloseButton",a.langResource+".roomCloseButton",a.bg.width>>1,-a.bg.height>>1,a.closeThisBar.bind(a),!0),a.closeBtn.x-=a.closeBtn.width,a}return __extends(e,t),e.prototype.rate=function(t){for(var e=t.target,a=Number(e.name),n=0;5>n;n++)this.stars[n].enabled=!1,a>=n&&(this.goldStars[n].visible=!0);this.dealWithIndex(a)},e.prototype.closeThisBar=function(){this.parent&&this.parent.removeChild(this)},e.prototype.dealWithIndex=function(t){3>t?this.showOkButton():setTimeout(this.delayOpenWindow.bind(this),300)},e.prototype.delayOpenWindow=function(){this.closeThisBar(),Math.random()>.5?window.open("https://itunes.apple.com/app/doctor-bingo-free-bingo-slots/id1152226735"):window.open("https://play.google.com/store/apps/details?id=com.gamesmartltd.doctorbingo")},e.prototype.showOkButton=function(){var t=Com.addDownButtonAt(this,this.langResource+".BUY COINS",this.langResource+".BUY COINS",-132,150,this.closeThisBar.bind(this),!0),e=Com.addTextAt(this,0,0,40,40,50,!1,!0);t.setButtonText(e),e.textColor=0,e.text="OK"},e}(egret.Sprite);__reflect(RateBar.prototype,"RateBar");var SettingsCheckbox=function(t){function e(e){var a=t.call(this)||this;return a.bg=Com.addBitmapAt(a,"gameSettings_json.bg_slider_on",0,0),a.bar=Com.addBitmapAt(a,"gameSettings_json.slider_switch",77,2),a.touchChildren=!1,a.touchEnabled=!0,a.x=855,a.y=32,a.callback=e,a.addEventListener(egret.TouchEvent.TOUCH_TAP,a.onTap,a),a}return __extends(e,t),Object.defineProperty(e.prototype,"RadioOn",{get:function(){return this._radioOn},set:function(t){this._radioOn=t,t?(this.bg.texture=RES.getRes("gameSettings_json.bg_slider_on"),this.bar.x=77):(this.bg.texture=RES.getRes("gameSettings_json.bg_slider_off"),this.bar.x=0)},enumerable:!0,configurable:!0}),e.prototype.onTap=function(t){this.callback()},e}(egret.DisplayObjectContainer);__reflect(SettingsCheckbox.prototype,"SettingsCheckbox");var GlobelSettings=function(){function t(){}return Object.defineProperty(t,"language",{get:function(){return MuLang.language},enumerable:!0,configurable:!0}),t}();__reflect(GlobelSettings.prototype,"GlobelSettings");var SupportBar=function(_super){function SupportBar(t){var e=_super.call(this)||this;return GraphicTool.drawRect(e,new egret.Rectangle(-t.x>>1,-t.y>>1,t.x+100,t.y),0,!1,0),e.touchEnabled=!0,e.langResource="support_json",e.email=PlayerConfig.player("facebook.email")||PlayerConfig.player("user_info.email")||"",e.buildBg(),e.buildTitleText(),e.buildSupportText(),e.buildSupportBtn(),e.buildCloseBtn(),e}return __extends(SupportBar,_super),SupportBar.prototype.buildBg=function(){this.bg=Com.addBitmapAt(this,this.langResource+".popup_bg_big",-623,-377),this.bg.scale9Grid=new egret.Rectangle(40,40,569,609),this.bg.width=1247,this.bg.height=755},SupportBar.prototype.buildTitleText=function(){var t=Com.addTextAt(this,-538,-349,432,88,64,!0,!1);t.fontFamily="TCM_conden",t.textAlign="left",t.verticalAlign="middle",t.bold=!0,t.stroke=4,t.textColor=13681565,t.strokeColor=13216071,t.text=MuLang.getText("e_support",MuLang.CASE_UPPER);var e=new egret.DisplayObjectContainer;Com.addObjectAt(this,e,-438,-262);var a=Com.addBitmapAt(e,this.langResource+".select_box",0,0);a.scale9Grid=new egret.Rectangle(11,11,27,27),a.width=980,a.height=83,this.topTextInput=new eui.EditableText,Com.addObjectAt(e,this.topTextInput,20,0),this.topTextInput.width=940,this.topTextInput.height=83,this.topTextInput.size=48,this.topTextInput.verticalAlign="middle",this.topTextInput.fontFamily="TCM_conden",this.topTextInput.bold=!0,this.topTextInput.textColor=16777215,this.topTextInput.text=this.email,this.topTextInput.prompt=MuLang.getText("email",MuLang.CASE_UPPER),Com.addBitmapAt(this,this.langResource+".icon_zendesk",-533,-259)},SupportBar.prototype.buildSupportText=function(){var t=Com.addTextAt(this,-539,-172,313,53,42,!1,!1);t.fontFamily="TCM_conden",t.textAlign="left",t.verticalAlign="middle",t.textColor=11569179,t.text=MuLang.getText("message",MuLang.CASE_UPPER);var e=new egret.DisplayObjectContainer;e.width=1084,e.height=445,Com.addObjectAt(this,e,-540,-119);var a=Com.addBitmapAt(e,this.langResource+".select_box",0,0);a.scale9Grid=new egret.Rectangle(11,11,27,27),a.width=1084,a.height=445,this.supportTextInput=Com.addTextAt(e,20,20,1044,405,36,!1,!1),this.supportTextInput.fontFamily="TCM_conden",this.supportTextInput.textAlign="left",this.supportTextInput.bold=!0,this.supportTextInput.multiline=!0,this.supportTextInput.wordWrap=!0,this.supportTextInput.type=egret.TextFieldType.INPUT,this.supportTextInput.textColor=16777215},SupportBar.prototype.buildSupportBtn=function(){var t=Com.addDownButtonAt(this,this.langResource+".button_send",this.langResource+".button_send",388,209,this.sendSupport.bind(this),!0),e=Com.addTextAt(this,31,18,133,90,48,!0,!1);e.fontFamily="TCM_conden",e.verticalAlign="middle",e.stroke=2,e.strokeColor=346885,e.text=MuLang.getText("send"),t.addChild(e)},SupportBar.prototype.buildCloseBtn=function(){this.closeBtn=Com.addDownButtonAt(this,this.langResource+".button_close",this.langResource+".button_close",this.bg.width>>1,-this.bg.height>>1,this.closeThisBar.bind(this),!0),this.closeBtn.x-=this.closeBtn.width>>1,this.closeBtn.y-=this.closeBtn.height>>1},SupportBar.prototype.buildAlertBar=function(){var t=new egret.Sprite;Com.addObjectAt(this,t,0,0),GraphicTool.drawRect(t,new egret.Rectangle(-1e3,-500,2e3,1e3),0,!1,0),t.touchEnabled=!0;var e=Com.addBitmapAt(t,"gameSettings_json.bg_popup",-700,-300);e.scale9Grid=new egret.Rectangle(60,60,911,706),e.width=1120,e.height=515;var a=Com.addLabelAt(t,-600,-220,920,76,76);a.text=MuLang.getText("oops");var n=Com.addLabelAt(t,-600,-60,920,48,48);n.setText(MuLang.getText("enter_correct_info"));var i=Com.addBitmapAt(t,"gameSettings_json.dr",300,-380);i.scaleX=i.scaleY=1.1;var o=Com.addDownButtonAt(t,"gameSettings_json.OK","gameSettings_json.OK",-325,50,this.closeAlertBar.bind(this),!0),r=Com.addTextAt(t,0,0,20,72,72);return r.text="OK",o.setButtonText(r),t},SupportBar.prototype.closeAlertBar=function(t){this.alertBar.visible=!1},SupportBar.prototype.sendSupport=function(){var exp=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!exp.test(this.topTextInput.text))return this.alertBar||(this.alertBar=this.buildAlertBar()),void(this.alertBar.visible=!0);this.email=this.topTextInput.text;var value=this.supportTextInput.text;if(""!==value&&""!==this.email){var XHR=eval("window.XMLHttpRequest")?new XMLHttpRequest:eval("new ActiveXObject('Microsoft.XMLHTTP')");XHR.open("post","https://gamesmartltd.zendesk.com/api/v2/tickets.json",!0),XHR.setRequestHeader("Accept","application/json"),XHR.setRequestHeader("Content-Type","application/json"),XHR.setRequestHeader("Authorization","Basic YW55QGRvdXRvcmJpbmdvLmNvbTpCaW5nbzQ1NiE="),XHR.send(JSON.stringify({ticket:{subject:value.length>40?value.substring(0,40):value,comment:{body:value},requester:{name:PlayerConfig.player("facebook.name"),email:this.email},tags:["canvas","userid_"+PlayerConfig.player("user.id"),"level_"+PlayerConfig.player("score.level"),"loyalty_level_"+PlayerConfig.player("loyalty.loyalty_level")]}})),egret.setTimeout(function(){this.buildSupportSuccessContainer()},this,2e3)}},SupportBar.prototype.closeThisBar=function(){this.parent&&this.parent.removeChild(this)},SupportBar.prototype.buildSupportSuccessContainer=function(){this.supportSuccessContainer=new egret.DisplayObjectContainer,Com.addObjectAt(this,this.supportSuccessContainer,-623,-377);var t=Com.addBitmapAt(this.supportSuccessContainer,this.langResource+".popup_bg_big",0,0);t.scale9Grid=new egret.Rectangle(40,40,569,609),t.width=1247,t.height=755;var e=Com.addTextAt(this.supportSuccessContainer,208,124,830,127,64,!1,!1);e.fontFamily="TCM_conden",e.textColor=16777215,e.verticalAlign="middle",e.text=Utils.toFirstUpperCase(MuLang.getText("FACEBOOK_WAIT_CONGRATULATIONS_TITLE"));var a=Com.addTextAt(this.supportSuccessContainer,84,294,1079,262,48,!1,!1);a.fontFamily="TCM_conden",a.textColor=16777215,a.text=MuLang.getText("support_success_text"),this.addChild(this.closeBtn)},SupportBar}(egret.Sprite);__reflect(SupportBar.prototype,"SupportBar");var GanhoCounter=function(){function t(t){void 0===t&&(t=null),this.ganhoArray=[],this.winCallback=t}return t.prototype.clearGanhoData=function(){this.ganhoArray=[]},t.prototype.countGanhoAndPlayAnimation=function(t){var e=this.getFitItemOnCard(t),a=this.getGanhoArray(t,e);this.showWinAnimationOnAllCards(a)},t.prototype.showWinAnimationOnAllCards=function(t){for(var e=0;e<t.length;e++)t[e]&&(!this.ganhoArray[e]||t[e]>this.ganhoArray[e])&&(this.ganhoArray[e]=t[e],this.winCallback&&this.winCallback(e,t[e]))},t.prototype.getFitItemOnCard=function(t){for(var e=[],a=0;a<t.length;a++){e[a]=[];for(var n in PayTableManager.payTablesDictionary){var i=t[a][n];(i.fit||i.fits)&&e[a].push({paytalbe:n,fit:i.fit,fits:i.fits})}}if(PaytableFilter.filterObject)for(var a=0;a<e.length;a++)PaytableFilter.paytableConfixFilter(e[a],!0);return e},t.prototype.getGanhoArray=function(t,e){for(var a=[],n=0;n<t.length;n++){a[n]=0;for(var i in PayTableManager.payTablesDictionary){var o=t[n][i];if(o.fit||o.fits){for(var r=!1,s=0;s<e[n].length;s++)if(e[n][s].paytalbe==i){r=!0;break}if(!r)continue;this.countGanho(a,n,i,o)}}}return a},t.prototype.countGanho=function(t,e,a,n){var i=PayTableManager.payTablesDictionary[a].ui.tx.text;t[e]+=parseFloat(i.replace(/\D/,""))},t}();__reflect(GanhoCounter.prototype,"GanhoCounter");var Coin=function(t){function e(){var a=t.call(this,e.mcf.generateMovieClipData("flyingCoins"))||this;return a.anchorOffsetX=a.width>>1,a.anchorOffsetY=a.height>>1,a}return __extends(e,t),Object.defineProperty(e,"mcf",{get:function(){if(!this._mcf){var t=RES.getRes("flyingCoins_json"),e=RES.getRes("flyingCoins_png");this._mcf=new egret.MovieClipDataFactory(t,e)}return this._mcf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"factor",{get:function(){return 0},set:function(t){var e=1-t,a=e*e,n=t*t,i=2*t*e;this.x=a*this.startPosition.x+i*this.middlePosition.x+n*this.endPosition.x,this.y=a*this.startPosition.y+i*this.middlePosition.y+n*this.endPosition.y,this.scaleX=this.scaleY=a*this.startScale+i*this.middleScale+n*this.endScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vY",{get:function(){return this._vy},set:function(t){this._vy=t,this.y+=t},enumerable:!0,configurable:!0}),e}(egret.MovieClip);__reflect(Coin.prototype,"Coin");var DataServer=function(){function t(){}return t.prototype.getDataFromUrl=function(t,e,a,n,i,o){void 0===n&&(n=!0),void 0===o&&(o=null);var r=new egret.URLLoader;this.callback=e,this.thisObject=a,this.failedCallback=o,r.addEventListener(egret.Event.COMPLETE,this.loadComplete,this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,this.loadFaild,this),r.dataFormat=egret.URLLoaderDataFormat.TEXT,t=t.concat((t.indexOf("?")>=0?"&":"?").concat(PlayerConfig.properties));var s=new egret.URLRequest(t);s.method=n?egret.URLRequestMethod.POST:egret.URLRequestMethod.GET;var l=new egret.URLVariables;l.variables=i,s.data=l,r.load(s)},t.prototype.loadComplete=function(t){this.callback.call(this.thisObject,t.target.data)},t.prototype.loadFaild=function(t){this.failedCallback&&this.failedCallback.call(this.thisObject,t.type)},t}();__reflect(DataServer.prototype,"DataServer");var Dinero=function(t){function e(){var a=t.call(this,e.mcf.generateMovieClipData("flyingDinero1"))||this;return a.anchorOffsetX=a.width>>1,a.anchorOffsetY=a.height>>1,a}return __extends(e,t),Object.defineProperty(e,"mcf",{get:function(){if(!this._mcf){var t=RES.getRes("flyingCoins_json"),e=RES.getRes("flyingCoins_png");this._mcf=new egret.MovieClipDataFactory(t,e)}return this._mcf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"factor",{get:function(){return 0},set:function(t){var e=1-t,a=e*e,n=t*t,i=2*t*e;this.x=a*this.startPosition.x+i*this.middlePosition.x+n*this.endPosition.x,this.y=a*this.startPosition.y+i*this.middlePosition.y+n*this.endPosition.y,this.scaleX=this.scaleY=a*this.startScale+i*this.middleScale+n*this.endScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vY",{get:function(){return this._vy},set:function(t){this._vy=t,this.y+=t},enumerable:!0,configurable:!0}),e}(egret.MovieClip);__reflect(Dinero.prototype,"Dinero");var DropCoins=function(t){function e(e){var a=t.call(this,RES.getRes("getCoinsParticle_png"),RES.getRes("getCoinsParticle_json"))||this;return a.start(400*(e+1)),TweenerTool.tweenTo(a,{rotation:0},500,1500,MDS.removeSelf.bind(a,a)),a}return __extends(e,t),e}(particle.GravityParticleSystem);__reflect(DropCoins.prototype,"DropCoins");var FacebookBitmap=function(){function t(){}return t.downloadBitmapDataByFacebookID=function(t,e,a,n,i){this.downloadBitmapDataByURL("https://graph.facebook.com/"+t+"/picture?width="+e+"&height="+a,n,i)},t.downloadBitmapDataByURL=function(t,e,a){var n=new egret.ImageLoader;n.once(egret.Event.COMPLETE,e,a),n.crossOrigin="anonymous",n.load(t)},t}();__reflect(FacebookBitmap.prototype,"FacebookBitmap");var FlyingCoins=function(t){function e(){var e=t.call(this)||this;return e.coinsMcs=[],e.dineroMcs=[],e}return __extends(e,t),e.prototype.fly=function(t,e,a,n,i,o,r){for(;this.coinsMcs.length<t;)this.coinsMcs.push(new Coin);this.coinsFly=this.coinsMcs.concat(),this.savePositions(e,a,n,i,o,r),this.gapDuration=30,this.startFly(),SoundManager.play("collect_coins_mp3")},e.prototype.flyDenero=function(t,e,a,n,i,o,r){for(;this.dineroMcs.length<t;)this.dineroMcs.push(new Dinero);this.coinsFly=this.dineroMcs.concat(),this.savePositions(e,a,n,i,o,r),this.gapDuration=80,this.startFly(),SoundManager.play("collect_coins_mp3")},e.prototype.savePositions=function(t,e,a,n,i,o){this.startPosition=t,this.endPosition=e,this.middlePosition=a,this.startScale=n,this.endScale=i,this.middleScale=o},e.prototype.startFly=function(){if(this.coinsFly.length){var t=this.coinsFly.shift();t.startPosition=this.startPosition,t.x=t.startPosition.x,t.y=t.startPosition.y,t.endPosition=this.endPosition,t.middlePosition=this.middlePosition,t.startScale=this.startScale,t.scaleX=t.scaleY=t.startScale,t.endScale=this.endScale,t.middleScale=this.middleScale,t.rotation=360*Math.random(),t.gotoAndPlay(Math.floor(Math.random()*t.totalFrames)),this.addChild(t),t.play(-1);var e=egret.Tween.get(t);e.wait(this.gapDuration),e.call(this.startFly,this),e.to({factor:1},800),e.call(this.endFly,this,[t])}},e.prototype.endFly=function(t){t.parent.removeChild(t),t.stop(),0===this.numChildren&&this.parent&&this.parent.removeChild(this)},e}(egret.DisplayObjectContainer);__reflect(FlyingCoins.prototype,"FlyingCoins");var LoadingUI=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onProgress=function(t,e){document.getElementById("loading_progress_div").style.width=Math.floor(320*(.18+t/e*.72+0))+"px"},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var LocalDataManager=function(){function LocalDataManager(){}return LocalDataManager.updatePlayerData=function(key,value){if(localStorage.getItem("player")){var str=localStorage.getItem("player"),ob=JSON.parse(str);try{eval("ob."+key+" = value")}catch(e){return}localStorage.setItem("player",JSON.stringify(ob))}},LocalDataManager.updatePlayerDatas=function(items){if(localStorage.getItem("player")){for(var str=localStorage.getItem("player"),ob=JSON.parse(str),i=0;i<items.length;i++)try{eval("ob."+items[i].key+" = items[i].value")}catch(e){return}localStorage.setItem("player",JSON.stringify(ob))}},LocalDataManager}();__reflect(LocalDataManager.prototype,"LocalDataManager");var JackpotLayer=function(t){function e(e,a,n,i,o,r,s,l,c,h,u,d){void 0===c&&(c=null),void 0===h&&(h=0),void 0===u&&(u=0),void 0===d&&(d=!1);var g=t.call(this)||this;return g.betConfig=i,g.x=e.x,g.y=e.y,g.jackpotLock=Com.addBitmapAt(g,BingoMachine.getAssetStr("jackpot_lock"),o.x,o.y),g.jackpotLock.touchEnabled=!0,c&&(g.tip=Com.addLabelAt(g,c.x,c.y,c.width,c.height,h,!1,!0),g.tip.textColor=u,g.tip.setText(MuLang.getText("jackpot"))),g.jackpotText=Com.addLabelAt(g,r.x,r.y,r.width,r.height,s,!1,!0),g.jackpotText.textColor=l,g.jackpotText.verticalAlign="middle",g.jackpotValue=g.countJackpotByRate(Math.round(a)),g.jackpotMinBet=n,d&&g.addChild(g.jackpotLock),g.tryJackpotMinBet(),g}return __extends(e,t),e.prototype.createJackpotTooltipAt=function(t,e){var a=this.x+t>this.parent.width/2,n=a?"right":"left";this.jackpotTooltip=new egret.DisplayObjectContainer,this.jackpotTooltip.width=370,this.jackpotTooltip.height=180,this.jackpotTooltip.anchorOffsetX=a?310:64,this.jackpotTooltip.anchorOffsetY=17,Com.addBitmapAt(this.jackpotTooltip,"jackpot_tooltip_json.tooltip_"+n,0,0);var i=Com.addTextAt(this.jackpotTooltip,21,42,327,120,18,!1,!1);i.fontFamily="Righteous",i.textColor=16777215,i.textAlign="center",i.verticalAlign="middle";var o=CardManager.cards.length;i.text=MuLang.getText("jackpot_tooltip").replace("{1}",this.jackpotMinBet*o+"").replace("{2}",o+""),Com.addObjectAt(this,this.jackpotTooltip,t,e)},Object.defineProperty(e.prototype,"jackpotValue",{get:function(){return this.jackpotCurrentTextValue},set:function(t){this.jackpotCurrentTextValue=t,this.jackpotText.setText(Utils.formatCoinsNumber(Math.round(t)))},enumerable:!0,configurable:!0}),e.prototype.countJackpotByRate=function(t){this.currentJackpotPool=t;
for(var e=0;e<this.betConfig.length;e++)if(GameData.currentBet==this.betConfig[e].bet)return t*this.betConfig[e].jackpotRate},e.prototype.changebet=function(){this.setJackpotNumber({acumulado:this.currentJackpotPool},!0)},e.prototype.setJackpotNumber=function(t,e){void 0===e&&(e=!1),egret.Tween.removeTweens(this);var a=this.countJackpotByRate(t.acumulado);e?this.jackpotValue=a:egret.Tween.get(this).to({jackpotValue:a},2e3)},e.prototype.tryJackpotMinBet=function(){!this.jackpotMinBet||GameData.currentBet<this.jackpotMinBet||CardManager.enabledCards!=CardManager.cards.length?this.jackpotLock.visible=!0:this.jackpotLock.visible=!1},Object.defineProperty(e.prototype,"textBold",{set:function(t){this.jackpotText.fontFamily=t?"Arial Black":"Arial"},enumerable:!0,configurable:!0}),e.prototype.jackpotWinCallback=function(t){t.id==Number(PlayerConfig.player("user.id"))&&(this.jackpotBonus=!0,this.jackpotNumber=t.jackpot)},e}(egret.DisplayObjectContainer);__reflect(JackpotLayer.prototype,"JackpotLayer");var MissionBar=function(t){function e(){var e=t.call(this)||this;e.missionBg=Com.addBitmapAt(e,"missionBar_json.btn_mission_bg",0,0),e.missionBook=Com.addBitmapAt(e,"missionBar_json.mission_icon",18,4);var a=MissionDataManager.checkMissionLocked();return a>=0?(e.missLock=new MissLockUI(a),e.addChild(e.missLock)):e.showMissionProcess(),e}return __extends(e,t),e.prototype.showMissionProcess=function(){var t=MissionDataManager.getActiveMissionTask(MissionDataManager.MISSION_TYPE_BINGO);this.showTaskUI(t)},e.prototype.showTaskUI=function(t){this.missionData=t,this.missionProcessUI=new MissionProcessUI,Com.addObjectAt(this,this.missionProcessUI,0,0),this.missionProcessUI.setProcess(t.current/t.target),this.addChild(this.missionBook)},e.prototype.updateMissionData=function(t,e,a){return a.toString()!=this.missionData.mission_id?void egret.error("mission id error"):this.missionData.target!=e?void egret.error("mission target error"):(this.missionProcessUI.setProcess(t/e),this.missionData.current=t,void LocalDataManager.updatePlayerData("mission.task."+a+".current",t.toString()))},e}(egret.DisplayObjectContainer);__reflect(MissionBar.prototype,"MissionBar");var MissionDataManager=function(){function t(){}return t.checkMissionLocked=function(){var t=PlayerConfig.player("mission");if("1"===t.task_is_process||"1"===t.score_info.score_is_process)return 2;if(Number(PlayerConfig.player("score.level"))<Number(t.unlock_level))return 1;for(var e in t.task)if(!isNaN(Number(e)))return-1;return 0},t.getMissionTasks=function(t){var e=PlayerConfig.player("mission"),a=e.task,n=[];for(var i in a)isNaN(Number(i))||a[i].type==t&&n.push(this.getMissionTaskData(a[i]));return n},t.getMissionTaskData=function(t){var e={};return e.is_active=t.is_active,e.current=Number(t.current),e.target=Number(t.target),e.mission_id=t.id,e},t.getActiveMissionTask=function(t){var e=PlayerConfig.player("mission"),a=e.task;for(var n in a)if(!isNaN(Number(n))&&a[n].type==t){var i=this.getMissionTaskData(a[n]);if("1"==i.is_active)return i}return null},t.MISSION_TYPE_BINGO="1",t.MISSION_TYPE_SLOT="2",t}();__reflect(MissionDataManager.prototype,"MissionDataManager");var MissionProcessUI=function(t){function e(){var e=t.call(this)||this;return e.missionProcessBar=Com.addBitmapAt(e,"missionBar_json.mission_bar",41,25),e.missionProcessTx=Com.addLabelAt(e,115,27,180,40,27,!0,!0),e.missionProcessTx.stroke=2,e.missionProcessTx.fontFamily="Righteous",e.touchChildren=!1,e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onMissionBtn,e),e}return __extends(e,t),e.prototype.setProcess=function(t){this.missionProcessBar.mask=new egret.Rectangle(0,0,this.missionProcessBar.width*t,this.missionProcessBar.height),1==t?(this.missionProcessTx.text=MuLang.getText("collect"),this.fullLight||(this.fullLight=Com.addBitmapAt(this,"missionBar_json.mission_btn_white",0,0),this.bookOutlight=Com.addBitmapAt(this,"missionBar_json.mission_icon_outlight",5,-9),this.fullLight.alpha=0,TweenerTool.tweenTo(this.fullLight,{alpha:1},1e3,0,this.alphaLight.bind(this)))):this.missionProcessTx.text=(100*t).toFixed(1)+"%"},e.prototype.alphaLight=function(){TweenerTool.tweenTo(this.fullLight,{alpha:this.fullLight.alpha>.7?.5:1},500,0,this.alphaLight.bind(this))},e.prototype.onMissionBtn=function(t){BingoMachine.missionPopup()},e}(egret.DisplayObjectContainer);__reflect(MissionProcessUI.prototype,"MissionProcessUI");var MissLockUI=function(t){function e(e){var a=t.call(this)||this;return Com.addBitmapAt(a,"missionBar_json.btn_shadow",0,0),Com.addBitmapAt(a,"missionBar_json.Locked",146,16),a.touchEnabled=!0,a.touchChildren=!1,a.addEventListener(egret.TouchEvent.TOUCH_TAP,a.showMissionLockTip,a),a.buildTip(e),a}return __extends(e,t),e.prototype.showMissionLockTip=function(t){this.contains(this.missLockTip)||(Com.addObjectAt(this,this.missLockTip,154,-57),this.missLockTip.scaleX=this.missLockTip.scaleY=.1,TweenerTool.tweenTo(this.missLockTip,{scaleX:1,scaleY:1},300,0,this.lockUIShowing.bind(this)))},e.prototype.buildTip=function(t){this.missLockTip=new egret.DisplayObjectContainer;var e=(Com.addBitmapAtMiddle(this.missLockTip,"missionBar_json.tips_bg",0,0),["coming_soon","from_level","mission_updating_tip"]),a=Com.addLabelAt(this.missLockTip,-160,-55,320,85,56,!1,!1);a.fontFamily="Righteous",a.setText(MuLang.getText(e[t],MuLang.CASE_TYPE_CAPITALIZE)),1===t&&a.setText(a.text.replace(":",": "+PlayerConfig.player("mission.unlock_level")))},e.prototype.lockUIShowing=function(){TweenerTool.tweenTo(this.missLockTip,{scaleX:.1,scaleY:.1},300,1500,MDS.removeSelf.bind(this,this.missLockTip))},e}(egret.DisplayObjectContainer);__reflect(MissLockUI.prototype,"MissLockUI");var IBingoServer=function(){function IBingoServer(){}return Object.defineProperty(IBingoServer,"connected",{get:function(){return this.serverConnection.connection},enumerable:!0,configurable:!0}),IBingoServer.serverInit=function(){eval("new this.serverConnection()")},IBingoServer.sendMessage=function(t,e){this.serverConnection.sendMessage(t,e)},Object.defineProperty(IBingoServer,"gameInitCallback",{set:function(t){this.serverConnection.gameInitCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"tounamentCallback",{set:function(t){this.serverConnection.tounamentCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"changeNumberCallback",{set:function(t){this.serverConnection.changeNumberCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"playCallback",{set:function(t){this.serverConnection.playCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"roundOverCallback",{set:function(t){this.serverConnection.roundOverCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"cancelExtraCallback",{set:function(t){this.serverConnection.cancelExtraCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"extraCallback",{set:function(t){this.serverConnection.extraCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"jackpotCallbak",{set:function(t){this.serverConnection.jackpotCallbak=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"jackpotWinCallbak",{set:function(t){this.serverConnection.jackpotWinCallbak=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"bonusGameSpinCallback",{set:function(t){this.serverConnection.bonusGameSpinCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"buffHandlerCallback",{set:function(t){this.serverConnection.buffHandlerCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"goKartHandlerCallback",{set:function(t){this.serverConnection.goKartHandlerCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"selectNumberCallback",{set:function(t){this.serverConnection.selectNumberCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(IBingoServer,"lemonGameCallback",{set:function(t){this.serverConnection.lemonGameCallback=t},enumerable:!0,configurable:!0}),IBingoServer.loginTo=function(t,e,a){void 0===e&&(e=null),this.serverConnection.loginTo(t,e,a)},IBingoServer.changeNumber=function(){this.serverConnection.sendMessage("solicitanumeros",{})},IBingoServer.play=function(t,e,a,n){this.serverConnection.sendPlay("solicitajogada",t,e,a,n)},IBingoServer.playWithCardId=function(t,e,a,n,i){this.serverConnection.sendPlayWithCardId("solicitajogada",t,e,a,n,i)},IBingoServer.playWithCardNumbers=function(t,e,a,n,i){this.serverConnection.sendPlayWithNumbers("solicitajogada",t,e,a,n,i)},IBingoServer.round=function(t,e,a,n){this.serverConnection.sedRound("round",t,e,a,n)},IBingoServer.roundOver=function(){this.serverConnection.roundOver()},IBingoServer.libera=function(){this.serverConnection.libera()},IBingoServer.cancelExtra=function(t){void 0===t&&(t=!1),this.serverConnection.cancelExtra(t)},IBingoServer.extra=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.serverConnection.extra(t,e)},IBingoServer.bonusGameSpin=function(t){this.serverConnection.bonusGameSpin(t)},IBingoServer.buffHandler=function(t,e){this.serverConnection.buffHandler(t,e)},IBingoServer.selectNumber=function(t){this.serverConnection.selectNumber(t)},IBingoServer.goKartHandler=function(t,e){this.serverConnection.goKartHandler(t,e)},IBingoServer.lemonGame=function(t,e,a,n){void 0===e&&(e=0),void 0===a&&(a=0),void 0===n&&(n=0),this.serverConnection.lemonGame(t,e,a,n)},IBingoServer.serverConnection=SFSConnector,IBingoServer}();__reflect(IBingoServer.prototype,"IBingoServer");var TounamentDataFormat=function(){function t(){}return t.parse=function(t,e){var a;switch(t){case"trm.start":a=this.initTournamentData(e);break;case"trm.update":a=this.updateTournamentData(e);break;case"trm.end":a=this.tournamentOver(e);break;default:trace("wrong tounament command")}return a},t.initTournamentData=function(t){var e={};return e.isGold=t.getBool("isGold"),e.fromLevel=Number(t.getInt("fromLevel")),e.toLevel=Number(t.getInt("toLevel")),e.gameIDs=t.getIntArray("gameIDs"),e.threshold=Number(t.getDouble("threshold:")),e.currentTreshold=Number(t.getDouble("currentTreshold")),e.eligible=t.getBool("eligible"),this.getUpdateData(e,t),e},t.getListDatas=function(t,e){var a=e.get("prizes");if(t.prizes=[],a)for(var n=0;n<a.size();n++)t.prizes[n]=this.getPrizeData(a.get(n));var i=e.get("user_list");if(t.userList=[],i)for(var n=0;n<i.size();n++)t.userList[n]=this.getAUserData(i.get(n));var o=e.get("winners");if(t.winners=[],o)for(var n=0;n<o.size();n++)t.winners[n]=this.getAUserData(o.get(n))},t.getPrizeData=function(t){var e={};return e.fromRank=Number(t.getInt("fromRank")),e.toRank=Number(t.getInt("toRank")),e.winningPrize=Number(t.getLong("winningPrize")),e.winGoldPrize=Number(t.getLong("winGoldPrize")),e},t.getAUserData=function(t){var e={};e.uid=t.getUtfString("uid"),e.isWinning=t.getBool("isWinning"),e.loyaltyLevel=t.getInt("loyaltyLevel"),e.minEnter=t.getLong("winGoldPrize"),e.coinsEarn=t.getLong("coinsEarn"),e.rank=t.getInt("rank"),e.winGoldPrize=t.getLong("winGoldPrize"),e.currentWinningPrize=t.getLong("currentWinningPrize"),e.networkLogins=[];for(var a=t.get("networkLogins"),n=0;n<a.size();n++){var i=a.get(n);e.networkLogins[n]={},e.networkLogins[n].id=i.getUtfString("id"),e.networkLogins[n].pic=i.getUtfString("pic"),e.networkLogins[n].network=i.getUtfString("network")}return e},t.updateTournamentData=function(t){var e={};return this.getUpdateData(e,t),e},t.getUpdateData=function(t,e){t.totalDuration=Number(e.getInt("total_duration")),t.duration=Number(e.getInt("duration")),t.userCount=Number(e.getInt("userCount")),t.prize=Number(e.getLong("prize")),t.normalPrize=Number(e.getLong("normalPrize")),t.goldPrize=Number(e.getLong("goldPrize")),this.getListDatas(t,e)},t.tournamentOver=function(t){var e=t.getBool("isWinning");if(e){var a={};return a.bonusId=t.getInt("pending_round_id"),a.rank=t.getInt("rank"),a.currentWinningPrize=t.getLong("currentWinningPrize"),a.goldPrize=t.getLong("winGoldPrize")||0,a}return null},t}();__reflect(TounamentDataFormat.prototype,"TounamentDataFormat");var PaytableCheckResult=function(){function t(t){this.fit=!1,this.unfitIndex=-1,this.fitIndex=[],this.name=t}return t.prototype.getCheckResult=function(t,e,a){void 0===a&&(a=0/0);var n=this.testCheckString(t,e);-1==n?isNaN(a)?this.fit=!0:(this.fits||(this.fits=[]),this.fits[a]=!0):n>=0&&(isNaN(a)?this.unfitIndex=n:(this.unfitIndexs||(this.unfitIndexs={}),this.unfitIndexs[a]=n))},t.prototype.lightCheckResult=function(t,e,a){void 0===a&&(a=0/0);var n=this.testCheckString(t,e);return-1==n?!0:!1},t.prototype.toString=function(){var t=this.name+":";if(this.fit)t+="fit = true";else if(-1!=this.unfitIndex)t+="unfitIndex:"+this.unfitIndex;else{if(this.fits){t+="fits:";for(var e=0;e<this.fits.length;e++)this.fits[e]&&(t+="("+e+","+this.fits[e]+"),");t=t.substr(0,t.length-1)}if(this.unfitIndexs){t+="unfitIndexs:";for(var a in this.unfitIndexs)t+="("+a+","+this.unfitIndexs[a]+"),";t=t.substr(0,t.length-1)}}return t},t.prototype.testCheckString=function(t,e){if(t.length!=e.length)return 0/0;for(var a=-1,n=0;n<t.length;n++){var i=e.charAt(n);if("0"!=i&&t.charAt(n)!=e.charAt(n)){if(a>=0)return 0/0;a=n}}return a},t}();__reflect(PaytableCheckResult.prototype,"PaytableCheckResult");var PaytableFilter=function(){function t(){}return t.lightConfixFilter=function(t,e){for(var a in e)if(a!=t&&this.testContain(a,t))return!0;return!1},t.paytableConfixFilter=function(t,e){void 0===e&&(e=!1);for(var a=0;a<t.length-1;a++)for(var n=a+1;n<t.length;n++){var i=void 0;if(i=e?this.testContain(t[a].paytalbe,t[n].paytalbe):this.testContain(t[a],t[n]))t.splice(n,1),n--;else if(i=e?this.testContain(t[n].paytalbe,t[a].paytalbe):i=this.testContain(t[n],t[a])){t.splice(a,1),a--;break}}},t.testContain=function(t,e){var a=this.filterObject[t];if(!a)return!1;var n=a.indexOf(e);if(n>=0)return!0;for(var i=0;i<a.length;i++)if(this.testContain(a[i],e))return!0;return!1},t}();__reflect(PaytableFilter.prototype,"PaytableFilter");var LoyaltyVo=function(){function t(){}return t.init=function(t){this.loyaltyLevel=Number(t.loyalty_level),this.loyaltyPoint=Number(t.loyalty_point),this.loyaltyThisLevelBegin=Number(t.loyalty_this_level_begin),this.loyaltyNextLevelBegin=Number(t.loyalty_next_level_begin),this.loyaltyLevelBuffEndTime=Number(t.loyalty_level_buff_end_time)||0,this.loyaltyCalcF=Number(t.loyalty_calc_f)||0,this.loyaltyCalcPurchaseLt=Number(t.loyalty_calc_purchase_lt)||0,this.thisMonthPurchaseCount=Number(t.this_month_purchase_count)||0,this.privileges=t.privileges,this.isMissionRefresh=this.privileges[this.loyaltyLevel].is_mission_refresh,this.missionScoreEasy=this.privileges[this.loyaltyLevel].mission_score_easy||"no",this.loyaltyName=["pupils","students","bachelor","teacher","master","doctor","doctor_bingo"],this.dataAfterUpdate=t,this.checkBuffTime()},t.update=function(t){for(var e in t)switch(e){case"loyalty_level":Number(t[e])>this.loyaltyLevel&&(this.loyaltyLevel=t[e]);break;case"loyalty_point":this.loyaltyPoint=t[e];break;case"loyalty_this_level_begin":this.loyaltyThisLevelBegin=t[e];break;case"loyalty_next_level_begin":this.loyaltyNextLevelBegin=t[e];break;case"loyalty_level_buff_end_time":this.loyaltyLevelBuffEndTime=t[e];break;case"loyalty_calc_f":this.loyaltyCalcF=t[e];break;case"loyalty_calc_purchase_lt":this.loyaltyCalcPurchaseLt=t[e];break;case"is_mission_refresh":this.isMissionRefresh=t[e];break;case"mission_score_easy":this.missionScoreEasy=t.key;break;case"this_month_purchase_count":this.thisMonthPurchaseCount=t[e];break;case"privileges":this.privileges=t[e];break;case"time":}this.checkBuffTime()},t.updateData=function(t){this.dataAfterUpdate=t,t.loyalty_level&&Number(t.loyalty_level)>this.loyaltyLevel||this.update(t)},t.checkBuffTime=function(){this.loyaltyLevelBuffEndTime>Math.floor((new Date).valueOf()/1e3)&&(this.overplusTimer&&(this.overplusTimer.stop(),this.overplusTimer=null),this.overplus=Math.floor(this.loyaltyLevelBuffEndTime-Math.floor((new Date).valueOf()/1e3)),this.overplusTimer=new egret.Timer(1e3,this.overplus),this.overplusTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.loyaltyBuffOver,this),this.overplusTimer.start())},t.loyaltyBuffOver=function(){this.loyaltyLevel-=1},Object.defineProperty(t,"data",{get:function(){return{loyalty_level:this.loyaltyLevel,loyalty_point:this.loyaltyPoint,loyalty_this_level_begin:this.loyaltyThisLevelBegin,loyalty_next_level_begin:this.loyaltyNextLevelBegin,loyalty_level_buff_end_time:this.loyaltyLevelBuffEndTime,loyalty_calc_f:this.loyaltyCalcF,loyalty_calc_purchase_lt:this.loyaltyCalcPurchaseLt,is_mission_refresh:this.isMissionRefresh,mission_score_easy:this.missionScoreEasy,this_month_purchase_count:this.thisMonthPurchaseCount,privileges:this.privileges}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"getLoyaltyName",{get:function(){return this.loyaltyName},enumerable:!0,configurable:!0}),t.get=function(t){return this[t]||null},t}();__reflect(LoyaltyVo.prototype,"LoyaltyVo");var PayTableManager=function(_super){function PayTableManager(t,e){var a=_super.call(this)||this;a._payTableName=e;var n=t.rule;1==n.length?a.rule=n[0]:n.length>1&&(a.rules=n),a.ui=a.createPaytableUI(t.useBckgroundPicture),a.ui.setText(t.UItext,t.textColor,t.textSize),a.ui.setBackground(t.bgPicture);var i=null,o=null;null!=t.blinkAlpha1&&null!=t.blinkColor1&&(i=MatrixTool.colorMatrixPure(t.blinkColor1,t.blinkAlpha1)),null!=t.blinkAlpha1&&null!=t.blinkColor1&&(o=MatrixTool.colorMatrixPure(t.blinkColor2,t.blinkAlpha2)),a.ui.winEffects=[i,o],a.ui.setGrids(t.gridRule),a.gridRule=t.gridRule;var r=t.position;return a.position=new egret.Point(r.x,r.y),a}return __extends(PayTableManager,_super),Object.defineProperty(PayTableManager.prototype,"payTableName",{get:function(){return this._payTableName},enumerable:!0,configurable:!0}),Object.defineProperty(PayTableManager.prototype,"multiple",{get:function(){return this.ui._tx},enumerable:!0,configurable:!0}),Object.defineProperty(PayTableManager.prototype,"UI",{get:function(){return this.ui},enumerable:!0,configurable:!0}),PayTableManager.getPayTableData=function(t){this.payTablesDictionary={};for(var e in t){var a=new PayTableManager(t[e],e);this.payTablesDictionary[e]=a}},PayTableManager.getPayTableUI=function(){for(var t in this.payTablesDictionary)this.payTablesDictionary[t].ui.initUI()},PayTableManager.prototype.createPaytableUI=function(useBg){var ptUI;return ptUI=eval("new PayTableManager.paytableUIType("+useBg+")")},PayTableManager.prototype.check=function(t){var e=new PaytableCheckResult(this.payTableName);if(this.rule)e.getCheckResult(t,this.rule);else{if(!this.rules)throw Error("ff");for(var a=0;a<this.rules.length;a++)e.getCheckResult(t,this.rules[a],a)}return e},PayTableManager.prototype.lightCheck=function(t){var e=new PaytableCheckResult(this.payTableName),a=[];if(this.rule)e.lightCheckResult(t,this.rule)&&a.push(-1);else{if(!this.rules)throw Error("ff");for(var n=0;n<this.rules.length;n++)e.lightCheckResult(t,this.rules[n],n)&&a.push(n)}return a},PayTableManager.clearPaytablesStatus=function(){for(var t in this.payTablesDictionary)this.payTablesDictionary[t].clearStatus("0")},PayTableManager.prototype.focus=function(){this.ui.focus()},PayTableManager.prototype.clearStatus=function(){this.ui.clearStatus()},PayTableManager.prototype.showBlinkAt=function(t){this.ui.showBlinkAt(t)},PayTableManager.bingoPaytableName="bingo",PayTableManager.paytableUIType=PaytableUI,PayTableManager.layerType=PaytableLayer,PayTableManager}(egret.Sprite);__reflect(PayTableManager.prototype,"PayTableManager");var PaytableResultListOprator=function(){function t(){}return t.missOneCounter=function(t,e,a){void 0===a&&(a=!1);for(var n=0,i=0;i<t.length&&(!(t[i][e]&&t[i][e].unfitIndex>=0)||(n++,a));i++);return n},t}();__reflect(PaytableResultListOprator.prototype,"PaytableResultListOprator");var PlayerConfig=function(){function PlayerConfig(){}return Object.defineProperty(PlayerConfig,"playerData",{get:function(){if(!this._playerData){var t=localStorage.getItem("player");if(t)try{this._playerData=JSON.parse(t)}catch(e){this._playerData=null}}return this._playerData},enumerable:!0,configurable:!0}),Object.defineProperty(PlayerConfig,"configData",{get:function(){if(!this._configData){var t=localStorage.getItem("config");if(t)try{this._configData=JSON.parse(t)}catch(e){this._configData=null}}return this._configData},enumerable:!0,configurable:!0}),PlayerConfig.player=function(key){try{var item=eval("this.playerData."+key);return item}catch(e){var rs=this.playerConfig[key];return"user.id"!=key||rs||(rs="243972732"),rs}},PlayerConfig.config=function(key){try{var item=eval("this.configData."+key);return item}catch(e){var rs=this.playerConfig[key];return"http"!=key||rs||(rs="https"),"host"!=key||rs||(rs="staging.doutorbingo.com"),"platform"!=key||rs||(rs="com"),rs}},Object.defineProperty(PlayerConfig,"properties",{get:function(){var t=localStorage.getItem("user_account_info");return(t.indexOf("login_type=custom")>=0||t.indexOf("login_type=guest")>=0)&&(t+="&uid="+PlayerConfig.player("user.id")),t=t.replace("login_type","network")},enumerable:!0,configurable:!0}),PlayerConfig.serverVertion=2,PlayerConfig.playerConfig={"user.id":requestStr("id"),"score.level":2538,"score.this_level_xp":2500,"score.next_level_xp":3500,"score.xp":3e3,mission:{task_is_process:"0",unlock_level:10,task:{387285:{is_active:"1",type:"1",current:"1",target:"2",id:"387285",bet_limit:-1},387286:{is_active:"0",type:"1",current:"1",target:"6",id:"387286"},387287:{is_active:"0",type:"1",current:"0",target:"15",id:"387287"}},score_info:{score_is_process:"0"}},"mission.unlock_level":3e3,"loyalty.loyalty_level":4,"facebook.email":"a@b.com"},PlayerConfig.mission={},PlayerConfig}();__reflect(PlayerConfig.prototype,"PlayerConfig");var MissionPopup=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"classAssetName",{get:function(){return"bingoMissionPopup"},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.bgAssetName="missionBingo_json.bg",this.closeButtonAssetName="missionPopup_json.btn_close",this.closeButtonOffset=new egret.Point(190,18),t.prototype.init.call(this),this.anchorOffsetX=922,this.anchorOffsetY=472,Com.addBitmapAtMiddle(this,"missionBingo_json.mission_"+MuLang.language,797,41),Com.addBitmapAt(this,"missionBingo_json.card",1080,-68),this.taskListLayer=new egret.DisplayObjectContainer,this.addChild(this.taskListLayer),this.showListByData(),Com.addBitmapAt(this,"missionPopup_json.doctor",1475,29),this.addChild(this.closeButton)},e.prototype.showListByData=function(){this.taskListLayer.removeChildren();for(var t,e=(PlayerConfig.player("mission"),MissionDataManager.getMissionTasks("1")),a=[],n=0;n<e.length;n++){var i=e[n],o="1"==i.is_active;a[n]=new MissionTaskUIItem(o,i.current/i.target,t),Com.addObjectAt(this.taskListLayer,a[n],794,this.taskListLayer.height+(n?16:0)+a[n].anchorOffsetY+176),!t&&o&&(t=!0)}},e}(GenericPo);__reflect(MissionPopup.prototype,"MissionPopup");var MissionTaskUIItem=function(t){function e(e,a,n){var i,o=t.call(this)||this;if(e&&1!=a)i=Com.addBitmapAt(o,"missionBingo_json.bar2",0,0),i.scale9Grid=new egret.Rectangle(60,48,119,122),i.width=1405;else if(i=Com.addBitmapAt(o,"missionBingo_json.bar1",12,0),i.scale9Grid=new egret.Rectangle(48,48,63,63),i.width=1393,e){MDS.addGameText(o,120,0,52,16777215,"mission_complete",!1,790,"",1)}return o.anchorOffsetX=700,o.anchorOffsetY=110,o}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(MissionTaskUIItem.prototype,"MissionTaskUIItem");var BingoGameToolbar=function(t){function e(){var e=t.call(this)||this;e._autoPlaying=!1,e._buyAllExtra=!1,e.delayKeyboard=500,e._enableKeyboard=!0,e._coins=0,e._dinero=0,e._win=0,e.allButtons=[],Com.addBitmapAt(e,"bingoGameToolbar_json.back_panel",0,96),e.buildPlayContainer(),e.buildExtraContainer(),e.stopAutoBtn=e.addBtn("auto_stop",1724,22,GameCommands.stopAuto,e,!0),e.addButtonText(e.stopAutoBtn,72,"auto",15,0,16777215,e.stopAutoBtn.width-30,125,4,147),e.addButtonText(e.stopAutoBtn,35,"click to stop",15,100,16777215,e.stopAutoBtn.width-30,70,1,147),e.stopAutoBtn.visible=!1,e.allButtons.pop(),Com.addBitmapAt(e,"bingoGameToolbar_json.middle_bar",610,22),Com.addBitmapAt(e,"bingoGameToolbar_json.msg_bg",694,35).height=86;var a=Com.addBitmapAt(e,"bingoGameToolbar_json.ballance",694,128);a.width=355,a.height=50;var n=Com.addBitmapAt(e,"bingoGameToolbar_json.ballance",1054,128);return n.width=225,n.height=50,Com.addBitmapAt(e,"bingoGameToolbar_json.balance_coin",655,115),Com.addBitmapAt(e,"bingoGameToolbar_json.balance_chip",1217,123),e.createTexts(),e.xpBar=new XpBar,Com.addObjectAt(e,e.xpBar,1365,38),e.xpBar.addEventListener(XpBar.LEVEL_UP_BONUS,e.onLevelUpBonus,e),e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onToolbarAdd,e),e.cacheAsBitmap=!0,e}return __extends(e,t),Object.defineProperty(e.prototype,"autoPlaying",{get:function(){return this._autoPlaying},set:function(t){this._autoPlaying=t,t?(this.enableAllButtons(!1),this.stopAutoBtn.visible=!0,BingoMachine.sendCommand(GameCommands.play)):(this.stopAutoBtn.visible=!1,this.playBtn.enabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buyAllExtra",{get:function(){return this._buyAllExtra},set:function(t){this._buyAllExtra=t,t?(this.enabledExtraButtons(!1),BingoMachine.sendCommand(GameCommands.extra)):this.enabledExtraButtons()},enumerable:!0,configurable:!0}),e.prototype.onToolbarAdd=function(t){},e.prototype.buildPlayContainer=function(){this.playContainer=new egret.DisplayObjectContainer,this.addChild(this.playContainer),Com.addBitmapAt(this.playContainer,"play_bg",1360,0),Com.addBitmapAt(this.playContainer,"bet_screen",178,122),this.helpBtn=this.addBtn("i",12,126,GameCommands.help,this.playContainer),this.decreseBetBtn=this.addBtn("bet_down",95,116,GameCommands.decreseBet,this.playContainer),this.increaseBetBtn=this.addBtn("bet_up",411,116,GameCommands.increaseBet,this.playContainer),this.maxBetBtn=this.addBtn("max_btn",509,116,GameCommands.maxBet,this.playContainer),this.addButtonText(this.maxBetBtn,48,"max",0,0,3421235,this.maxBetBtn.width-10,this.maxBetBtn.height,1),this.stopBtn=this.addBtn("play",1724,22,GameCommands.stop,this.playContainer),this.addButtonText(this.stopBtn,72,"stop",15,0,16777215,this.stopBtn.width-30,186,4,147),this.addPlayButton(),this.freeSpinBtn=new FreeSpinButton,this.freeSpinBtn.visible=!1,Com.addObjectAt(this.playContainer,this.freeSpinBtn,1724,22);var t=this.addToolBarText(198,192,192,30,30,0,0,this.playContainer);t.setText(MuLang.getText("total bet")),t.textColor=3421235,this.betText=this.addToolBarText(185,124,220,68,45,1,0,this.playContainer)},e.prototype.buildExtraContainer=function(){this.extraContainer=new egret.DisplayObjectContainer,this.addChild(this.extraContainer),this.extraContainer.visible=!1,Com.addBitmapAt(this.extraContainer,"BB_EXTRA_btn_bg",1360,0),this.collectBtn=this.addBtn("BB_EXTRA_collect_btn",17,120,GameCommands.collect,this.extraContainer,!0),this.addButtonText(this.collectBtn,50,"credit",10,0,0,this.collectBtn.width-20),this.buyAllBtn=this.addBtn("BB_EXTRA_buyall",290,118,GameCommands.buyAll,this.extraContainer,!0),this.addButtonText(this.buyAllBtn,50,"buy all",10,0,0,this.buyAllBtn.width-20),this.superExtraBtn=this.addMaskBtn("btn_mega",1724,22,GameCommands.extra,this.extraContainer,16777215),this.superExtraBtn.addButtonBigText(72,"mega"),this.superExtraBtn.addButtonSmallText(60),this.superExtraBtn.setIcon("balance_chip"),this.bigExtraBtn=this.addMaskBtn("BB_EXTRA_extra_btn",1724,22,GameCommands.extra,this.extraContainer),this.bigExtraBtn.addButtonBigText(72,"extra"),this.bigExtraBtn.addButtonSmallText(60),this.bigExtraBtn.setIcon("balance_coin")},e.prototype.addPlayButton=function(){this.playBtn=new LongPressButton("bingoGameToolbar_json.play","bingoGameToolbar_json.play_press"),Com.addObjectAt(this.playContainer,this.playBtn,1724,22),this.playBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendCommand,this),this.playBtn.name=GameCommands.play,this.playBtn.disabledFilter=MatrixTool.colorMatrixLighter(.2),this.playBtn.enabled=!0,this.allButtons.push(this.playBtn),this.addButtonText(this.playBtn,72,"play",15,0,16777215,this.playBtn.width-30,125,4,147),this.addButtonText(this.playBtn,35,"hold for auto",15,100,16777215,this.playBtn.width-30,70,1,147),this.playBtn.longPressSetting(1e3,this.startAuto.bind(this))},e.prototype.createTexts=function(){this.winText=this.addToolBarText(720,50,565,65,60,2,2760117),this.coinsText=this.addToolBarText(730,135,305,40,40,3,11310104),this.dineroText=this.addToolBarText(1070,135,150,40,40,3,3714109)},e.prototype.addToolBarText=function(t,e,a,n,i,o,r,s){void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=null);var l=Com.addLabelAt(s?s:this,t,e,a,n,i);return l.fontFamily="Righteous",o&&(l.stroke=o,l.strokeColor=r),l},e.prototype.addBtn=function(t,e,a,n,i,o){void 0===o&&(o=!1);var r="bingoGameToolbar_json."+t,s=o?r:r+"_press",l=Com.addDownButtonAt(i,r,s,e,a,this.sendCommand.bind(this),!0);return l.name=n,l.disabledFilter=MatrixTool.colorMatrixLighter(.2),this.allButtons.push(l),l},e.prototype.addMaskBtn=function(t,e,a,n,i,o){void 0===o&&(o=0);var r=new GameToolbarMaskButton("bingoGameToolbar_json."+t,o);return Com.addObjectAt(i,r,e,a),r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendCommand,this),r.name=n,this.allButtons.push(r),r},e.prototype.sendCommand=function(t){BingoMachine.sendCommand(t.target.name)},e.prototype.addButtonText=function(t,e,a,n,i,o,r,s,l,c){void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=16777215),void 0===r&&(r=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);var h=Com.addLabelAt(this,n,i,r?r:t.width,s?s:t.height,e);return t.addChild(h),h.fontFamily="Righteous",16777215!=o&&(h.textColor=o),l&&(h.stroke=l,h.strokeColor=c),h.setText(MuLang.getText(a,MuLang.CASE_UPPER)),h},e.prototype.setBet=function(t,e,a){this.betNumber=t*e,a?(this.maxBetBtn.enabled=!1,this.increaseBetBtn.enabled=!1):(this.maxBetBtn.enabled=!0,this.increaseBetBtn.enabled=!0),t==GameData.minBet?this.decreseBetBtn.enabled=!1:this.decreseBetBtn.enabled=!0},Object.defineProperty(e.prototype,"betNumber",{set:function(t){var e=Utils.formatCoinsNumber(t);this.betText.setText(e)},enumerable:!0,configurable:!0}),e.prototype.lockAllButtons=function(){if(!this.autoPlaying){this.enabledButtons=[];for(var t=0;t<this.allButtons.length;t++)this.allButtons[t].enabled&&(this.allButtons[t].enabled=!1,this.enabledButtons.push(this.allButtons[t]))}},e.prototype.unlockAllButtons=function(){if(!this.autoPlaying&&this.enabledButtons){for(var t=0;t<this.enabledButtons.length;t++)this.enabledButtons[t].enabled=!0;this.enabledButtons=[]}},e.prototype.showExtra=function(t,e){void 0===e&&(e=0),t?(this.autoPlaying?this.playBtn.visible=!1:(this.enableAllButtons(!1),this.buyAllExtra||this.enabledExtraButtons()),this.showExtraButton(!0),this.showTip(GameCommands.extra,e)):(this.autoPlaying||(this.enableAllButtons(!0),this.playBtn.visible=!0),this.showExtraButton(!1))},e.prototype.enableAllButtons=function(t){for(var e=0;e<this.allButtons.length;e++)this.allButtons[e].enabled=t},e.prototype.showExtraButton=function(t){this.playContainer.visible=!t,this.extraContainer.visible=t},e.prototype.enabledExtraButtons=function(t){void 0===t&&(t=!0),this.buyAllBtn.enabled=this.collectBtn.enabled=this.superExtraBtn.enabled=this.bigExtraBtn.enabled=t},e.prototype.showTip=function(t,e){void 0===e&&(e=0);var a=new egret.Event("tipStatus");switch(t){case GameCommands.play:a.status="play",this.dispatchEvent(a);break;case GameCommands.extra:a.status="extra",a.extraPrice=e,this.dispatchEvent(a),this.showCoinsIconAt(e);break;default:a.status="ready",this.dispatchEvent(a)}},e.prototype.showCoinsIconAt=function(t){this.superExtraBtn.setPrice(t),this.bigExtraBtn.setPrice(t)},e.prototype.showWinResult=function(t){t?TweenerTool.tweenTo(this,{win:t},335):this.win=t;var e=new egret.Event("winChange");e.winCoins=t,this.dispatchEvent(e)
},e.prototype.showStop=function(t){this.playBtn.visible=!t,this.stopBtn.visible=t,this.stopBtn.enabled=t},e.prototype.showCollectButtonAfterOOC=function(){this.enabledExtraButtons(),this.showExtraButton(!0)},e.prototype.unlockAllButtonsAfterOOC=function(){this.enableAllButtons(!0),this.showStop(!1)},e.prototype.unlockAllButtonsAfterOOCExtra=function(){this.enableAllButtons(!1),this.enabledExtraButtons(),this.showExtraButton(!0)},e.prototype.collect=function(){this.collectBtn.enabled&&this.collectBtn.visible&&BingoMachine.sendCommand(GameCommands.collect)},Object.defineProperty(e.prototype,"enableKeyboard",{get:function(){return this._enableKeyboard},set:function(t){var e=this;this._enableKeyboard=t,t||setTimeout(function(){e.enableKeyboard=!0},this.delayKeyboard)},enumerable:!0,configurable:!0}),e.prototype.quickPlay=function(){this.enableKeyboard&&!this.autoPlaying&&(this.playBtn.enabled&&this.playBtn.visible?(BingoMachine.sendCommand(GameCommands.play),this.enableKeyboard=!1):this.playContainer.visible&&this.stopBtn.enabled&&this.stopBtn.visible?(BingoMachine.sendCommand(GameCommands.stop),this.enableKeyboard=!1):this.extraContainer.visible&&this.bigExtraBtn.enabled&&this.bigExtraBtn.visible&&(BingoMachine.sendCommand(GameCommands.extra),this.enableKeyboard=!1))},e.prototype.enabledStopButton=function(){this.stopBtn.enabled=!1},e.prototype.megeExtraOnTop=function(t){this.superExtraBtn.visible=t,this.bigExtraBtn.visible=!t},e.prototype.updateCoinsAndDinero=function(t,e){TweenerTool.tweenTo(this,{coins:t,dinero:e},335)},e.prototype.updateXp=function(t){this.xpBar.updateXp(t)},e.prototype.startAuto=function(){BingoMachine.sendCommand(GameCommands.startAuto)},Object.defineProperty(e.prototype,"coins",{get:function(){return this._coins},set:function(t){this._coins=t,this.coinsText.setText(Utils.formatCoinsNumber(Math.floor(t)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dinero",{get:function(){return this._dinero},set:function(t){this._dinero=t,this.dineroText.setText(Utils.formatCoinsNumber(Math.floor(t)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"win",{get:function(){return this._win},set:function(t){this._win=t,t?this.winText.setText(Utils.formatCoinsNumber(Math.floor(t))):this.winText.setText("")},enumerable:!0,configurable:!0}),e.prototype.onLevelUpBonus=function(t){var e=t.data,a=new egret.Event(XpBar.LEVEL_UP_BONUS);a.data=e,this.dispatchEvent(a)},e.prototype.updateFreeSpinCount=function(t){this.freeSpinBtn.setFreeCount(t)},e.prototype.updateMissionData=function(t,e,a){},e.toolBarY=900,e}(egret.DisplayObjectContainer);__reflect(BingoGameToolbar.prototype,"BingoGameToolbar");var FreeSpinButton=function(t){function e(){var e=t.call(this,"bingoGameToolbar_json.FreeSpin","bingoGameToolbar_json.FreeSpin")||this;return e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.freeSpinClick,e),e.enabled=!0,Com.addBitmapAt(e,"bingoGameToolbar_json.FREE_"+MuLang.language,17,23),Com.addBitmapAt(e,"bingoGameToolbar_json.free spin icon",0,108),e.freeCountLeftTx=Com.addLabelAt(e,120,125,135,56,56),e}return __extends(e,t),e.prototype.freeSpinClick=function(t){BingoMachine.sendCommand(GameCommands.play),this.visible=!1},e.prototype.setFreeCount=function(t){this.visible=Boolean(t),this.freeCountLeftTx.setText("X "+t)},e}(TouchDownButton);__reflect(FreeSpinButton.prototype,"FreeSpinButton");var GameToolbarMaskButton=function(t){function e(e,a){var n=t.call(this,e,e)||this;return n.stayTime=2500,n.moveTime=800,n.maskBit=Com.addBitmapAt(n,e,0,0),n.mask=n.maskBit,n.scrollLayer=new egret.DisplayObjectContainer,n.addChild(n.scrollLayer),n.textColor=a,n}return __extends(e,t),e.prototype.addButtonBigText=function(t,e){this.buildBigText(t,e);var a=this.buildBigText(t,e);a.y=2*-this.mask.height},e.prototype.buildBigText=function(t,e){var a=Com.addLabelAt(this.scrollLayer,10,0,this.width-20,this.mask.height,t);return a.fontFamily="Righteous",a.textColor=this.textColor,a.setText(MuLang.getText(e,MuLang.CASE_UPPER)),a},e.prototype.addButtonSmallText=function(t){this.priceText=this.buildBigText(t,""),this.priceText.y=-150,this.freeText=this.buildBigText(t,"free"),this.freeText.y=-175,this.freeText.visible=!1},e.prototype.setIcon=function(t){this.icon=Com.addBitmapAt(this.scrollLayer,"bingoGameToolbar_json."+t,0,0),this.icon.x=this.maskBit.width-this.icon.width>>1,this.icon.y=-87-this.icon.height},e.prototype.setPrice=function(t){this.priceText.setText(t+""),egret.Tween.removeTweens(this.scrollLayer),this.scrollLayer.y=0,TweenerTool.tweenTo(this.scrollLayer,{y:this.maskBit.height},this.moveTime,this.stayTime,this.extraStep1.bind(this),null,egret.Ease.backInOut),this.icon.visible=this.priceText.visible=t>0,this.freeText.visible=!this.icon.visible},e.prototype.extraStep1=function(){TweenerTool.tweenTo(this.scrollLayer,{y:2*this.maskBit.height},this.moveTime,this.stayTime,this.extraStep2.bind(this),null,egret.Ease.backInOut)},e.prototype.extraStep2=function(){this.scrollLayer.y=0,TweenerTool.tweenTo(this.scrollLayer,{y:this.maskBit.height},this.moveTime,this.stayTime,this.extraStep1.bind(this),null,egret.Ease.backInOut)},e}(TouchDownButton);__reflect(GameToolbarMaskButton.prototype,"GameToolbarMaskButton");var Topbar=function(t){function e(){var e=t.call(this)||this;Com.addBitmapAt(e,"topbar_json.buy_bg",742,0),e.backToLobbyBtn=Com.addDownButtonAt(e,"topbar_json.home","topbar_json.home_press",0,14,e.onButtonClick,!0),e.menuBtn=Com.addDownButtonAt(e,"topbar_json.hamburger","topbar_json.hamburger",1908,14,e.onButtonClick,!0),e.bankBtn=Com.addDownButtonAt(e,"topbar_json.buy-btn","topbar_json.buy-btn",793,5,e.onButtonClick,!0);var a=Com.addLabelAt(e,10,10,390,80,48);return e.bankBtn.addChild(a),a.fontFamily="Righteous",a.stroke=2,a.strokeColor=0,a.setText(MuLang.getText("bank",MuLang.CASE_UPPER)),e.cacheAsBitmap=!0,e}return __extends(e,t),e.prototype.onButtonClick=function(t){if(t.target==this.backToLobbyBtn)document.location.href="../lobby";else if(t.target==this.menuBtn){var e=this.parent;e.stopAutoPlay(),e.dispatchEvent(new egret.Event("showGameSettings"))}else if(t.target==this.bankBtn){var e=this.parent;e.stopAutoPlay(),e.dispatchEvent(new egret.Event("showBank"))}},e}(egret.DisplayObjectContainer);__reflect(Topbar.prototype,"Topbar");var XpBar=function(t){function e(){var e=t.call(this)||this;return e.levelUpRecord={},Com.addBitmapAt(e,"bingoGameToolbar_json.xp",0,0),e.xpProccessUI=Com.addBitmapAt(e,"bingoGameToolbar_json.xp_filling",17,11),e.starUI=Com.addBitmapAtMiddle(e,"bingoGameToolbar_json.Group-22",21,22),e.levelTx=Com.addLabelAt(e,-5,11,50,20,20,!0),e.levelTx.bold=!0,e.levelTx.strokeColor=8947848,e.xpProccessTx=Com.addLabelAt(e,75,20,225,32,32,!0),e.xpProccessTx.bold=!0,e.level=PlayerConfig.player("score.level"),e.thisLevelXp=PlayerConfig.player("score.this_level_xp"),e.nextLevelXp=PlayerConfig.player("score.next_level_xp"),e.levelTx.setText(""+e.level),e.xpProccess=0,e.updateXp(PlayerConfig.player("score.xp")),e}return __extends(e,t),Object.defineProperty(e.prototype,"xpProccess",{get:function(){return this._xpProccess},set:function(t){this._xpProccess=t,this.xpProccessTx.text=(100*t).toFixed(1)+"%",this.xpProccessUI.mask=new egret.Rectangle(0,0,t*this.xpProccessUI.width,this.xpProccessUI.height)},enumerable:!0,configurable:!0}),e.prototype.updateXp=function(t){this.currentXp=t;var e=(this.currentXp-this.thisLevelXp)/(this.nextLevelXp-this.thisLevelXp);e>=1?(this.levelUp(),e=1):0>e&&(e=0),TweenerTool.tweenTo(this,{xpProccess:e},330),LocalDataManager.updatePlayerData("score.xp",t)},e.prototype.levelUp=function(){return this.levelUpRecord[this.level+""]?void 0:(this.levelUpRecord[this.level+""]=!0,this.sendCollectBonusRequest(BingoMachine.currentGameId,GameData.currentBet),!0)},e.prototype.sendCollectBonusRequest=function(t,e){var a={json:JSON.stringify({bonus_type:"level_up",seed:(new Date).valueOf(),debug:{},fb:PlayerConfig.player("facebook.id"),current_bet:e,machineId:t,level:this.level,game_id:t})};(new DataServer).getDataFromUrl(PlayerConfig.config("http")+"://"+PlayerConfig.config("host")+"/cmd.php?action=update_user_bonus",this.collectRequestSuccess.bind(this),this,!0,a,this.collectRequestFailed)},e.prototype.collectRequestSuccess=function(t){if("undefined"!=typeof t&&null!==t){t="string"==typeof t?JSON.parse(t):t;var e=Number(t.level);this.thisLevelXp=Number(t.this_level_xp),this.nextLevelXp=Number(t.next_level_xp),this.level=e,this.levelTx.setText(""+e),this.updateXp(Number(t.xp));var a=t.loyalty_point-Number(PlayerConfig.player("loyalty.loyalty_point")),n=[];n[0]={key:"score.level",value:e},n[1]={key:"score.this_level_xp",value:this.thisLevelXp},n[2]={key:"score.next_level_xp",value:this.nextLevelXp},n[3]={key:"levelMultiplier",value:t.levelMultiplier},n[4]={key:"chipsLevelMultiplier",value:t.chipsLevelMultiplier},n[5]={key:"levelMultiplierPuzzle",value:t.levelMultiplierPuzzle},n[6]={key:"loyalty.loyalty_point",value:t.loyalty_point},LocalDataManager.updatePlayerDatas(n);var i=Number(t.user_max_bet);GameData.maxBet<i&&GameData.bets.push(i);var o=t.bonuses,r=0;if("undefined"!=typeof o&&null!==o)for(var s=0;s<o.length;s++)r+=Number(o[s].level_up_bonus);this.showBonusAndLoyalty(r,a)}},e.prototype.collectRequestFailed=function(t){console.log("collect bonus request failed!")},e.prototype.showBonusAndLoyalty=function(t,e){var a=new egret.DisplayObjectContainer,n=new egret.DisplayObjectContainer;this.addChildAt(n,0),Com.addObjectAt(n,a,0,0),a.touchEnabled=!0;var i=Com.addBitmapAt(a,"bingoGameToolbar_json.BB_star_open_bg",0,0);i.width=300,i.height=350;var o=Com.addBitmapAt(a,"bingoGameToolbar_json.BB_star_benefit_bg",17,60);o.height=135;var r=Com.addBitmapAt(a,"bingoGameToolbar_json.BB_star_benefit_bg",17,196);r.height=135,Com.addBitmapAt(a,"bingoGameToolbar_json.loyalty_points_icon",60,90);var s=Com.addTextAt(a,135,90,140,74,52);s.verticalAlign="middle",s.textAlign="left",s.text="+"+Math.round(e);var l=Com.addLabelAt(a,27,220,240,28,28);l.setText(MuLang.getText("level_up_bonus"));var c=Com.addLabelAt(a,17,265,260,36,36);c.setText(""+Math.round(t)),TweenerTool.tweenTo(a,{y:-350},600,0,this.btBack.bind(this,a,n,t)),n.mask=new egret.Rectangle(0,-350,300,350)},e.prototype.btBack=function(t,a,n){TweenerTool.tweenTo(t,{y:0},600,1e3,MDS.removeSelf.bind(this,a));var i=new egret.Event(e.LEVEL_UP_BONUS);if(i.data=n,this.dispatchEvent(i),this.stage){var o=new FlyingCoins;o.fly(10,new egret.Point(730,435),new egret.Point(350,520),new egret.Point(400,300),.15,.1,.3),this.stage.addChild(o)}},e.LEVEL_UP_BONUS="levelUpBonus",e}(egret.DisplayObjectContainer);__reflect(XpBar.prototype,"XpBar");var Betbar=function(t){function e(e){var a=t.call(this)||this;a.processStartX=32,a.processMax=780;var n=Com.addBitmapAt(a,"betBar_json.bar_bg",0,0);return n.scale9Grid=new egret.Rectangle(18,10,60,29),n.width=820,a.processBar=Com.addBitmapAt(a,"betBar_json.bar_progress",4,4),a.processBar.scale9Grid=new egret.Rectangle(16,8,56,15),a.processBar.width=a.processStartX,a.visible=!1,a.jackpotMinBet=e,a.betPointJsckpot=new BetbarPoint(a.jackpotMinBet,"jackpot_bright_"+MuLang.language),a.betPointMaxBet=new BetbarPoint(GameData.maxBet,"max_bright_"+MuLang.language),Com.addObjectAt(a,a.betPointJsckpot,0,20),Com.addObjectAt(a,a.betPointMaxBet,a.processStartX+a.processMax,20),a}return __extends(e,t),e.prototype.setBet=function(t){egret.Tween.removeTweens(this),this.visible=!0,TweenerTool.tweenTo(this,{alpha:1},500,0,this.waitThis.bind(this)),this.checkLock(t)},e.prototype.waitThis=function(){TweenerTool.tweenTo(this,{alpha:0},500,1500,this.waitThis.bind(this))},e.prototype.hideThis=function(){this.visible=!1},e.prototype.checkLock=function(t){TweenerTool.tweenTo(this.processBar,{width:this.getBetPosition(t)},400,0),this.betPointMaxBet.resetActiveBet(GameData.maxBet),this.betPointJsckpot.x=this.getBetPosition(this.betPointJsckpot.currentActiveBet),this.betPointMaxBet.visible=this.betPointJsckpot.currentActiveBet!=GameData.maxBet,this.betPointJsckpot.resetBet(t),this.betPointMaxBet.resetBet(t)},e.prototype.getBetPosition=function(t){return GameData.bets.indexOf(t)/(GameData.bets.length-1)*this.processMax+this.processStartX},e}(egret.DisplayObjectContainer);__reflect(Betbar.prototype,"Betbar");var BetbarIcon=function(t){function e(e){var a=t.call(this)||this;if(a.iconLayer=new egret.DisplayObjectContainer,Com.addObjectAt(a,a.iconLayer,0,0),a.icon=Com.addBitmapAtMiddle(a.iconLayer,"betBar_json."+e,0,0),a.isMaxIcon=a.icon.width<200,a.isMaxIcon)a.maskBitmap=Com.addBitmapAtMiddle(a,"betBar_json."+e,0,0);else{Com.addBitmapAtMiddle(a,"betBar_json.icon_side_long",0,0);a.maskBitmap=Com.addBitmapAtMiddle(a,"betBar_json.bright",0,0)}return a.iconLayer.mask=a.maskBitmap,a.lockUI=Com.addBitmapAtMiddle(a,"betBar_json.Lock",0,0),a.lockUI.visible=!1,a.blackMask=Com.addBitmapAtMiddle(a.iconLayer,"betBar_json.icon_shadow",0,0),a.blackMask.visible=!1,a.whiteMask=Com.addBitmapAtMiddle(a.iconLayer,"betBar_json.bright",0,0),a.whiteMask.visible=!1,a}return __extends(e,t),e.prototype.unlock=function(){this.blackMask.visible=!1,this.whiteMask.visible=!0,this.whiteMask.alpha=0;var t=egret.Tween.get(this.whiteMask);t.to({alpha:1},300),t.to({alpha:0},300);var e=Com.addBitmapAt(this.iconLayer,"betBar_json.light",-250,-45);e.rotation=-45,TweenerTool.tweenTo(e,{x:250},500,600,MDS.removeSelf.bind(this,e))},e.prototype.lock=function(){this.blackMask.visible=!0,this.blackMask.alpha=1,TweenerTool.tweenTo(this.blackMask,{alpha:.5},500,500),this.lockUI.visible=!0,this.addChild(this.lockUI),this.lockUI.scaleX=this.lockUI.scaleY=1,TweenerTool.tweenTo(this.lockUI,{scaleX:.3,scaleY:.3},500,0,MDS.removeSelf.bind(this,this.lockUI),null,egret.Ease.bounceOut)},e}(egret.DisplayObjectContainer);__reflect(BetbarIcon.prototype,"BetbarIcon");var BetbarPoint=function(t){function e(e,a){var n=t.call(this)||this;return n.pointUI=Com.addBitmapAtMiddle(n,"betBar_json.point_bright",0,0),n.resetActiveBet(e),n.betIcon=new BetbarIcon(a),Com.addObjectAt(n,n.betIcon,0,-68),n}return __extends(e,t),Object.defineProperty(e.prototype,"currentActiveBet",{get:function(){return this.activeBet},enumerable:!0,configurable:!0}),e.prototype.resetBet=function(t){var e;e=t>=this.activeBet?!0:!1,e!==this.active&&(this.active=e,e?(this.pointUI.texture=RES.getRes("betBar_json.point_bright"),this.betIcon.unlock(),this.betIcon.scaleX=this.betIcon.scaleY=1.2,TweenerTool.tweenTo(this.betIcon,{scaleX:1,scaleY:1},500)):(this.pointUI.texture=RES.getRes("betBar_json.point_gray"),this.betIcon.lock()))},e.prototype.resetActiveBet=function(t){this.activeBet=t,this.activeBet!=GameData.maxBet?this.showActiveBetUI():this.hideActiveBetUI()},e.prototype.hideActiveBetUI=function(){this.activeBetUI&&(this.activeBetUI.visible=!1)},e.prototype.showActiveBetUI=function(){this.activeBetUI||(this.activeBetUI=new egret.DisplayObjectContainer,Com.addObjectAt(this,this.activeBetUI,0,0),this.activeBetBg=Com.addBitmapAt(this.activeBetUI,"betBar_json.number_bg",0,30),this.activeBetBg.scale9Grid=new egret.Rectangle(15,15,111,19),Com.addBitmapAtMiddle(this.activeBetUI,"betBar_json.number_bg_arrow",0,26),this.activeBetTx=Com.addTextAt(this.activeBetUI,-200,45,400,28,28),this.activeBetTx.bold=!0),this.activeBetTx.text=this.activeBet+"",this.activeBetBg.x=-this.activeBetTx.textWidth-20>>1,this.activeBetBg.width=this.activeBetTx.textWidth+22},e}(egret.DisplayObjectContainer);__reflect(BetbarPoint.prototype,"BetbarPoint");var GoldTounamentLayer=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(TounamentLayer);__reflect(GoldTounamentLayer.prototype,"GoldTounamentLayer");var TounamentChampoin=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.clearUI=function(){this.removeChildren()},e.prototype.show=function(t){var e=(Com.addBitmapAt(this,"tounament_json.head_bg",10,0),Com.addBitmapAt(this,"tounament_json.avatar",11,1));e.width=63,e.height=63,"facebook"==t.networkLogins[0].network&&FacebookBitmap.downloadBitmapDataByFacebookID(t.networkLogins[0].id,50,50,MDS.onUserHeadLoaded.bind(this,e,63),this);var a=Com.addBitmapAt(this,"tounament_json.Top3_1st_sheild",90,0);a.width=35,a.height=35;var n=Com.addLabelAt(this,128,0,88,30,28);n.textAlign="right",n.text="#1",n.filters=[new egret.DropShadowFilter];var i=Com.addLabelAt(this,87,48,100,20,20);i.textAlign="left",i.text="PTS:";var o=Com.addLabelAt(this,87+i.textWidth,48,129-i.textWidth,20,20);o.textAlign="right",o.setText(Utils.formatCoinsNumber(t.coinsEarn)),i.size=o.size},e}(egret.DisplayObjectContainer);__reflect(TounamentChampoin.prototype,"TounamentChampoin");var GameSoundManager=function(){function t(){this.playing=[],t.instance=this}return t.prototype.play=function(t,e,a){void 0===e&&(e=1),void 0===a&&(a=null);var n=SoundManager.play(t,-1===e);null!==a&&-1!==e&&(n.soundCallback=a,n.soundAssetName=t,n.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)),n&&this.playing.push(n),!n&&a&&a()},t.prototype.onSoundComplete=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),e.soundCallback&&(e.soundCallback(),e.soundCallback=null);var a=this.playing.indexOf(e);this.playing.splice(a,1)},t.prototype.stop=function(t){for(var e=0;e<this.playing.length;e++){var a=this.playing[e];a.soundAssetName==t&&(a.stop(),a.soundCallback&&(a.soundCallback(),a.soundCallback=null),this.playing.splice(e,1),e--)}SoundManager.stopMusic()},t.prototype.stopAll=function(){for(var t=0;t<this.playing.length;t++){var e=this.playing[t];e.soundCallback&&(e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),e.soundCallback(),e.soundCallback=null),e.stop()}this.playing=[]},t.stopAll=function(){this.instance&&this.instance.stopAll()},t.instance=null,t}();__reflect(GameSoundManager.prototype,"GameSoundManager");var TounamentUserItem=function(t){function e(e,a,n){var i=t.call(this)||this;i.anchorOffsetY=70;var o=Com.addBitmapAt(i,n?"tounament_json.own_bg":"tounament_json.player_bg",0,0);o.width=235,o.height=140;var r=Com.addBitmapAt(i,"tounament_json.head_bg",10,17);r.width=104,r.height=104;var s=Com.addBitmapAt(i,"tounament_json.avatar",12,19);if(s.width=100,s.height=100,"facebook"==e.networkLogins[0].network&&FacebookBitmap.downloadBitmapDataByFacebookID(e.networkLogins[0].id,100,100,MDS.onUserHeadLoaded.bind(i,s,100),i),3>=a){var l=i.addChildShield(a);if(l){var c=Com.addBitmapAt(i,"tounament_json."+l,152,6);c.width=69,c.height=73}}else{var h=Com.addLabelAt(i,152,28,69,40,40);h.textAlign="left",h.setText("#"+a),h.filters=[new egret.DropShadowFilter]}var u=Com.addLabelAt(i,120,85,100,22,22);u.textAlign="right",u.text="PTS";var d=Com.addLabelAt(i,120,115,100,20,20);return d.textAlign="right",d.setText(Utils.formatCoinsNumber(e.coinsEarn)),n||(i.cacheAsBitmap=!0),i}return __extends(e,t),e.prototype.addChildShield=function(t){switch(t){case 1:return"Top3_1st_sheild";case 2:return"Top3_2nd_sheild";case 3:return"Top3_3rd_sheild";default:return null}},e}(egret.DisplayObjectContainer);__reflect(TounamentUserItem.prototype,"TounamentUserItem");