var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},TouchDownButton=function(t){function e(e,n){var i=t.call(this)||this;return i.upState=Com.createBitmapByName(e),i.downState=Com.createBitmapByName(n),i.addChildAt(i.upState,0),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouchBegin,i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onTouchTap,i),i}return __extends(e,t),Object.defineProperty(e,"isRightClick",{get:function(){return document.isRightClick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.touchEnabled},set:function(t){this.touchEnabled=t,t?this.filters=[]:(this.contains(this.downState)&&this.removeChild(this.downState),this.addChildAt(this.upState,0),this.filters=this.disabledFilter?[this.disabledFilter]:[MatrixTool.colorMatrix(.5,.1,1)])},enumerable:!0,configurable:!0}),e.prototype.onTouchBegin=function(t){this.contains(this.upState)&&this.removeChild(this.upState),this.addChildAt(this.downState,0),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchEnd=function(t){this.contains(this.downState)&&this.removeChild(this.downState),this.addChildAt(this.upState,0),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchTap=function(t){return e.isRightClick?void t.stopImmediatePropagation():void SoundManager.play("open_list_mp3")},e.prototype.setButtonText=function(t){t.width=this.upState.width,t.height=this.upState.height,t.textAlign="center",t.verticalAlign="middle",this.addChild(t)},e}(egret.DisplayObjectContainer);__reflect(TouchDownButton.prototype,"TouchDownButton");var BmpText=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._color},set:function(t){this._color=t,this.filters=[MatrixTool.colorMatrixPure(t)]},enumerable:!0,configurable:!0}),e.prototype.setText=function(t){this.text=t},e}(egret.BitmapText);__reflect(BmpText.prototype,"BmpText");var Com=function(){function t(){}return t.createBitmapByName=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return n||console.error("picture "+t+" does not exist"),e.texture=n,e},t.addObjectAt=function(t,e,n,i){t.addChild(e),e.x=n,e.y=i},t.addBitmapAt=function(t,e,n,i){var r=this.createBitmapByName(e);return this.addObjectAt(t,r,n,i),r},t.addBitmapAtMiddle=function(t,e,n,i){var r=this.createBitmapByName(e);return this.addObjectAt(t,r,n,i),r.anchorOffsetX=r.width>>1,r.anchorOffsetY=r.height>>1,r},t.addRotateBitmapAt=function(t,e,n,i,r){var o=this.addBitmapAtMiddle(t,e,n,i);return egret.Tween.get(o,{loop:!0}).to({rotation:360},r).wait(0),o},t.addMovieClipAt=function(t,e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var o=new egret.MovieClip(e.generateMovieClipData(n));return this.addObjectAt(t,o,i,r),o.play(-1),o},t.addTextAt=function(t,e,n,i,r,o,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);var c=new egret.TextField;return c.width=i,c.height=r,c.size=o,c.textAlign="center",s?c.fontFamily="Arial Black":c.fontFamily="Arial",a&&(c.stroke=1,c.strokeColor=0),this.addObjectAt(t,c,e,n),c},t.addLabelAt=function(t,e,n,i,r,o,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);var c=new TextLabel;return c.maxWidth=c.width=i,c.height=r,c.maxSize=c.size=o,c.textAlign="center",s?c.fontFamily="Arial Black":c.fontFamily="Arial",a&&(c.stroke=1,c.strokeColor=0),this.addObjectAt(t,c,e,n),c},t.addBitmapTextAt=function(t,e,n,i,r,o,a){void 0===r&&(r="left"),void 0===o&&(o=0),void 0===a&&(a=0);var s=new egret.BitmapText;return s.font=RES.getRes(e),s.textAlign=r,o&&(s.text=" ",s.scaleX=s.scaleY=o/s.textHeight),a>0&&(s.filters=[MatrixTool.colorMatrixPure(a)]),this.addObjectAt(t,s,n,i),s},t.addDownButtonAt=function(t,e,n,i,r,o,a){var s=new TouchDownButton(e,n);return this.addObjectAt(t,s,i,r),s.enabled=a,s.addEventListener(egret.TouchEvent.TOUCH_TAP,o,t),s},t}();__reflect(Com.prototype,"Com");var GraphicTool=function(){function t(){}return t.drawRect=function(t,e,n,i,r,o,a,s,c){void 0===n&&(n=0),void 0===i&&(i=!1),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===c&&(c=1),i&&t.graphics.clear(),a&&t.graphics.lineStyle(a,s,c),t.graphics.beginFill(n,r),o?t.graphics.drawRoundRect(e.x,e.y,e.width,e.height,o):t.graphics.drawRect(e.x,e.y,e.width,e.height),t.graphics.endFill()},t.drawRectangles=function(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=!1),void 0===r&&(r=1),i&&t.graphics.clear(),t.graphics.beginFill(n,r);for(var o=0;o<e.length;o++){var a=e[o];t.graphics.drawRect(a.x,a.y,a.width,a.height)}t.graphics.endFill()},t.drawCircle=function(t,e,n,i,r,o,a,s,c){void 0===r&&(r=!1),void 0===o&&(o=1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===c&&(c=1),r&&t.graphics.clear(),a&&t.graphics.lineStyle(a,s,c),t.graphics.beginFill(i,o),t.graphics.drawCircle(e.x,e.y,n),t.graphics.endFill()},t}();__reflect(GraphicTool.prototype,"GraphicTool");var LongPressButton=function(t){function e(e,n){return t.call(this,e,n)||this}return __extends(e,t),e.prototype.onTouchBegin=function(e){t.prototype.onTouchBegin.call(this,e),this.longPressJustHappened=!1,this.longPressDuration&&this.addTimer()},e.prototype.addTimer=function(){this.longPressTimer&&this.removeTimer(),this.longPressTimer=new egret.Timer(this.longPressDuration,1),this.longPressTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.longPressTimer.start()},e.prototype.removeTimer=function(){this.longPressTimer&&(this.longPressTimer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.longPressTimer.stop(),this.longPressTimer=null)},e.prototype.onTimerComplete=function(t){this.longPressJustHappened=!0,this.removeTimer(),this.longPressCallback&&this.longPressCallback()},e.prototype.onTouchTap=function(e){return this.longPressJustHappened?(this.longPressJustHappened=!1,void e.stopImmediatePropagation()):(this.longPressTimer&&this.removeTimer(),void t.prototype.onTouchTap.call(this,e))},e.prototype.longPressSetting=function(t,e){void 0===e&&(e=null),this.longPressDuration=t,this.longPressCallback=e},e}(TouchDownButton);__reflect(LongPressButton.prototype,"LongPressButton");var MatrixTool=function(){function t(){}return t.colorMatrix=function(t,e,n){var i=[];i=i.concat([t,e,e,0,0]),i=i.concat([e,t,e,0,0]),i=i.concat([e,e,t,0,0]),i=i.concat([0,0,0,n,0]);var r=new egret.ColorMatrixFilter(i);return r},t.colorMatrixPure=function(t,e){void 0===e&&(e=1);var n=[];n=n.concat([0,0,0,0,t>>16]),n=n.concat([0,0,0,0,(65280&t)>>8]),n=n.concat([0,0,0,0,255&t]),n=n.concat([0,0,0,e,0]);var i=new egret.ColorMatrixFilter(n);return i},t.colorMatrixLighter=function(t){var e=1-t,n=Math.floor(255*t),i=[];i=i.concat([e,0,0,0,n]),i=i.concat([0,e,0,0,n]),i=i.concat([0,0,e,0,n]),i=i.concat([0,0,0,1,0]);var r=new egret.ColorMatrixFilter(i);return r},t}();__reflect(MatrixTool.prototype,"MatrixTool");var SoundManager=function(){function t(){}return Object.defineProperty(t,"soundOn",{get:function(){return"false"==egret.localStorage.getItem("sound")?!1:!0},set:function(t){this.soundOn!=t&&(egret.localStorage.setItem("sound",t?"":"false"),t?this.currentBackgorundMusicSound&&this.startPlayGameMusic():this.stopMusic())},enumerable:!0,configurable:!0}),Object.defineProperty(t,"soundEfOn",{get:function(){return"false"==egret.localStorage.getItem("soundEf")?!1:!0},set:function(t){this.soundEfOn!=t&&egret.localStorage.setItem("soundEf",t?"":"false")},enumerable:!0,configurable:!0}),t.play=function(t,e){void 0===e&&(e=!1);var n=RES.getRes(t);if(!n)return egret.error("can not fond sound resource:"+t),null;if(e){if(this.currentBackgorundMusicChannel&&this.currentBackgorundMusicChannel.stop(),this.currentBackgorundMusicSound=n,this.soundOn)return this.startPlayGameMusic(),null}else if(this.soundEfOn)return n.type=egret.Sound.EFFECT,n.play(0,1)},t.startPlayGameMusic=function(){this.currentBackgorundMusicSound.type=egret.Sound.MUSIC,this.currentBackgorundMusicChannel=this.currentBackgorundMusicSound.play(0,0),this.currentBackgorundMusicChannel.volume=0;var t=egret.Tween.get(this.currentBackgorundMusicChannel);t.to({volume:1},1e3)},t.stopMusic=function(){this.currentBackgorundMusicChannel&&(egret.Tween.removeTweens(this.currentBackgorundMusicChannel),this.currentBackgorundMusicChannel.stop(),this.currentBackgorundMusicChannel=null)},t}();__reflect(SoundManager.prototype,"SoundManager");var TextLabel=function(t){function e(){var e=t.call(this)||this;return e.verticalAlign="middle",e}return __extends(e,t),e.prototype.setText=function(t){for(this.text=t,this.width=5*this.maxWidth,this.size<=this.maxSize-2&&(this.size=this.maxSize);this.textWidth>this.maxWidth;)this.size-=2;this.width=this.maxWidth},e}(egret.TextField);__reflect(TextLabel.prototype,"TextLabel");var TweenerTool=function(){function t(){}return t.tweenTo=function(t,e,n,i,r,o,a){void 0===i&&(i=0),void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=null);var s=egret.Tween.get(t);i>0&&s.wait(i);for(var c in o)t[c]=o[c];s.to(e,n,a),r&&s.call(r)},t}();__reflect(TweenerTool.prototype,"TweenerTool");var Utils={formatCoinsNumber:function(t){var e=t+"",n="",i="";e.indexOf(".")>0&&(i=e.substring(e.indexOf("."),e.length),e=e.substring(0,e.indexOf(".")));for(var r=e.length,o=1;r>0;r--,o++)n=(o%3===0?",":"").concat(e.charAt(r-1))+n;return n.substring(","===n.charAt(0)?1:0)+i},toFirstUpperCase:function(t){return t.substring(0,1).toUpperCase()+t.substring(1,t.length).toLowerCase()},secondToHour:function(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),i=Math.floor(t%60);return(10>e?"0":"")+e+":"+(10>n?"0":"")+n+":"+(10>i?"0":"")+i},secondsOverDay:function(){var t=new Date;return{D:0,H:23-t.getHours(),M:59-t.getMinutes(),S:59-t.getSeconds()}},secondsOverWeekend:function(){var t=new Date;return{D:7-t.getDay(),H:23-t.getHours(),M:59-t.getMinutes(),S:59-t.getSeconds()}},replaceAll:function(t,e,n){return t.indexOf(e)>-1?Utils.replaceAll(t.replace(e,n),e,n):t}};